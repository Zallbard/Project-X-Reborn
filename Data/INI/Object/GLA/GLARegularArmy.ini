Object GLAInfantryAnarchist
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUAnarchist_L
ButtonImage             SUAnarchist

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model          UIAnar_SKN
IdleAnimation  UIPART_SKL.UIPART_STA
IdleAnimation  UIPART_SKL.UIPART_IDA
IdleAnimation  UIPART_SKL.UIPART_IDB
AnimationMode  ONCE
TransitionKey  TRANS_Stand
End

ConditionState  MOVING
Animation  UIPART_SKL.UIPART_RNA 35
AnimationMode  LOOP
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A

ConditionState  DYING
Animation  UIPART_SKL.UIPART_DTA
Animation  UIPART_SKL.UIPART_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIPART_SKL.UIPART_ADTD1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIPART_SKL.UIPART_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIPART_SKL.UIPART_ADTD3
AnimationMode  ONCE
End

ConditionState  PREATTACK_A
Model  UIAnar_SKN_B
Animation  UIMOB01_SKL.UIMOB01_ATCA_BF ; the wind up
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A RELOADING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

ConditionState  FIRING_A
Model  UIAnar_SKN_B
Animation  UIMOB01_SKL.UIMOB01_ATCA_AF ; the release and follow-thru
TransitionKey  TRANS_THROW
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End
AliasConditionState  FIRING_A BETWEEN_FIRING_SHOTS_A

ConditionState  RELOADING_A
Model  UIAnar_SKN_B
Animation UIMOB01_SKL.UIMOB01_IDA1
WaitForStateToFinishIfPossible  TRANS_THROW ; universal hub for follow-thru
AnimationSpeedFactorRange  1.5 1.5
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End
AliasConditionState  RELOADING_A FIRING_A
AliasConditionState  RELOADING_A BETWEEN_FIRING_SHOTS_A

; ---- Placing Charges
ConditionState  UNPACKING
Model  UIAnar_SKN_C
Animation  NIHCKR_SKL.NIHCKR_ATA1
AnimationMode  ONCE
Flags  MAINTAIN_FRAME_ACROSS_STATES
TransitionKey  TRANS_PLANTING_BOMB
End

TransitionState  TRANS_PLANTING_BOMB TRANS_Stand
Model  UIAnar_SKN_C
Animation  NIHCKR_SKL.NIHCKR_ATA3
AnimationSpeedFactorRange  1.5 1.8
End

ConditionState  FREEFALL
Animation  UIPART_SKL.UIPART_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState  PARACHUTING
Animation  UIPART_SKL.UIPART_PHG
AnimationMode  LOOP
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING DYING

TransitionState  TRANS_Falling TRANS_Chute
Animation  UIPART_SKL.UIPART_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End

TransitionState  TRANS_Chute TRANS_Stand
Animation  UIPART_SKL.UIPART_PTD
AnimationMode  ONCE
End

ConditionState  SPECIAL_CHEERING
Animation  UIPART_SKL.UIPART_CHA
AnimationMode  ONCE
End

End

; ***DESIGN parameters ***
DisplayName       OBJECT:Anarchist
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions         NONE
Weapon             PRIMARY AnarchistGrenadeWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange          175
ShroudClearingRange  200

BuildCost  250
BuildTime  6.0          ;in seconds

ExperienceValue     20 20 40 60    ;Experience point value at each level
ExperienceRequired  0 100 200 400  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet  GLAAnarchistCommandSet

; *** AUDIO Parameters ***
VoiceSelect  AnarchistVoiceSelect
VoiceMove  AnarchistVoiceMove
VoiceAttack  AnarchistVoiceAttack
VoiceFear  AnarchistVoiceFear
VoiceGuard  AnarchistVoiceMove
UnitSpecificSounds
VoiceGarrison          AnarchistVoiceGarrison
VoiceCreate            AnarchistVoiceCreate
VoiceGetHealed         TerroristVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Behavior  CommandButtonHuntUpdate  ModuleTag_CBH01 ; allows use of command button hunt script with this unit.
End
Locomotor  SET_NORMAL RebelLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  FireWeaponWhenDeadBehavior ModuleTag_SuicidePack01
DeathTypes     NONE +CRUSHED
DeathWeapon    TunnelDefenderSuicideDynamitePack
StartsActive   No
TriggeredBy    Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  CommandSetUpgrade ModuleTag_SuicidePack02
CommandSet   GLAAnarchistUpgragedCommandSet
TriggeredBy  Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  SpecialAbility ModuleTag_ImprovisedMine01
SpecialPowerTemplate      SpecialAbilityAnarchistImprovisedMine
UpdateModuleStartsAttack  Yes
StartsPaused              No                 ; so the UnpauseSpecialPowerUpgrade, below can turn it on
InitiateSound             AnarchistVoicePlantMine
End

Behavior  SpecialAbilityUpdate ModuleTag_DemoCharge02
SpecialPowerTemplate                SpecialAbilityAnarchistImprovisedMine
StartAbilityRange                   50.0
PreparationTime                     0
SpecialObjectAttachToBone           BONE_CASE_MAIN
SpecialObject                       GLAAnarchistImprovisedMineRandom
MaxSpecialObjects                   3
UnpackTime                          3000
SpecialObjectsPersistWhenOwnerDies  Yes
SpecialObjectsPersistent            Yes
UniqueSpecialObjectTargets          No
FlipOwnerAfterUnpacking             No
LoseStealthOnTrigger                No
ApproachRequiresLOS                 No
NeedToFaceTarget                    No
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End

Behavior  SquishCollide ModuleTag_07
;nothing
End

; --- begin Death modules ---

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -LASERED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_AnarchistDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05524
DeathTypes           NONE +BURNED +POISONED_GAMMA +LASERED +EXPLODED +EXTRA_5
DestructionDelay     0
Weapon               INITIAL AnarchistGrenadesPrematureDetonation
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_AnarchistSurrender
OCL                  INITIAL OCL_AnarchistSurrendering
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_14
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryAnarchistSurrenderCrate
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; --- Idle
DefaultConditionState
Model              UIAnar_SKN_C
Animation          NIHCKR_SKL.NIHCKR_SUR
AnimationMode      ONCE
TransitionKey      TRANS_SURRENDERING
WeaponMuzzleFlash  PRIMARY MuzzleFS
End
ConditionState     LOADED
Animation          NIHCKR_SKL.NIHCKR_SST
AnimationMode      LOOP
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End

; --- dying anims
ConditionState       RUBBLE
Animation          NIHCKR_SKL.NIHCKR_DTA
Animation          NIHCKR_SKL.NIHCKR_DTB
AnimationMode      ONCE
TransitionKey      None
AnimationSpeedFactorRange  1.5 2.0
End

End

Draw  W3DModelDraw ModuleTag_SurrenderFlag01
DefaultConditionState
Model              EXSurndr_B
Animation          EXSurndr_B.EXSurndr_B
AnimationMode      ONCE
HideSubObject      FLAG
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
ShowSubObject      FLAG
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End
ConditionState       RUBBLE
Animation          NONE
End
End

; ***DESIGN parameters ***
Side             GLA
EditorSorting    SYSTEM

WeaponSet
Conditions           None
Weapon               SECONDARY SuicideUnresistableWeapon
End

ArmorSet
Conditions       None
Armor            POWArmor
DamageFX         InfantryDamageFX
End

ExperienceValue      0 0 0 0
ExperienceRequired   0 0 0 0
IsTrainable      Yes
CrushableLevel   0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** ENGINEERING Parameters ***
KindOf  INFANTRY UNATTACKABLE CAN_ATTACK

Body  ActiveBody ModuleTag_03
MaxHealth        100.0
InitialHealth    10.0
End

Behavior  AIUpdateInterface ModuleTag_03232
End

Behavior  OCLUpdate ModuleTag_ReviveTrigger01
MinDelay      30000
MaxDelay      33000
OCL           OCL_CreateRealFortress
End

Behavior  UnitCrateCollide ModuleTag_02
UnitCount  1
UnitName  AmericanCIAInteligenceObject
RequiredKindOf  CAN_RAPPEL  ;Rangers only
HumanOnly  No
BuildingPickup  No
PickupScience  SCIENCE_CapturePrisoners ;Requires the rangers to have this upgrade
ForbidOwnerPlayer  Yes
ExecuteFX  FX_PrisonerCratePickup
ExecuteAnimation  PrisonerCaptured
ExecuteAnimationTime    4.0    ; In seconds
ExecuteAnimationZRise   15.0   ; Z world units per second to rise
ExecuteAnimationFades   Yes    ; Animation does/doesn't fade out
End

Behavior  TransportContain ModuleTag_Loaded01
Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
AllowInsideKindOf      NO_COLLIDE
End

Behavior  SquishCollide ModuleTag_Crush01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Revive01
DeathTypes           NONE +SUICIDED
DestructionDelay     0
End
Behavior  CreateObjectDie ModuleTag_Revive02
DeathTypes  NONE +SUICIDED
CreationList  OCL_SurrenderedAnarchistRevive
TransferPreviousHealth  Yes
End

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -LASERED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -SUICIDED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_AnarchistDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death0552321
DeathTypes           NONE +BURNED +POISONED_GAMMA +LASERED +EXPLODED +EXTRA_5 +EXTRA_4
DestructionDelay     0
Weapon               INITIAL AnarchistGrenadesPrematureDetonation
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End

; --- end Death modules ---

;Geometry  BOX
;GeometryMajorRadius  5.0
;GeometryMinorRadius  5.0
;GeometryHeight  7.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  18;
ShadowSizeY  18;
ShadowTexture  EXPowDcl;

End
;-----------------------------------------------------
Object GLAInfantryAngryMobNexus
Scale 0.90
;**** ART Parameters **************************
SelectPortrait          SUAngryMob_L
ButtonImage             SUAngryMob

UpgradeCameo1  Upgrade_GLAArmTheMob

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  None
End
End


;****DESIGN parameters **************************

DisplayName       OBJECT:AngryMobNexus
Side  GLA

RadarPriority        NOT_ON_RADAR

EditorSorting    INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY   GLAAngryMobNexusHarmlessWeapon
Weapon  SECONDARY GLAAngryMobNexusHarmlessWeapon
Weapon  TERTIARY  GLAAngryMobNexusHarmlessWeapon
End


ArmorSet
Conditions       None
Armor            InvulnerableAllArmor
DamageFX         None
End

BuildCost        1200
BuildTime        18.0          ;in seconds
VisionRange      220  ; it can scout for the spawn
ShroudClearingRange  0

Prerequisites
Object  GLABarracks
Object  GLABlackMarket
End

IsTrainable      No

ExperienceValue  30 60 120 240    ;Experience point value at each level

CommandSet     GLAInfantryAngryMobCommandSet;

;**** AUDIO Parameters *****************************
VoiceSelect  AngryMobVoiceSelect
VoiceMove  AngryMobVoiceMove
VoiceGuard  AngryMobVoiceMove
VoiceAttack  AngryMobVoiceAttack
SoundMoveStart  NoSound
SoundAmbient  AngryMobAmbientLoop
SoundAmbientRubble  NoSound
UnitSpecificSounds
VoiceCreate           AngryMobVoiceCreate
End


;**** ENGINEERING Parameters ******************************

RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK INFANTRY OBSTACLE MOB_NEXUS ATTACK_NEEDS_LINE_OF_SIGHT NO_COLLIDE SELECTABLE SCORE
Body  ImmortalBody ModuleTag_02
MaxHealth        99999.0
InitialHealth    99999.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Locomotor  SET_NORMAL AngryMobNexusLocomotor
Locomotor  SET_WANDER AngryMobNexusLocomotor
Locomotor  SET_PANIC AngryMobNexusLocomotor


Behavior  PhysicsBehavior ModuleTag_04
Mass  50.0
End

Behavior             SpawnBehavior ModuleTag_05
SpawnNumber        15
SpawnReplaceDelay  20000 ; 20 seconds

;GLAInfantryAngryMobPistol01          ; Aladdin that gets a bigger gun
;GLAInfantryAngryMobPistolToMolotov01 ; Aladdin gets hot sauce
;GLAInfantryAngryMobRock02            ; Woman in the Gypsy Costume that gets a bigger gun
;GLAInfantryAngryMobMolotov02         ; The Lady with the hot sauce
;GLAInfantryAngryMobPistol03          ; Skinny Guy with the Green Beret that gets a bigger gun
;GLAInfantryAngryMobPistolToMolotov03 ; Skinny Guy with the Green Beret that gets hot sauce
;GLAInfantryAngryMobRock04            ; Fat guy with the tank top that gets a bigger gun
;GLAInfantryAngryMobMolotov04         ; Fat guy with the hot sauce
;GLAInfantryAngryMobPistol05          ; The robed dude with the Man-Veil that gets a bigger gun
;GLAInfantryAngryMobPistolToMolotov05 ; The robed dude with the Man-Veil that gets hot sauce
;GLAInfantryAngryMobRock02            ; Woman in the Gypsy Costume that gets a bigger gun

SpawnTemplateName  GLAInfantryAngryPistolToAK47
SpawnTemplateName  GLAInfantryAngryPistolToMolotov
SpawnTemplateName  GLAInfantryAngryRockToAK47
SpawnTemplateName  GLAInfantryAngryRockToMolotov

ExitByBudding       Yes;!
OneShot             No
AggregateHealth     Yes
SlavesHaveFreeWill  No
End

Behavior  QueueProductionExitUpdate ModuleTag_06
UnitCreatePoint    X:0.0 Y:0.0 Z:0.0
NaturalRallyPoint  X:0.0 Y:0.0 Z:0.0
ExitDelay          5000 ; 5 sec
InitialBurst       7 ; the first set of 7 will not delay
End

Behavior  DestroyDie ModuleTag_07
DeathTypes  ALL
End

Geometry  CYLINDER
GeometryMajorRadius  1.0
GeometryMinorRadius  1.0
GeometryHeight  1.0
GeometryIsSmall  Yes
Shadow  SHADOW_VOLUME

End

;Using build variations to create greater variety in mobs instead of spawning with a fixed number of members each time
;------------------------------------------------------------------------------
Object GLAInfantryAngryRockToAK47
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobRock02 GLAInfantryAngryMobRock04
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End

;------------------------------------------------------------------------------
Object GLAInfantryAngryPistolToAK47
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobPistol01 GLAInfantryAngryMobPistol03 GLAInfantryAngryMobPistol05
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End

;------------------------------------------------------------------------------
Object GLAInfantryAngryRockToMolotov
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobMolotov02 GLAInfantryAngryMobMolotov04
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End

;------------------------------------------------------------------------------
Object GLAInfantryAngryPistolToMolotov
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobPistolToMolotov01 GLAInfantryAngryMobPistolToMolotov03 GLAInfantryAngryMobPistolToMolotov05
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End


;Guy with pistol that upgrades to Molotov cocktails
Object GLAInfantryAngryMobPistol01
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING PISTOL
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB01_SKN
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA1 0 12
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA2 0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_CHA  0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End

ConditionState  MOVING
Animation  UIMOB01_SKL.UIMOB01_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB01_SKL.UIMOB01_CHD
AnimationMode  ONCE
End

; Aiming Pistol
TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  ATTACKING FIRING_A
Animation  UIMOB01_SKL.UIMOB01_ATA1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB01_SKL.UIMOB01_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RELOADING_A
Animation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB01_SKL.UIMOB01_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

;--------------------------------------------------------
; TRANSITION FROM PISTOL TO AK47
TransitionState  TRANS_STAND TRANS_STAND_AK
Animation  UIMOB01_SKL.UIMOB01_TA-D
AnimationMode  ONCE
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
Model  UIMOB01_SKN
IdleAnimation  UIMOB01_SKL.UIMOB01_IDD1 0 6
IdleAnimation  UIMOB01_SKL.UIMOB01_IDD2 0 6
IdleAnimation  UIMOB01_SKL.UIMOB01_CHD  0 6
IdleAnimation  UIMOB01_SKL.UIMOB01_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_DD1
Animation  UIMOB01_SKL.UIMOB01_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB01_SKL.UIMOB01_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  None
End
End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobPistolWeapon
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY GLAAngryMobAK47Weapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB01
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  WeaponSetUpgrade UpgradeTag_01
TriggeredBy  Upgrade_GLAArmTheMob
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  4.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with pistol that upgrades to Molotov cocktails
Object GLAInfantryAngryMobPistolToMolotov01
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; While carrying pistol
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB01_SKN
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA1 0 12
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA2 0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_CHA  0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  UIMOB01_SKL.UIMOB01_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  RIDER1 DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider1
End

ConditionState  RIDER2 DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider2
End

ConditionState  RIDER1 SPECIAL_CHEERING
Animation  UIMOB01_SKL.UIMOB01_CHD
AnimationMode  ONCE
End
AliasConditionState  RIDER2 SPECIAL_CHEERING

; Aiming Pistol

ConditionState  RIDER1 PREATTACK_A
Animation      UIMOB01_SKL.UIMOB01_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  RIDER1 FIRING_A
Animation  UIMOB01_SKL.UIMOB01_ATA2_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB01_SKL.UIMOB01_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RIDER1 RELOADING_A
Animation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB01_SKL.UIMOB01_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

; Upgraded with Molotovs
;---------------------------------------------------------

ConditionState  RIDER2
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA1 0 12
IdleAnimation  UIMOB01_SKL.UIMOB01_CHA  0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End

ConditionState  MOVING RIDER2
Animation  UIMOB01_SKL.UIMOB01_RNA
Animation  UIMOB01_SKL.UIMOB01_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  MOVING_MOLOTOV
End

; Drawing Molotov
ConditionState   RIDER2 PREATTACK_A
Animation      UIMOB01_SKL.UIMOB01_ATCA_BF ; wind up
AnimationMode  ONCE
TransitionKey  TRANS_PREATTACK_MOLOTOV
End

; Throwing Molotov
ConditionState  RIDER2 FIRING_A
Animation  UIMOB01_SKL.UIMOB01_ATCA_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_MOLOTOV
AnimationSpeedFactorRange 2.0 2.0
End

; Reloading Molotov
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Animation  UIMOB01_SKL.UIMOB01_STA 0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_RELOADING_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End
AliasConditionState  RIDER2 RELOADING_A


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  Bogo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider1 TRANS_Flailing_Rider1
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider1
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  Logo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider2 TRANS_Flailing_Rider2
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider2
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  Zogo
End


End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  WEAPON_RIDER1
Weapon  PRIMARY GLAAngryMobPistolWeapon
End

WeaponSet
Conditions  WEAPON_RIDER2
Weapon  PRIMARY GLAAngryMobMolotovCocktailProjectileWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB01
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC  AngryMobPanicLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  StatusBitsUpgrade ModuleTag_Upgrade01
TriggeredBy     Upgrade_GLAArmTheMob
StatusToSet     HIJACKED
End

Behavior  SubObjectsUpgrade ModuleTag_Upgrade02
TriggeredBy     Upgrade_GLAArmTheMob
HideSubObjects  AK47 PISTOL_01
End

;This module triggers the weapon switch for all mob members freshly build or spawned
Behavior  FireWeaponCollide  ModuleTag_Upgrade03
CollideWeapon    GLAAngryMobPistolToMolotovTriggerWeapon
RequiredStatus   STATUS_RIDER1 HIJACKED
End

;This module triggers the weapon switch for all mob members presently on the map
Behavior  ObjectCreationUpgrade ModuleTag_Upgrade04
UpgradeObject    OCL_GenericDummyRider2_Normal
TriggeredBy      Upgrade_GLAArmTheMob
End

Behavior  RiderChangeContain ModuleTag_Upgrade05
;;;;Normal
Rider1  GenericFakeRider1_Default_Rank RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GenericCommandSet SET_NORMAL
;;;;Upgraded
Rider2  GenericFakeRider2_Default_Rank RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GenericCommandSet SET_NORMAL

Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
DamagePercentToUnits   100%
BurnedDeathToUnits     No
AllowInsideKindOf      CAN_ATTACK
ScuttleDelay           100
ScuttleStatus          TOPPLED
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  4.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Woman with throwing rock that upgrades to an AK
Object GLAInfantryAngryMobRock02
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB02_SKN
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB1 0 12
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB2 0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_CHB  0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
WeaponFireFXBone   PRIMARY NONE
WeaponMuzzleFlash  PRIMARY NONE
End


; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB02_SKL.UIMOB02_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  ATTACKING FIRING_A
Animation  UIMOB02_SKL.UIMOB02_ATB1_AF ; throw
Animation  UIMOB02_SKL.UIMOB02_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A


ConditionState  MOVING
Animation  UIMOB02_SKL.UIMOB02_RNB
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  DYING
Animation  UIMOB02_SKL.UIMOB02_DB1
Animation  UIMOB02_SKL.UIMOB02_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB02_SKL.UIMOB02_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


;--------------------------------------------------------
; TRANSITION FROM STONE TO AK47
TransitionState  TRANS_STAND_A TRANS_STAND_AK
Animation  UIMOB02_SKL.UIMOB02_TB-D
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
IdleAnimation  UIMOB02_SKL.UIMOB02_IDD1 0 6
IdleAnimation  UIMOB02_SKL.UIMOB02_IDD2 0 6
IdleAnimation  UIMOB02_SKL.UIMOB02_CHD  0 6
IdleAnimation  UIMOB02_SKL.UIMOB02_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_DD1
Animation  UIMOB02_SKL.UIMOB02_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB02_SKL.UIMOB02_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
WeaponFireFXBone   SECONDARY NONE
WeaponMuzzleFlash  SECONDARY NONE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB02_SKL.UIMOB02_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB02_SKL.UIMOB02_B_ADTA1
Animation  UIMOB02_SKL.UIMOB02_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA2
Animation  UIMOB02_SKL.UIMOB02_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA3
Animation  UIMOB02_SKL.UIMOB02_D_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

End



;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobRockProjectileWeapon
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY GLAAngryMobAK47Weapon ; for atttacking in AK-proof conditions
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  WeaponSetUpgrade UpgradeTag_01
TriggeredBy  Upgrade_GLAArmTheMob
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  4.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Woman with throwing rock that upgrades to Molotov cocktails
Object GLAInfantryAngryMobMolotov02
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB02_SKN
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB1 0 12
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB2 0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_CHB  0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End


; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB02_SKL.UIMOB02_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  FIRING_A
Animation  UIMOB02_SKL.UIMOB02_ATB1_AF ; throw
Animation  UIMOB02_SKL.UIMOB02_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A



ConditionState  DYING
Animation  UIMOB02_SKL.UIMOB02_DB1
Animation  UIMOB02_SKL.UIMOB02_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB02_SKL.UIMOB02_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


; WHILE CARRYING MOLOTOV
;---------------------------------------------------------
ConditionState  USER_1
Model  UIMOB02_SKN
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB1 0 12
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB2 0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_CHB  0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End


; Drawing Molotov
ConditionState   USER_1 PREATTACK_A
Animation      UIMOB02_SKL.UIMOB02_ATCB_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  USER_1 PREATTACK_A FIRING_A
AliasConditionState  USER_1 PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing Molotov
ConditionState  USER_1 FIRING_A
Animation  UIMOB02_SKL.UIMOB02_ATCB_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.0 2.0
End
AliasConditionState  USER_1 BETWEEN_FIRING_SHOTS_A
AliasConditionState  USER_1 RELOADING_A

ConditionState  USER_1 MOVING
Animation  UIMOB02_SKL.UIMOB02_RNB
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  USER_1 DYING
Animation  UIMOB02_SKL.UIMOB02_DB1
Animation  UIMOB02_SKL.UIMOB02_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  USER_1 SPECIAL_CHEERING
Animation  UIMOB02_SKL.UIMOB02_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End

;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB02_SKL.UIMOB02_B_ADTA1
Animation  UIMOB02_SKL.UIMOB02_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA2
Animation  UIMOB02_SKL.UIMOB02_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA3
Animation  UIMOB02_SKL.UIMOB02_D_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

End



;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobMolotovCocktailProjectileWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  ModelConditionUpgrade ModuleTag_Upgrade01
ConditionFlag  USER_1
TriggeredBy    Upgrade_GLAArmTheMob
End

Behavior  SubObjectsUpgrade ModuleTag_Upgrade02
TriggeredBy     Upgrade_GLAArmTheMob
HideSubObjects  ROCK_01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  4.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with pistol that upgrades to Molotov cocktails
ObjectReskin GLAInfantryAngryMobPistol03 GLAInfantryAngryMobPistol01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes



; WHILE CARRYING PISTOL
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB03_SKN
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA1 0 12
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA2 0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_CHA  0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End

ConditionState  MOVING
Animation  UIMOB03_SKL.UIMOB03_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB03_SKL.UIMOB03_CHD
AnimationMode  ONCE
End

; Aiming Pistol
TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  ATTACKING FIRING_A
Animation  UIMOB03_SKL.UIMOB03_ATA1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB03_SKL.UIMOB03_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RELOADING_A
Animation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB03_SKL.UIMOB03_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

;--------------------------------------------------------
; TRANSITION FROM PISTOL TO AK47
TransitionState  TRANS_STAND TRANS_STAND_AK
Animation  UIMOB03_SKL.UIMOB03_TA-D
AnimationMode  ONCE
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
Model  UIMOB03_SKN
IdleAnimation  UIMOB03_SKL.UIMOB03_IDD1 0 6
IdleAnimation  UIMOB03_SKL.UIMOB03_IDD2 0 6
IdleAnimation  UIMOB03_SKL.UIMOB03_CHD  0 6
IdleAnimation  UIMOB03_SKL.UIMOB03_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_DD1
Animation  UIMOB03_SKL.UIMOB03_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB03_SKL.UIMOB03_ATD_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_ATD_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB03_SKL.UIMOB03_ATD_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  None
End


End


;Geometry  CYLINDER
;GeometryMajorRadius  3.0 ; very thin
;GeometryMinorRadius  3.0 ; very thinD
;GeometryHeight  12.0
;GeometryIsSmall  Yes

End

;Guy with pistol that upgrades to Molotov cocktails
ObjectReskin GLAInfantryAngryMobPistolToMolotov03 GLAInfantryAngryMobPistolToMolotov01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; While carrying pistol
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB03_SKN
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA1 0 12
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA2 0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_CHA  0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  UIMOB03_SKL.UIMOB03_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  RIDER1 DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider1
End

ConditionState  RIDER2 DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider2
End

ConditionState  RIDER1 SPECIAL_CHEERING
Animation  UIMOB03_SKL.UIMOB03_CHD
AnimationMode  ONCE
End
AliasConditionState  RIDER2 SPECIAL_CHEERING

; Aiming Pistol

ConditionState  RIDER1 PREATTACK_A
Animation      UIMOB03_SKL.UIMOB03_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  RIDER1 FIRING_A
Animation  UIMOB03_SKL.UIMOB03_ATA2_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB03_SKL.UIMOB03_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RIDER1 RELOADING_A
Animation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB03_SKL.UIMOB03_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

; Upgraded with Molotovs
;---------------------------------------------------------

ConditionState  RIDER2
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA1 0 12
IdleAnimation  UIMOB03_SKL.UIMOB03_CHA  0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End

ConditionState  MOVING RIDER2
Animation  UIMOB03_SKL.UIMOB03_RNA
Animation  UIMOB03_SKL.UIMOB03_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  MOVING_MOLOTOV
End

; Drawing Molotov
ConditionState   RIDER2 PREATTACK_A
Animation      UIMOB03_SKL.UIMOB03_ATCA_BF ; wind up
AnimationMode  ONCE
TransitionKey  TRANS_PREATTACK_MOLOTOV
End

; Throwing Molotov
ConditionState  RIDER2 FIRING_A
Animation  UIMOB03_SKL.UIMOB03_ATCA_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_MOLOTOV
AnimationSpeedFactorRange 2.0 2.0
End

; Reloading Molotov
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Animation  UIMOB03_SKL.UIMOB03_STA 0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_RELOADING_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End
AliasConditionState  RIDER2 RELOADING_A


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  Bogo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider1 TRANS_Flailing_Rider1
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider1
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  Logo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider2 TRANS_Flailing_Rider2
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider2
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  Zogo
End


End

;Geometry  CYLINDER
;GeometryMajorRadius  3.0 ; very thin
;GeometryMinorRadius  3.0 ; very thinD
;GeometryHeight  12.0
;GeometryIsSmall  Yes

End

;Guy with throwing rock that upgrades to an AK
Object GLAInfantryAngryMobRock04
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB04_SKN
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB1 0 12
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB2 0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_CHB  0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
WeaponFireFXBone   PRIMARY NONE
WeaponMuzzleFlash  PRIMARY NONE
End


; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB04_SKL.UIMOB04_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  ATTACKING FIRING_A
Animation  UIMOB04_SKL.UIMOB04_ATB1_AF ; throw
Animation  UIMOB04_SKL.UIMOB04_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A

ConditionState  MOVING
Animation  UIMOB04_SKL.UIMOB04_RUN
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  DYING
Animation  UIMOB04_SKL.UIMOB04_DB1
Animation  UIMOB04_SKL.UIMOB04_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB04_SKL.UIMOB04_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


;--------------------------------------------------------
; TRANSITION FROM STONE TO AK47
TransitionState  TRANS_STAND_A TRANS_STAND_AK
Animation  UIMOB04_SKL.UIMOB04_TB-D
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
IdleAnimation  UIMOB04_SKL.UIMOB04_IDD1 0 6
IdleAnimation  UIMOB04_SKL.UIMOB04_IDD2 0 6
IdleAnimation  UIMOB04_SKL.UIMOB04_CHD  0 6
IdleAnimation  UIMOB04_SKL.UIMOB04_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_DD1
Animation  UIMOB04_SKL.UIMOB04_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB04_SKL.UIMOB04_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB04_SKL.UIMOB04_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB04_SKL.UIMOB04_B_ADTF1
Animation  UIMOB04_SKL.UIMOB04_D_ADTF1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF2
Animation  UIMOB04_SKL.UIMOB04_D_ADTF2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF3
Animation  UIMOB04_SKL.UIMOB04_D_ADTF3
AnimationMode  ONCE
TransitionKey  None
End

End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobRockProjectileWeapon
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY GLAAngryMobAK47Weapon ; for atttacking in AK-proof conditions
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  WeaponSetUpgrade UpgradeTag_01
TriggeredBy  Upgrade_GLAArmTheMob
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  5.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with throwing rock that upgrades to Molotov cocktails
Object GLAInfantryAngryMobMolotov04
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB04_SKN
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB1 0 12
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB2 0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_CHB  0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End

; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB04_SKL.UIMOB04_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  FIRING_A
Animation  UIMOB04_SKL.UIMOB04_ATB1_AF ; throw
Animation  UIMOB04_SKL.UIMOB04_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A


ConditionState  DYING
Animation  UIMOB04_SKL.UIMOB04_DB1
Animation  UIMOB04_SKL.UIMOB04_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB04_SKL.UIMOB04_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


; WHILE CARRYING MOLOTOV
;---------------------------------------------------------
ConditionState  USER_1
Model  UIMOB04_SKN
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB1 0 12
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB2 0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_CHB  0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End


; Drawing Molotov
ConditionState   USER_1 PREATTACK_A
Animation      UIMOB04_SKL.UIMOB04_ATCB_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  USER_1 PREATTACK_A FIRING_A
AliasConditionState  USER_1 PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing Molotov
ConditionState  USER_1 FIRING_A
Animation  UIMOB04_SKL.UIMOB04_ATCB_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.0 2.0
End
AliasConditionState  USER_1 BETWEEN_FIRING_SHOTS_A
AliasConditionState  USER_1 RELOADING_A

ConditionState  USER_1 MOVING
Animation  UIMOB04_SKL.UIMOB04_RUN
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  USER_1 DYING
Animation  UIMOB04_SKL.UIMOB04_DB1
Animation  UIMOB04_SKL.UIMOB04_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  USER_1 SPECIAL_CHEERING
Animation  UIMOB04_SKL.UIMOB04_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End

;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB04_SKL.UIMOB04_B_ADTF1
Animation  UIMOB04_SKL.UIMOB04_D_ADTF1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF2
Animation  UIMOB04_SKL.UIMOB04_D_ADTF2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF3
Animation  UIMOB04_SKL.UIMOB04_D_ADTF3
AnimationMode  ONCE
TransitionKey  None
End

End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobMolotovCocktailProjectileWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  ModelConditionUpgrade ModuleTag_Upgrade01
ConditionFlag  USER_1
TriggeredBy    Upgrade_GLAArmTheMob
End

Behavior  SubObjectsUpgrade ModuleTag_Upgrade02
TriggeredBy     Upgrade_GLAArmTheMob
HideSubObjects  ROCK_01
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;;Geometry  CYLINDER
;GeometryMajorRadius  5.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with pistol that upgrades to an AK
ObjectReskin GLAInfantryAngryMobPistol05 GLAInfantryAngryMobPistol01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes



; WHILE CARRYING PISTOL
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB05_SKN
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA1 0 12
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA2 0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_CHA  0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End

ConditionState  MOVING
Animation  UIMOB05_SKL.UIMOB05_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB05_SKL.UIMOB05_CHD
AnimationMode  ONCE
End

; Aiming Pistol
TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  ATTACKING FIRING_A
Animation  UIMOB05_SKL.UIMOB05_ATA1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB05_SKL.UIMOB05_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RELOADING_A
Animation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB05_SKL.UIMOB05_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

;--------------------------------------------------------
; TRANSITION FROM PISTOL TO AK47
TransitionState  TRANS_STAND TRANS_STAND_AK
Animation  UIMOB05_SKL.UIMOB05_TA-D
AnimationMode  ONCE
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
Model  UIMOB05_SKN
IdleAnimation  UIMOB05_SKL.UIMOB05_IDD1 0 6
IdleAnimation  UIMOB05_SKL.UIMOB05_IDD2 0 6
IdleAnimation  UIMOB05_SKL.UIMOB05_CHD  0 6
IdleAnimation  UIMOB05_SKL.UIMOB05_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_DD1
Animation  UIMOB05_SKL.UIMOB05_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB05_SKL.UIMOB05_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB05_SKL.UIMOB05_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  None
End


End



;Geometry  CYLINDER
;GeometryMajorRadius  3.0 ; very thin
;GeometryMinorRadius  3.0 ; very thinD
;GeometryHeight  12.0
;GeometryIsSmall  Yes

End

;Guy with pistol that upgrades to Molotov cocktails
ObjectReskin GLAInfantryAngryMobPistolToMolotov05 GLAInfantryAngryMobPistolToMolotov01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; While carrying pistol
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB05_SKN
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA1 0 12
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA2 0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_CHA  0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  UIMOB05_SKL.UIMOB05_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  RIDER1 DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider1
End

ConditionState  RIDER2 DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider2
End

ConditionState  RIDER1 SPECIAL_CHEERING
Animation  UIMOB05_SKL.UIMOB05_CHD
AnimationMode  ONCE
End
AliasConditionState  RIDER2 SPECIAL_CHEERING

; Aiming Pistol

ConditionState  RIDER1 PREATTACK_A
Animation      UIMOB05_SKL.UIMOB05_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  RIDER1 FIRING_A
Animation  UIMOB05_SKL.UIMOB05_ATA2_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB05_SKL.UIMOB05_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RIDER1 RELOADING_A
Animation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB05_SKL.UIMOB05_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

; Upgraded with Molotovs
;---------------------------------------------------------

ConditionState  RIDER2
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA1 0 12
IdleAnimation  UIMOB05_SKL.UIMOB05_CHA  0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End

ConditionState  MOVING RIDER2
Animation  UIMOB05_SKL.UIMOB05_RNA
Animation  UIMOB05_SKL.UIMOB05_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  MOVING_MOLOTOV
End

; Drawing Molotov
ConditionState   RIDER2 PREATTACK_A
Animation      UIMOB05_SKL.UIMOB05_ATCA_BF ; wind up
AnimationMode  ONCE
TransitionKey  TRANS_PREATTACK_MOLOTOV
End

; Throwing Molotov
ConditionState  RIDER2 FIRING_A
Animation  UIMOB05_SKL.UIMOB05_ATCA_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_MOLOTOV
AnimationSpeedFactorRange 2.0 2.0
End

; Reloading Molotov
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Animation  UIMOB05_SKL.UIMOB05_STA 0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_RELOADING_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End
AliasConditionState  RIDER2 RELOADING_A


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  Bogo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider1 TRANS_Flailing_Rider1
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider1
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  Logo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider2 TRANS_Flailing_Rider2
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider2
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  Zogo
End


End

;Geometry  CYLINDER
;GeometryMajorRadius  3.0 ; very thin
;;GeometryMinorRadius  3.0 ; very thinD
;GeometryHeight  12.0
;GeometryIsSmall  Yes

End
;------------------------------------------------------------------------------
;***THESE UNITS ARE NOT SELECTABLE ANYMORE! To kill them, you must target
;   the stinger site. If the weapon does particular types of damage, it'll
;   kill guys inside first, then the site.
Object GLAInfantryDushkaGunner
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUDushka_L
ButtonImage             SUDushka

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
MaxRecoilDistance     2
RecoilSettleSpeed     18

ConditionState  NONE
Model              UBDushka_G
Turret             Turret
TurretPitch        TurretEL
WeaponRecoilBone   PRIMARY Recoil
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY Muzzle
WeaponLaunchBone   PRIMARY Muzzle
WaitForStateToFinishIfPossible  TRANS_FIRING
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A
AliasConditionState  BETWEEN_FIRING_SHOTS_B
AliasConditionState  RELOADING_B

ConditionState  FIRING_A
Model              UBDushka_G
Animation          UBDushka_G.UBDushka_G
AnimationMode      ONCE
Turret             Turret
TurretPitch        TurretEL
WeaponRecoilBone   PRIMARY Recoil
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY Muzzle
WeaponLaunchBone   PRIMARY Muzzle
TransitionKey      TRANS_FIRING
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING RELOADING_A

ConditionState  FIRING_B
Model              UBDushka_G
Animation          UBDushka_G.UBDushka_G
AnimationMode      ONCE
Turret             Turret
TurretPitch        TurretEL
WeaponRecoilBone   SECONDARY Recoil
WeaponFireFXBone   SECONDARY Muzzle
WeaponMuzzleFlash  SECONDARY Muzzle
WeaponLaunchBone   SECONDARY Muzzle
TransitionKey      TRANS_FIRING
End
AliasConditionState  MOVING FIRING_B
AliasConditionState  MOVING RELOADING_B

End

; ***DESIGN parameters ***
DisplayName       OBJECT:DushkaNest
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions           None
Weapon               PRIMARY   DushkaMachineGun
AutoChooseSources    PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
Weapon               SECONDARY DushkaMachineGunAir
PreferredAgainst     SECONDARY BALLISTIC_MISSILE AIRCRAFT
End

WeaponSet
Conditions           PLAYER_UPGRADE
Weapon               PRIMARY   ArmorPeircingDushkaMachineGun
AutoChooseSources    PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
Weapon               SECONDARY DushkaMachineGunAir
PreferredAgainst     SECONDARY BALLISTIC_MISSILE AIRCRAFT
End

ArmorSet
Conditions       None
Armor            StingerSoldierArmor ;Extra protection due to being enclosed by the stinger site.
DamageFX         None
End

VisionRange  400.0
ShroudClearingRange  400

CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
SoundStealthOn  NoSound
SoundStealthOff  NoSound

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER CLICK_THROUGH SPAWNS_ARE_THE_WEAPONS ATTACK_NEEDS_LINE_OF_SIGHT NO_HEAL_ICON GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE UNATTACKABLE

Body  ActiveBody ModuleTag_02
MaxHealth        200.0
InitialHealth    200.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  PRIMARY SECONDARY TERTIARY
TurretTurnRate         180
TurretPitchRate        100
AllowsPitch            Yes
FiresWhileTurning      Yes
MinIdleScanInterval    5000     ; in milliseconds
MaxIdleScanInterval    10000    ; in milliseconds
MinIdleScanAngle       30       ; in degrees off the natural turret angle
MaxIdleScanAngle       180      ; in degrees off the natural turret angle
End
AutoAcquireEnemiesWhenIdle  Yes Stealthed ;ATTACK_BUILDINGS
MoodAttackCheckRate         30
End
Locomotor  SET_NORMAL BasicHumanLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  SlavedUpdate ModuleTag_06
End

;This module makes the AI ignore this object and not attack it
Behavior  StatusBitsUpgrade ModuleTag_IgnoreMe01
TriggeredBy    Upgrade_CostReduction
StatusToSet    NO_ATTACK_FROM_AI
End

Behavior  WeaponBonusUpgrade ModuleTag_ApBullets01
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  WeaponSetUpgrade ModuleTag_ApBullets02
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  StealthUpdate ModuleTag_09
StealthDelay                 2500 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
MoveThresholdSpeed           3
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal01
HealingAmount      2.5  ;in health points
HealingDelay       100  ; msec
StartHealingDelay  7000 ;in miliseconds
StartsActive       Yes
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
ExemptStatus         CAN_STEALTH
DeathTypes           ALL -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -DETONATED
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerNormalDeath
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death02
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +EXPLODED
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerExplodedDeath
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death03
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerFlamingInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death04
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerToxicInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death05
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerToxicInfantryBeta
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death06
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerTeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death07
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerMicroWavedDeathInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death16
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerViralInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +EXTRA_4
DestructionDelay     0
OCL                  INITIAL  OCL_BrutalBloodyDeathBits
FX                   INITIAL  FX_InfantryGoreExplosion
OCL                  MIDPOINT OCL_GLADushkaMachineGunnerNormalDeath
OCL                  FINAL    OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  50
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerBloodyGoreExplosion
FX                   FINAL   FX_DushkaInfantryGoreExplosion
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death232
ExemptStatus         CAN_STEALTH
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  50
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerExplodedDeath
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_033145726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ExemptStatus         CAN_STEALTH
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerRadiationDeath
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
ExemptStatus         CAN_STEALTH
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerNeutronRadiationDeath
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_GLADushkaMachineGunnerCryogenicFreezeDeath
OCL                  FINAL   OCL_GLADushkaMachineGunHulk
End

;;;Different Death Modules for after the  camo net upgrade
;;;These makes sure the empty gun stealths after the gunner is killed

;  Behavior  FireWeaponWhenDeadBehavior ModuleTag_RevealWhenNoGunner01
;    RequiredStatus  CAN_STEALTH
;    DeathTypes  ALL
;    DeathWeapon  GLADefenceRevealObjectSpawnWeapon
;    StartsActive  Yes
;  End

Behavior  SlowDeathBehavior ModuleTag_Death08
RequiredStatus       CAN_STEALTH
DeathTypes           ALL -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -DETONATED
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerNormalDeath
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death09
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +EXPLODED
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerExplodedDeath
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death10
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerFlamingInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death11
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerToxicInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death12
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerToxicInfantryBeta
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death13
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerTeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death14
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerMicroWavedDeathInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death15
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_GLADushkaMachineGunnerViralInfantry
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death0425 ;Brutal kill with lots of blood and no death scream
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +EXTRA_4
DestructionDelay     0
OCL                  INITIAL  OCL_BrutalBloodyDeathBits
FX                   INITIAL  FX_InfantryGoreExplosion
OCL                  MIDPOINT OCL_GLADushkaMachineGunnerNormalDeath
OCL                  FINAL    OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_0326 ;Gore death explosion
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  50
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerBloodyGoreExplosion
FX                   FINAL   FX_DushkaInfantryGoreExplosion
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_Death09462
RequiredStatus       CAN_STEALTH
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  50
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerExplodedDeath
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
RequiredStatus       CAN_STEALTH
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerRadiationDeath
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_03323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
RequiredStatus       CAN_STEALTH
DestructionDelay     0
OCL                  INITIAL OCL_GLADushkaMachineGunnerNeutronRadiationDeath
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End

Behavior  SlowDeathBehavior ModuleTag_03323141231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
RequiredStatus       CAN_STEALTH
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_GLADushkaMachineGunnerCryogenicFreezeDeath
OCL                  FINAL   OCL_GLADushkaMachineGunStealthedHulk
End
;Instant death and removal for when the structure is bieng sold
Behavior  SlowDeathBehavior ModuleTag_Removeme01
DeathTypes           NONE +DETONATED
DestructionDelay     0
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_14
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

;Geometry  CYLINDER
;GeometryMajorRadius  20.0
;GeometryMinorRadius  20.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_VOLUME
ShadowSizeX  45
BuildCompletion  APPEARS_AT_RALLY_POINT

End



;------------------------------------------------------------------------------
Object GLAInfantryDushkaGunnerDyingDummy

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
IgnoreConditionStates  PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

; ---- standing
DefaultConditionState
Model                UIDskGnnr
IdleAnimation        UIRGrd_SKL.UIRGrd_STN 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDA
IdleAnimation        UIRGrd_SKL.UIRGrd_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponMuzzleFlash    PRIMARY MuzzleFX
TransitionKey        TRANS_Standing
End

; ---- dying
ConditionState         DYING
Animation            UIRGrd_SKL.UIRGrd_DTA
Animation            UIRGrd_SKL.UIRGrd_DTB
AnimationMode        ONCE
TransitionKey        TRANS_Dying
End

End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_CAST_REFLECTIONS INFANTRY

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  AIUpdateInterface ModuleTag_03
End
Locomotor  SET_NORMAL BasicHumanLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RebelDie
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  LifetimeUpdate ModuleTag_Death012
MinLifetime  0
MaxLifetime  0
End

;;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryDushkaGunnerDyingBrutalDummy

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
IgnoreConditionStates  PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

; ---- standing
DefaultConditionState
Model                UIDskGnnr
IdleAnimation        UIRGrd_SKL.UIRGrd_STN 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDA
IdleAnimation        UIRGrd_SKL.UIRGrd_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponMuzzleFlash    PRIMARY MuzzleFX
TransitionKey        TRANS_Standing
End

; ---- dying
ConditionState         DYING
Animation            UIRGrd_SKL.UIRGrd_DTA
Animation            UIRGrd_SKL.UIRGrd_DTB
AnimationMode        ONCE
TransitionKey        TRANS_Dying
End

End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_CAST_REFLECTIONS INFANTRY

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  AIUpdateInterface ModuleTag_03
End
Locomotor  SET_NORMAL BasicHumanLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  LifetimeUpdate ModuleTag_Death012
MinLifetime  0
MaxLifetime  0
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryDushkaGunnerDyingDummy_Explosion

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
IgnoreConditionStates  PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

; ---- standing
DefaultConditionState
Model                UIDskGnnr
IdleAnimation        UIRGrd_SKL.UIRGrd_STN 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDA
IdleAnimation        UIRGrd_SKL.UIRGrd_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponMuzzleFlash    PRIMARY MuzzleFX
TransitionKey        TRANS_Standing
End

; ---- dying
ConditionState         DYING
Animation            UIRGrd_SKL.UIRGrd_DTA
Animation            UIRGrd_SKL.UIRGrd_DTB
AnimationMode        ONCE
TransitionKey        TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIRGrd_SKL.UIRGrd_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIRGrd_SKL.UIRGrd_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIRGrd_SKL.UIRGrd_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  SPECIAL_CHEERING
Animation  UIRGrd_SKL.UIRGrd_IDB
End

End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_CAST_REFLECTIONS INFANTRY

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  AIUpdateInterface ModuleTag_03
End
Locomotor  SET_NORMAL BasicHumanLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           ALL
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RebelDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  LifetimeUpdate ModuleTag_Death012
MinLifetime  0
MaxLifetime  0
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object DeadDushkaMachineGunHulk

; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
ConditionState  NONE
Model  UBDushka_G
HideSubObject  Gunner Muzzle01
End
End

; ***DESIGN parameters ***
EditorSorting    DEBRIS

ArmorSet
Conditions       None
Armor            JarmenKellStingerMissileArmor
DamageFX         None
End

; *** AUDIO Parameters ***
SoundStealthOn  NoSound
SoundStealthOff  NoSound

; *** ENGINEERING Parameters ***
KindOf   NO_COLLIDE

Body  ActiveBody ModuleTag_Body01
MaxHealth        10.0
InitialHealth    10.0
End

Behavior  DestroyDie ModuleTag_Die01
DeathTypes           ALL -DETONATED
End

;Instant death and removal for when the structure is bieng sold
Behavior  SlowDeathBehavior ModuleTag_Removeme01
DeathTypes           NONE +DETONATED
DestructionDelay     0
End

Behavior  DeletionUpdate ModuleTag_Remove01
MinLifetime  20000
MaxLifetime  20000
End

End

;------------------------------------------------------------------------------
Object DeadDushkaMachineGunStealthedHulk

; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
ConditionState  NONE
Model  UBDushka_G
HideSubObject  Gunner Muzzle01
End
End

; ***DESIGN parameters ***
EditorSorting    DEBRIS

ArmorSet
Conditions       None
Armor            JarmenKellStingerMissileArmor
DamageFX         None
End

; *** AUDIO Parameters ***
SoundStealthOn  NoSound
SoundStealthOff  NoSound

; *** ENGINEERING Parameters ***
KindOf   NO_COLLIDE

Body  ActiveBody ModuleTag_Body01
MaxHealth        10.0
InitialHealth    10.0
End

Behavior  DeletionUpdate ModuleTag_Remove01
MinLifetime  20000
MaxLifetime  20000
End

Behavior  DestroyDie ModuleTag_Die01
DeathTypes           ALL -DETONATED
End

;Instant death and removal for when the structure is bieng sold
Behavior  SlowDeathBehavior ModuleTag_Removeme01
DeathTypes           NONE +DETONATED
DestructionDelay     0
End

Behavior  StealthUpdate ModuleTag_09
StealthDelay                 2500 ; msec
StealthForbiddenConditions   TAKING_DAMAGE
MoveThresholdSpeed           3
InnateStealth                Yes
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

End

;------------------------------------------------------------------------------
Object DeadDushkaMachineGunRemovalObject

; ***DESIGN parameters ***
EditorSorting    SYSTEM

Behavior  LifetimeUpdate ModuleTag_04
MinLifetime  0
MaxLifetime  0
End

Behavior  SlowDeathBehavior ModuleTag_05
DestructionDelay   100
Weapon  FINAL DushkaMachineGunRemovalObjectWeapon
End

End
;------------------------------------------------------------------------------
Object GLAInfantryFanatic
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUFanatic_L
ButtonImage             SUFanatic

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

IgnoreConditionStates  PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

; ---- standing
DefaultConditionState
Model                UIFntc_SKN
IdleAnimation        UIRGrd_SKL.UIRGrd_STN 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDA
IdleAnimation        UIRGrd_SKL.UIRGrd_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponMuzzleFlash    PRIMARY MuzzleFX
TransitionKey        TRANS_Standing
End

ConditionState         REALLYDAMAGED
IdleAnimation        UIRGrd_SKL.UIRGrd_STB 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDC
IdleAnimation        UIRGrd_SKL.UIRGrd_IDD
AnimationMode        ONCE
TransitionKey        TRANS_StandingHurt
End

; ---- moving
ConditionState         MOVING
Animation            UIRGrd_SKL.UIRGrd_RNA 15
AnimationMode        LOOP
TransitionKey        TRANS_Walking
ParticleSysBone      None InfantryDustTrails
Flags                RANDOMSTART
End
AliasConditionState    MOVING ATTACKING

ConditionState         MOVING REALLYDAMAGED
Animation            UIRGrd_SKL.UIRGrd_RNB 25
AnimationMode        LOOP
TransitionKey        TRANS_WalkingHurt
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    MOVING ATTACKING REALLYDAMAGED

; ---- dying
ConditionState         DYING
Animation            UIRGrd_SKL.UIRGrd_DTA
Animation            UIRGrd_SKL.UIRGrd_DTB
AnimationMode        ONCE
TransitionKey        TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIRGrd_SKL.UIRGrd_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIRGrd_SKL.UIRGrd_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIRGrd_SKL.UIRGrd_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  SPECIAL_CHEERING
Animation  UIRGrd_SKL.UIRGrd_IDB
End

; ---- firing
ConditionState  USING_WEAPON_A
Animation  UIRGrd_SKL.UIRGrd_ATA
AnimationMode  LOOP
TransitionKey  TRANS_Firing
End

ConditionState  USING_WEAPON_A REALLYDAMAGED
Animation  UIRGrd_SKL.UIRGrd_ATA2
AnimationMode  LOOP
TransitionKey  TRANS_FiringHurt
End

TransitionState  TRANS_Standing TRANS_Firing
Animation  UIRGrd_SKL.UIRGrd_ATAST
AnimationMode  ONCE
End

TransitionState  TRANS_Firing TRANS_Standing
Animation  UIRGrd_SKL.UIRGrd_ATAED
AnimationMode  ONCE
End

TransitionState  TRANS_StandingHurt TRANS_FiringHurt
Animation  UIRGrd_SKL.UIRGrd_ATA2ED
AnimationMode  ONCE_BACKWARDS
End

TransitionState  TRANS_FiringHurt TRANS_StandingHurt
Animation  UIRGrd_SKL.UIRGrd_ATA2ED
AnimationMode  ONCE
End

TransitionState  TRANS_Standing TRANS_StandingHurt
Animation  UIRGrd_SKL.UIRGrd_ATA2ED
AnimationMode  ONCE
End

; ---- Throwing bottle
ConditionState  PREATTACK_C
Model          UIFntc_B_SKN
Animation      UIMOB01_SKL.UIMOB01_ATCA_BF
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  PREATTACK_C FIRING_C
AliasConditionState  PREATTACK_C RELOADING_C
AliasConditionState  PREATTACK_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  PREATTACK_C FIRING_C REALLYDAMAGED
AliasConditionState  PREATTACK_C RELOADING_C REALLYDAMAGED
AliasConditionState  PREATTACK_C BETWEEN_FIRING_SHOTS_C REALLYDAMAGED

ConditionState  FIRING_C
Model          UIFntc_B_SKN
Animation      UIMOB01_SKL.UIMOB01_ATCA_AF
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_THROW
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  FIRING_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  REALLYDAMAGED FIRING_C
AliasConditionState  REALLYDAMAGED FIRING_C BETWEEN_FIRING_SHOTS_C

ConditionState RELOADING_C
Model      UIFntc_B_SKN
Animation  UIMOB01_SKL.UIMOB01_IDA1
WaitForStateToFinishIfPossible  TRANS_THROW
End
AliasConditionState  RELOADING_C FIRING_C
AliasConditionState  RELOADING_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  RELOADING_C REALLYDAMAGED
AliasConditionState  RELOADING_C REALLYDAMAGED FIRING_C
AliasConditionState  RELOADING_C REALLYDAMAGED BETWEEN_FIRING_SHOTS_C

; ------- Parachuting Animations

ConditionState     FREEFALL
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_POP
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
TransitionKey    TRANS_Falling
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState     PARACHUTING
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_PHG
AnimationMode    ONCE
Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME START_FRAME_LAST ; our bone positions should come from the last frame, rather than the first
TransitionKey    TRANS_Chute
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState    TRANS_Falling TRANS_Chute
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_POP
AnimationMode    ONCE
Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState    TRANS_Chute TRANS_Stand
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_PTD
AnimationMode    ONCE
End

; ------- Bldg-capture

ConditionState  UNPACKING
Model              UIFntc_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP1
AnimationMode      ONCE
End
AliasConditionState  UNPACKING REALLYDAMAGED

ConditionState  RAISING_FLAG
Model              UIFntc_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP2
AnimationMode      ONCE
TransitionKey      TRANS_Raising
End
AliasConditionState  RAISING_FLAG REALLYDAMAGED

ConditionState  PACKING
Model              UIFntc_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP1
AnimationMode      ONCE_BACKWARDS
Flags              START_FRAME_LAST
TransitionKey      TRANS_Packing
End
AliasConditionState  PACKING REALLYDAMAGED

TransitionState  TRANS_Raising TRANS_Packing
Model              UIFntc_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP2
AnimationMode      ONCE_BACKWARDS
Flags              START_FRAME_LAST
End

End

; ***DESIGN parameters ***
DisplayName          OBJECT:Fanatic
Side                 GLA
EditorSorting        INFANTRY
TransportSlotCount   1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon             PRIMARY  GLAFanaticMachineGun
Weapon             TERTIARY GLARebelMolotovCocktailWeapon
AutoChooseSources  TERTIARY NONE
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon             PRIMARY  GLAFanaticMachineGunUpgraded
Weapon             TERTIARY GLARebelMolotovCocktailWeapon
AutoChooseSources  TERTIARY NONE
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange          220
ShroudClearingRange  220

Prerequisites
Object  GLABarracks
End

BuildCost  65
BuildTime  5.0          ;in seconds

ExperienceValue      15 15 30 40     ;Experience point value at each level
ExperienceRequired   0 40 60 120     ;Experience points needed to gain each level
IsTrainable          Yes             ;Can gain experience
CrushableLevel       0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet           GLAInfantryRebelCommandSet

; *** AUDIO Parameters ***
VoiceSelect  RebelVoiceSelect
VoiceMove  RebelVoiceMove
VoiceGuard  RebelVoiceMove
VoiceAttack  RebelVoiceAttack
SoundStealthOn  StealthOn
SoundStealthOff  StealthOff
VoiceFear  RebelVoiceFear
VoiceTaskComplete  RebelVoiceCaptureComplete
UnitSpecificSounds
VoiceCreate  RebelVoiceCreate
VoiceSubdue  RebelVoiceSubdue
VoiceGarrison  RebelVoiceGarrison
VoiceEnter  RebelVoiceMove
VoiceEnterHostile  RebelVoiceMove
VoiceGetHealed       RebelVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL RebelLocomotor

Behavior  CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit.
End

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
MoveThresholdSpeed           3
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End

Behavior  WeaponSetUpgrade ModuleTag_09
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  CommandSetUpgrade ModuleTag_SuicidePack02
CommandSet   GLAInfantryRebelUpgradedCommandSet
TriggeredBy  Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  SquishCollide ModuleTag_11
;nothing
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RebelDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_GLAExplodedDeathFanatic
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathFanatic
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_RebelSurrender
OCL                  INITIAL OCL_FanaticSurrendering
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  SpecialAbility ModuleTag_17
SpecialPowerTemplate       SpecialAbilityRebelCaptureBuilding
UpdateModuleStartsAttack   Yes
StartsPaused               No
InitiateSound          RebelVoiceCapture
End
Behavior  SpecialAbilityUpdate ModuleTag_18
SpecialPowerTemplate   SpecialAbilityRebelCaptureBuilding
StartAbilityRange   5.0
UnpackTime             3000  ; (changing this will scale anim speed)
PreparationTime        20000 ; time to complete hack once prepared (changing this will scale anim speed)
PackTime               2000  ; (changing this will scale anim speed)
DoCaptureFX            Yes
AwardXPForTriggering   12
End

Behavior  SpecialAbility ModuleTag_20
SpecialPowerTemplate  SpecialAbilityBoobyTrap
UpdateModuleStartsAttack  Yes
StartsPaused               Yes
InitiateSound  RebelVoiceBoobyTrapInstall
End
Behavior  SpecialAbilityUpdate ModuleTag_21
SpecialPowerTemplate  SpecialAbilityBoobyTrap
StartAbilityRange  5.0
PreparationTime  0
SpecialObject  BoobyTrap
MaxSpecialObjects  100
SpecialObjectsPersistWhenOwnerDies  Yes
SpecialObjectsPersistent  Yes          ;Charges are persistent till lifetime expires or owner detonates them.
End

Behavior  UnpauseSpecialPowerUpgrade ModuleTag_22
SpecialPowerTemplate  SpecialAbilityBoobyTrap
TriggeredBy  Upgrade_GLAInfantryRebelBoobyTrapAttack
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryFanaticSurrenderCrate
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; --- Idle
DefaultConditionState
Model              UIFntc_SKN
Animation          UIRGrd_SKL.UIRGrd_SUR
AnimationMode      ONCE
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
Animation          UIRGrd_SKL.UIRGrd_SST
AnimationMode      LOOP
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End

; --- dying anims
ConditionState       RUBBLE
Animation          UIRGrd_SKL.UIRGrd_DTA
Animation          UIRGrd_SKL.UIRGrd_DTB
AnimationMode      ONCE
TransitionKey      None
AnimationSpeedFactorRange  1.5 2.0
End

End

Draw  W3DModelDraw ModuleTag_SurrenderFlag01
DefaultConditionState
Model              EXSurndr
Animation          EXSurndr.EXSurndr
AnimationMode      ONCE
HideSubObject      FLAG
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
ShowSubObject      FLAG
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End
ConditionState       RUBBLE
Animation          NONE
End
End

; ***DESIGN parameters ***
Side             GLA
EditorSorting    SYSTEM

WeaponSet
Conditions           None
Weapon               SECONDARY SuicideUnresistableWeapon
End

ArmorSet
Conditions       None
Armor            POWArmor
DamageFX         InfantryDamageFX
End

ExperienceValue      0 0 0 0
ExperienceRequired   0 0 0 0
IsTrainable      Yes
CrushableLevel   0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** ENGINEERING Parameters ***
KindOf  INFANTRY UNATTACKABLE CAN_ATTACK

Body  ActiveBody ModuleTag_03
MaxHealth        100.0
InitialHealth    10.0
End

Behavior  AIUpdateInterface ModuleTag_03232
End

Behavior  OCLUpdate ModuleTag_ReviveTrigger01
MinDelay      30000
MaxDelay      33000
OCL           OCL_CreateRealFortress
End

Behavior  UnitCrateCollide ModuleTag_02
UnitCount  1
UnitName  AmericanCIAInteligenceObject
RequiredKindOf  CAN_RAPPEL  ;Rangers only
HumanOnly  No
BuildingPickup  No
PickupScience  SCIENCE_CapturePrisoners ;Requires the rangers to have this upgrade
ForbidOwnerPlayer  Yes
ExecuteFX  FX_PrisonerCratePickup
ExecuteAnimation  PrisonerCaptured
ExecuteAnimationTime    4.0    ; In seconds
ExecuteAnimationZRise   15.0   ; Z world units per second to rise
ExecuteAnimationFades   Yes    ; Animation does/doesn't fade out
End

Behavior  TransportContain ModuleTag_Loaded01
Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
AllowInsideKindOf      NO_COLLIDE
End

Behavior  SquishCollide ModuleTag_Crush01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Revive01
DeathTypes           NONE +SUICIDED
DestructionDelay     0
End
Behavior  CreateObjectDie ModuleTag_Revive02
DeathTypes  NONE +SUICIDED
CreationList  OCL_SurrenderedFanaticRevive
TransferPreviousHealth  Yes
End

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -SUICIDED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RebelDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_GLAExplodedDeathFanatic
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathFanatic
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End

; --- end Death modules ---

;Geometry  BOX
;GeometryMajorRadius  5.0
;GeometryMinorRadius  5.0
;GeometryHeight  7.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  18;
ShadowSizeY  18;
ShadowTexture  EXPowDcl;

End
;------------------------------------------------------------------------------
Object GLAInfantryHijacker
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUHijacker_L
ButtonImage             SUHijacker

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
ExtraPublicBone  UIHJCK

DefaultConditionState
Model  UIHJCK_SKN
IdleAnimation  UIHJCK_SKL.UIHJCK_STA 0 25
IdleAnimation  UIHJCK_SKL.UIHJCK_IDA
IdleAnimation  UIHJCK_SKL.UIHJCK_IDB
AnimationMode  ONCE
TransitionKey  TRANS_Stand
End
AliasConditionState  REALLYDAMAGED

ConditionState  MOVING
Animation  UIHJCK_SKL.UIHJCK_RUN 20
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  None
ParticleSysBone    None InfantryDustTrails
End
AliasConditionState  REALLYDAMAGED MOVING


ConditionState  DYING
Animation  UIHJCK_SKL.UIHJCK_DTA
Animation  UIHJCK_SKL.UIHJCK_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIHJCK_SKL.UIHJCK_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIHJCK_SKL.UIHJCK_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIHJCK_SKL.UIHJCK_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  SPECIAL_CHEERING
Animation  UIHJCK_SKL.UIHJCK_CHA
AnimationMode  LOOP
End


ConditionState  PARACHUTING
Animation  UIHJCK_SKL.UIHJCK_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING
TransitionState  TRANS_Falling TRANS_Chute
Animation  UIHJCK_SKL.UIHJCK_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End
TransitionState  TRANS_Chute TRANS_Stand
Animation  UIHJCK_SKL.UIHJCK_PTD
AnimationMode  ONCE
End


End

Draw  W3DModelDraw ModuleTag_FirepointAttachment01
DefaultConditionState
Model  EXFirepoint
End
End

; ***DESIGN parameters ***
DisplayName       OBJECT:Hijacker
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions           None
Weapon               SECONDARY HijackVehicle
Weapon               TERTIARY  HijackerGuardRangeWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  100
ShroudClearingRange  220


BuildCost  400
BuildTime  10.0          ;in seconds


ExperienceValue     40 40 60  80    ;Experience point value at each level
ExperienceRequired  0  50 100 200   ;Experience points needed to gain each level
IsTrainable  Yes                   ;Can gain experience
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet     GLAInfantryHijackerCommandSet

; *** AUDIO Parameters ***
VoiceSelect  HijackerVoiceSelect
VoiceMove    HijackerVoiceMove
VoiceGuard   HijackerVoiceMove
VoiceAttack  HijackerVoiceAttack
VoiceFear    HijackerVoiceFear

UnitSpecificSounds
VoiceGarrison      HijackerVoiceGarrison
VoiceCreate        HijackerVoiceCreate
VoiceEnter         HijackerVoiceEnter
VoiceEnterHostile  HijackerVoiceEnterHostile
VoiceGetHealed     HijackerVoiceMove
End


; *** ENGINEERING Parameters ***
RadarPriority  UNIT
EnterGuard  Yes
HijackGuard  Yes
KindOf  PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE CAN_ATTACK
;STEALTH_GARRISON Added per Dustin, 12/14--ML

Body  ActiveBody ModuleTag_03
MaxHealth        130.0
InitialHealth    130.0
End

Behavior  AIUpdateInterface ModuleTag_05
Turret
TurretTurnRate  0
ControlledWeaponSlots  SECONDARY TERTIARY
End
AutoAcquireEnemiesWhenIdle  No
End

Behavior  CommandButtonHuntUpdate  ModuleTag_CBH01 ; allows use of command button hunt script with this unit.
End
Locomotor  SET_NORMAL HijackerLocomotor
Locomotor  SET_NORMAL_UPGRADED HijackerUpgradedLocomotor

Behavior  PhysicsBehavior ModuleTag_06
Mass  5.0
End

Behavior  LocomotorSetUpgrade ModuleTag_Fanatical01
TriggeredBy    Upgrade_GLAArmTheMob
End

Behavior  ConvertToHijackedVehicleCrateCollide       ModuleTag_08
RequiredKindOf   VEHICLE                 ; This is my car now, infidel!
ForbiddenKindOf  IMMUNE_TO_CAPTURE DRONE ; No more dozers or drones for you!
End

Behavior  HijackerUpdate ModuleTag_04
ParachuteName  GLAParachute
End

Behavior  StealthUpdate ModuleTag_07
StealthDelay                 2000
InnateStealth                No
;HintDetectableConditions     DETECTED
ForbiddenStatus              DETECTED
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_10
TriggeredBy  Upgrade_GLACamouflage
End

Behavior  OverlordContain ModuleTag_OverlordContain01
Slots                    1
DamagePercentToUnits     100%
AllowInsideKindOf        PORTABLE_STRUCTURE
PassengersAllowedToFire  Yes
PayloadTemplateName      GLAInfantryHijackerRevealDummy
End

Behavior  FireWeaponWhenDamagedBehavior ModuleTag_Decal01
StartsActive   No
TriggeredBy    Upgrade_GLACamouflage
DamageTypes    ALL
;Effectively all the time when set to zero which we want in this case
DamageAmount   0
ContinuousWeaponPristine       HijackerRevealRangeDecalWeapon
ContinuousWeaponDamaged        HijackerRevealRangeDecalWeapon
ContinuousWeaponReallyDamaged  HijackerRevealRangeDecalWeapon
;No rubble weapon as this decal should disapear when dead
;ContinuousWeaponRubble
End

Behavior  SquishCollide ModuleTag_09
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_HijackerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_HijackerDie
OCL                  INITIAL OCL_GLAExplodedDeathHijacker
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_HijackerDie
OCL                  FINAL OCL_GLAExplodedDeathHijacker
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_HijackerSurrender
OCL                  INITIAL OCL_HijackerSurrendering
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_14
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI_2;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryHijackerRevealDummy

; *** ART Parameters ***

Draw                     W3DDependencyModelDraw ModuleTag_01

AttachToBoneInContainer  FIREPOINT01

DefaultConditionState
Model                None
End

End

PlacementViewAngle  -45

; ***DESIGN parameters ***
Side              GLA
EditorSorting     SYSTEM
TransportSlotCount  1
VisionRange      100
ShroudClearingRange  0

WeaponSet
Conditions  None
Weapon  PRIMARY HijackerRevealDummyWeapon
End

ArmorSet
Conditions      None
Armor           InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
End

; *** AUDIO Parameters ***
SoundStealthOn   NoSound
SoundStealthOff  NoSound

; *** ENGINEERING Parameters ***
KindOf             PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
Body             StructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  PRIMARY SECONDARY
TurretTurnRate       3600
End
AutoAcquireEnemiesWhenIdle  Yes Stealthed
MoodAttackCheckRate  1
End

Behavior              DestroyDie ModuleTag_05
End

End

;------------------------------------------------------------------------------
Object GLAInfantryHijackerRevealDecal

Draw  W3DModelDraw ModuleTag_01
DefaultConditionState
Model                ExJammerRadius
End
End

EditorSorting  SYSTEM

ArmorSet
Conditions       None
Armor            InvulnerableArmorAll
DamageFX         None
End


; *** ENGINEERING Parameters ***
KindOf  PRELOAD CAN_CAST_REFLECTIONS CLICK_THROUGH NO_COLLIDE FS_FAKE

Body  ActiveBody ModuleTag_02
MaxHealth        10.0
InitialHealth    10.0
End

Behavior  DeletionUpdate ModuleTag_03
MinLifetime  33
MaxLifetime  33
End

;Geometry             BOX
;GeometryMajorRadius  5.0
;GeometryMinorRadius  5.0
;GeometryHeight       5.0
;GeometryIsSmall      No
Scale                50.0
ShadowTexture  SCCDetectionRadius
ShadowSizeX  195
ShadowSizeY  195

End

;------------------------------------------------------------------------------
Object GLAInfantryHijackerSurrenderCrate
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; --- Idle
DefaultConditionState
Model              UIHJCK_SKN
Animation          UIHJCK_SKL.UIHJCK_SUR
AnimationMode      ONCE
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
Animation          UIHJCK_SKL.UIHJCK_SST
AnimationMode      LOOP
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End

; --- dying anims
ConditionState       RUBBLE
Animation          UIHJCK_SKL.UIHJCK_DTA
Animation          UIHJCK_SKL.UIHJCK_DTB
AnimationMode      ONCE
TransitionKey      None
AnimationSpeedFactorRange  1.5 2.0
End

End

Draw  W3DModelDraw ModuleTag_SurrenderFlag01
DefaultConditionState
Model              EXSurndr_B
Animation          EXSurndr_B.EXSurndr_B
AnimationMode      ONCE
HideSubObject      FLAG
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
ShowSubObject      FLAG
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End
ConditionState       RUBBLE
Animation          NONE
End
End

; ***DESIGN parameters ***
Side             GLA
EditorSorting    SYSTEM

WeaponSet
Conditions           None
Weapon               SECONDARY SuicideUnresistableWeapon
End

ArmorSet
Conditions       None
Armor            POWArmor
DamageFX         InfantryDamageFX
End

ExperienceValue      0 0 0 0
ExperienceRequired   0 0 0 0
IsTrainable      Yes
CrushableLevel   0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** ENGINEERING Parameters ***
KindOf  INFANTRY UNATTACKABLE CAN_ATTACK

Body  ActiveBody ModuleTag_03
MaxHealth        100.0
InitialHealth    10.0
End

Behavior  AIUpdateInterface ModuleTag_03232
End

Behavior  OCLUpdate ModuleTag_ReviveTrigger01
MinDelay      30000
MaxDelay      33000
OCL           OCL_CreateRealFortress
End

Behavior  UnitCrateCollide ModuleTag_02
UnitCount  1
UnitName  AmericanCIAInteligenceObject
RequiredKindOf  CAN_RAPPEL  ;Rangers only
HumanOnly  No
BuildingPickup  No
PickupScience  SCIENCE_CapturePrisoners ;Requires the rangers to have this upgrade
ForbidOwnerPlayer  Yes
ExecuteFX  FX_PrisonerCratePickup
ExecuteAnimation  PrisonerCaptured
ExecuteAnimationTime    4.0    ; In seconds
ExecuteAnimationZRise   15.0   ; Z world units per second to rise
ExecuteAnimationFades   Yes    ; Animation does/doesn't fade out
End

Behavior  TransportContain ModuleTag_Loaded01
Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
AllowInsideKindOf      NO_COLLIDE
End

Behavior  SquishCollide ModuleTag_Crush01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Revive01
DeathTypes           NONE +SUICIDED
DestructionDelay     0
End
Behavior  CreateObjectDie ModuleTag_Revive02
DeathTypes  NONE +SUICIDED
CreationList  OCL_SurrenderedHijackerRevive
TransferPreviousHealth  Yes
End

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -SUICIDED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_HijackerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_HijackerDie
OCL                  INITIAL OCL_GLAExplodedDeathHijacker
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_HijackerDie
OCL                  FINAL OCL_GLAExplodedDeathHijacker
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

;Geometry  BOX
;GeometryMajorRadius  5.0
;GeometryMinorRadius  5.0
;GeometryHeight  7.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  18;
ShadowSizeY  18;
ShadowTexture  EXPowDcl;

End
;------------------------------------------------------------------------------
Object GLAInfantryInformant
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUInformant_L
ButtonImage             SUInformant

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model  UIINFRM_SKN
IdleAnimation  CIUMC01_SKL.CIUMC01_STN 0 30
IdleAnimation  CIUMC01_SKL.CIUMC01_IDA
AnimationMode  ONCE
Flags  MAINTAIN_FRAME_ACROSS_STATES
End

End

; set cost and time fields here or else they won't work
BuildCost  200
BuildTime  5.0

Side  GLA
EditorSorting  INFANTRY
BuildVariations  GLAInfantryInformant_Var1 GLAInfantryInformant_Var2 GLAInfantryInformant_Var3

KindOf  PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End


;------------------------------------------------------------------------------
Object GLAInfantryInformant_Var1
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUInformant_L
ButtonImage             SUInformant

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model  UIINFRM_SKN
IdleAnimation  CIUMC01_SKL.CIUMC01_STN 0 30
IdleAnimation  CIUMC01_SKL.CIUMC01_IDA
AnimationMode  ONCE
Flags  MAINTAIN_FRAME_ACROSS_STATES
End
AliasConditionState  ATTACKING

ConditionState  MOVING
Animation  CIUMC01_SKL.CIUMC01_WKA 50
AnimationMode  LOOP
Flags  RANDOMSTART
Flags  MAINTAIN_FRAME_ACROSS_STATES3
End
AliasConditionState  ATTACKING MOVING

ConditionState  DYING
Animation  CIUMC01_SKL.CIUMC01_DTA
AnimationMode  ONCE
Flags  MAINTAIN_FRAME_ACROSS_STATES2
End
AliasConditionState  DYING EXPLODED_FLAILING
AliasConditionState  DYING EXPLODED_BOUNCING

End

Draw  W3DModelDraw ModuleTag_FirepointAttachment01
DefaultConditionState
Model  EXFirepoint
End
End

; ***DESIGN parameters ***
DisplayName          OBJECT:Informant
Side                 GLA
EditorSorting        SYSTEM
TransportSlotCount   0

WeaponSet
Conditions  None
Weapon             PRIMARY InformantFollowEnemyUnitDummyCommand
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  300
ShroudClearingRange  300

BuildCost  200
BuildTime  5.0

ExperienceValue      5 5 5 5        ;Experience point value at each level
IsTrainable          No             ;Can gain experience
CrushableLevel       1              ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet           GLAInfantryInformantCommandSet

; *** AUDIO Parameters ***
VoiceSelect     InformantVoiceSelect
VoiceAttack     InformantVoiceFollowEnemy
VoiceMove       InformantVoiceMove
VoiceGuard      InformantVoiceMove
VoiceFear       InformantVoiceFear

UnitSpecificSounds
VoiceGarrison      InformantVoiceMove
VoiceEnter         InformantVoiceMove
VoiceEnterHostile  InformantVoiceMove
VoiceGetHealed     InformantVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY NO_GARRISON SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        50.0
InitialHealth    50.0
End

Behavior  AIUpdateInterface ModuleTag_03
End

Locomotor  SET_NORMAL InformantHumanLocomotor


Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_06
;  End

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_InformantDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_InformantDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_InformantDieFlame
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_InformantDieToxin
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_InformantDieToxin
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_InformantDieTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_InformantDieFlame
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_InformantDieToxin
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_InformantDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_InformantDieToxin
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_InformantDieToxin
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End

Behavior  PoisonedBehavior ModuleTag_09
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay  600
;StealthForbiddenConditions  TAKING_DAMAGE
FriendlyOpacityMin  100.0%
OrderIdleEnemiesToAttackMeUponReveal  Yes
HintDetectableConditions  DETECTED
ForbiddenStatus  DETECTED
End

Behavior            OCLSpecialPower ModuleTag_Report01
SpecialPowerTemplate  SpecialAbilityInformantReport
OCL                   OCL_InformantReportObject
CreateLocation        USE_OWNER_OBJECT
End

Behavior  OverlordContain ModuleTag_RevealSelfTrigger01
Slots                    1
DamagePercentToUnits     100%
AllowInsideKindOf        PORTABLE_STRUCTURE
PassengersAllowedToFire  Yes
;PayloadTemplateName      GLAInfantryInformantRevealDummy
End

;I will only reveal myself to enemies 10 seconds after I appear
Behavior  FireWeaponUpdate ModuleTag_RevealSelfTrigger02
Weapon  GLAInformanRevealObjectSpawnWeapon
InitialDelay  10000
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI_2;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryInformantRevealDummy

; *** ART Parameters ***

Draw                     W3DDependencyModelDraw ModuleTag_01

AttachToBoneInContainer  FIREPOINT01

DefaultConditionState
Model                EXBlackout
End

End

PlacementViewAngle  -45

; ***DESIGN parameters ***
Side              GLA
EditorSorting     SYSTEM
TransportSlotCount  1
VisionRange      100

WeaponSet
Conditions  None
Weapon  SECONDARY InformantRevealToInfantryDummyWeapon
Weapon  TERTIARY  InformantRevealToVehiclesDummyWeapon
End

ArmorSet
Conditions      None
Armor           InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
End

; *** ENGINEERING Parameters ***
KindOf             PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI FS_FAKE
Body             StructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  SECONDARY TERTIARY
TurretTurnRate       3600
End
AutoAcquireEnemiesWhenIdle  Yes Stealthed
MoodAttackCheckRate  1
End

Behavior              DestroyDie ModuleTag_05
End

;Geometry             BOX
;GeometryMajorRadius  1.0
;GeometryMinorRadius  1.0
;GeometryHeight       1.0
;GeometryIsSmall      Yes
Scale                10.0
ShadowTexture  SCCDetectionRadius
ShadowSizeX  168
ShadowSizeY  168

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryInformant_Var2 GLAInfantryInformant_Var1

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model  UIINFR2_SKN
IdleAnimation  CISTV01_SKL.CISTV01_STN 0 30
IdleAnimation  CISTV01_SKL.CISTV01_IDA
AnimationMode  ONCE
Flags  MAINTAIN_FRAME_ACROSS_STATES
End
AliasConditionState  ATTACKING

ConditionState  MOVING
Animation  CISTV01_SKL.CISTV01_WKA 30
AnimationMode  LOOP
Flags  RANDOMSTART
Flags  MAINTAIN_FRAME_ACROSS_STATES3
End
AliasConditionState  ATTACKING MOVING

ConditionState  DYING
Animation  CISTV01_SKL.CISTV01_DTA
AnimationMode  ONCE
Flags  MAINTAIN_FRAME_ACROSS_STATES2
End
AliasConditionState  DYING EXPLODED_FLAILING
AliasConditionState  DYING EXPLODED_BOUNCING

End

Draw  W3DModelDraw ModuleTag_FirepointAttachment01
DefaultConditionState
Model  EXFirepoint
End
End

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryInformant_Var3 GLAInfantryInformant_Var1

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model  UIINFRM3_SKN
IdleAnimation  cisciv02_SKL.cisciv02_STA 0 30
IdleAnimation  cisciv02_SKL.cisciv02_IDB
AnimationMode  ONCE
End
AliasConditionState  ATTACKING

ConditionState  MOVING
Animation  cisciv02_SKL.cisciv02_WKA 42
AnimationMode  LOOP
Flags  RANDOMSTART
End
AliasConditionState  ATTACKING MOVING

ConditionState  DYING
Animation  cisciv02_SKL.cisciv02_DTA
Animation  cisciv02_SKL.cisciv02_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  cisciv02_SKL.cisciv02_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  cisciv02_SKL.cisciv02_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  cisciv02_SKL.cisciv02_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

End

Draw  W3DModelDraw ModuleTag_FirepointAttachment01
DefaultConditionState
Model  EXFirepoint
End
End

End
;------------------------------------------------------------------------------
Object InsurrectionSignalFlare
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
ConditionState  NONE
Model  NVMBuggy_m
ParticleSysBone  NONE BurtonFlareGrenadeSmoke
End
End

; ***DESIGN parameters ***
EditorSorting    SYSTEM

ArmorSet
Conditions       None
Armor            InvulnerableArmorAll
DamageFX         TankDamageFX
End

VisionRange  30.0
ShroudClearingRange  30.0

; *** ENGINEERING Parameters ***
KindOf  IMMOBILE INERT NO_COLLIDE UNATTACKABLE

Body  ActiveBody ModuleTag_02
MaxHealth        20.0
InitialHealth    20.0
End

Behavior        OCLUpdate ModuleTag_0211; Just Shows a Decal
OCL           Insurrection_AngryMob
MinDelay      3000
MaxDelay      3000
End

Behavior  DeletionUpdate ModuleTag_remove03
MinLifetime        3100
MaxLifetime        3100
End

End

;------------------------------------------------------------------------------
Object GLAInfantryAngryMobNexus_Insurrection
Scale 0.90
;**** ART Parameters **************************
SelectPortrait          SURiotAngryMob_L
ButtonImage             SURiotAngryMob

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  None
End
End


;****DESIGN parameters **************************

DisplayName       OBJECT:InsurrectionMob
Side  GLA

RadarPriority        NOT_ON_RADAR

EditorSorting    INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobNexusHarmlessWeapon
Weapon  SECONDARY GLAAngryMobNexusHarmlessWeapon
Weapon  TERTIARY GLAAngryMobNexusHarmlessWeapon
End


ArmorSet
Conditions       None
Armor            InvulnerableAllArmor
DamageFX         None
End

BuildCost        1000
BuildTime        15.0          ;in seconds
VisionRange      220  ; it can scout for the spawn
ShroudClearingRange  0

Prerequisites
Object  GLABarracks
Object  GLABlackMarket
End

IsTrainable      No

ExperienceValue  50 100 200 300    ;Experience point value at each level

CommandSet     GLAInfantryAngryMobCommandSet;

;**** AUDIO Parameters *****************************
VoiceSelect   InsurrectionVoiceSelect
VoiceMove     InsurrectionVoiceMove
VoiceGuard    InsurrectionVoiceMove
VoiceAttack   InsurrectionVoiceAttack
SoundAmbient  AngryMobAmbientLoop

UnitSpecificSounds
VoiceCreate           InsurrectionVoiceCreate
End


;**** ENGINEERING Parameters ******************************

RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK INFANTRY OBSTACLE MOB_NEXUS ATTACK_NEEDS_LINE_OF_SIGHT NO_COLLIDE SELECTABLE SCORE
Body  ImmortalBody ModuleTag_02
MaxHealth        99999.0
InitialHealth    99999.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Locomotor  SET_NORMAL InsurrectionAngryMobNexusLocomotor
Locomotor  SET_WANDER InsurrectionAngryMobNexusLocomotor
Locomotor  SET_PANIC  InsurrectionAngryMobNexusLocomotor


Behavior  PhysicsBehavior ModuleTag_04
Mass  50.0
End

Behavior             SpawnBehavior ModuleTag_05
SpawnNumber        50
SpawnReplaceDelay  3000 ; 3 seconds

SpawnTemplateName  InsurrectionMobMember01
SpawnTemplateName  InsurrectionMobMember01
SpawnTemplateName  InsurrectionMobMember02
SpawnTemplateName  InsurrectionMobMember02
SpawnTemplateName  InsurrectionMobMember03
SpawnTemplateName  InsurrectionMobMember04

ExitByBudding  Yes;!
OneShot      No
AggregateHealth  Yes
SlavesHaveFreeWill  No
End

Behavior  QueueProductionExitUpdate ModuleTag_06
UnitCreatePoint    X:0.0  Y:0.0  Z:0.0
NaturalRallyPoint  X:0.0  Y:0.0  Z:0.0
ExitDelay      3000
InitialBurst   8 ; the first set of 5 will not delay
End

Behavior  DestroyDie ModuleTag_07
DeathTypes  ALL
End

;Geometry  CYLINDER
;GeometryMajorRadius  1.0
;GeometryMinorRadius  1.0
;GeometryHeight  1.0
;GeometryIsSmall  Yes
Shadow  SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object InsurrectionMobMember01
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIPART2_SKN
IdleAnimation  UIPART2_SKL.UIPART2_STA
IdleAnimation  UIPART2_SKL.UIPART2_IDA
IdleAnimation  UIPART2_SKL.UIPART2_IDB
IdleAnimation  UIPART2_SKL.UIPART2_CHA
IdleAnimation  UIPART2_SKL.UIPART2_CHA
IdleAnimation  UIPART2_SKL.UIPART2_CHA
AnimationMode  ONCE
WeaponFireFXBone  PRIMARY Muzzle
WeaponLaunchBone  PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
TransitionKey  TRANS_Stand
End
AliasConditionState  REALLYDAMAGED

ConditionState  MOVING
Animation  UIPART2_SKL.UIPART2_RNA
AnimationMode  LOOP
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A

ConditionState  MOVING REALLYDAMAGED
Animation  UIPART2_SKL.UIPART2_RNA
AnimationMode  LOOP
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED

ConditionState  DYING
Animation  UIPART2_SKL.UIPART2_DTA
Animation  UIPART2_SKL.UIPART2_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End
TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIPART2_SKL.UIPART2_ADTC1
AnimationMode  ONCE
End
ConditionState  DYING EXPLODED_FLAILING
Animation  UIPART2_SKL.UIPART2_ADTC2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End
ConditionState  DYING EXPLODED_BOUNCING
Animation  UIPART2_SKL.UIPART2_ADTC3
AnimationMode  ONCE
End

ConditionState  FIRING_A
Animation  UIPART2_SKL.UIPART2_ATA
AnimationMode  ONCE
TransitionKey  TRANS_FiringA
End
AliasConditionState  FIRING_A REALLYDAMAGED

ConditionState  BETWEEN_FIRING_SHOTS_A
Animation  UIPART2_SKL.UIPART2_ATA
AnimationMode  MANUAL
Flags  START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RELOADING_A
AliasConditionState  BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  RELOADING_A REALLYDAMAGED

ConditionState  FREEFALL
Animation  UIPART2_SKL.UIPART2_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING
ConditionState  PARACHUTING
Animation  UIPART2_SKL.UIPART2_PHG
AnimationMode  LOOP
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING
TransitionState  TRANS_Falling TRANS_Chute
Animation  UIPART2_SKL.UIPART2_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End
TransitionState  TRANS_Chute TRANS_Stand
Animation  UIPART2_SKL.UIPART2_PTD
AnimationMode  ONCE
End
ConditionState  SPECIAL_CHEERING
Animation  UIPART2_SKL.UIPART2_CHA
AnimationMode  ONCE
End
End

DisplayName       OBJECT:InsurrectionMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY InsurrectionMobShotgunWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

;**** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL InsurrectionAngryMobNormalLocomotor
Locomotor  SET_WANDER InsurrectionAngryMobWanderLocomotor
Locomotor  SET_PANIC  InsurrectionAngryMobPanicLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

;Behavior  SquishCollide ModuleTag_08
;End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  4.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object InsurrectionMobMember02
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIPART_SKN
IdleAnimation  UIPART_SKL.UIPART_STA
IdleAnimation  UIPART_SKL.UIPART_IDA
IdleAnimation  UIPART_SKL.UIPART_IDB
IdleAnimation  UIPART_SKL.UIPART_CHA
IdleAnimation  UIPART_SKL.UIPART_CHA
IdleAnimation  UIPART_SKL.UIPART_CHA
AnimationMode  ONCE
WeaponFireFXBone  PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
TransitionKey  TRANS_Stand
End
AliasConditionState  REALLYDAMAGED
ConditionState  MOVING
Animation  UIPART_SKL.UIPART_RNA
AnimationMode  LOOP
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A
ConditionState  MOVING REALLYDAMAGED
Animation  UIPART_SKL.UIPART_RNA
AnimationMode  LOOP
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
ConditionState  DYING
Animation  UIPART_SKL.UIPART_DTA
Animation  UIPART_SKL.UIPART_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End
TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIPART_SKL.UIPART_ADTD1
AnimationMode  ONCE
End
ConditionState  DYING EXPLODED_FLAILING
Animation  UIPART_SKL.UIPART_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End
ConditionState  DYING EXPLODED_BOUNCING
Animation  UIPART_SKL.UIPART_ADTD3
AnimationMode  ONCE
End
ConditionState  FIRING_A
Animation  UIPART_SKL.UIPART_ATA
AnimationMode  LOOP
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A
ConditionState  FIRING_A REALLYDAMAGED
Animation  UIPART_SKL.UIPART_ATA
AnimationMode  LOOP
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  RELOADING_A REALLYDAMAGED
ConditionState  FREEFALL
Animation  UIPART_SKL.UIPART_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING
ConditionState  PARACHUTING
Animation  UIPART_SKL.UIPART_PHG
AnimationMode  LOOP
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING
TransitionState  TRANS_Falling TRANS_Chute
Animation  UIPART_SKL.UIPART_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End
TransitionState  TRANS_Chute TRANS_Stand
Animation  UIPART_SKL.UIPART_PTD
AnimationMode  ONCE
End
ConditionState  SPECIAL_CHEERING
Animation  UIPART_SKL.UIPART_CHA
AnimationMode  ONCE
End
End

DisplayName       OBJECT:InsurrectionMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY InsurrectionMobSubmachinegunWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

;**** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL InsurrectionAngryMobNormalLocomotor
Locomotor  SET_WANDER InsurrectionAngryMobWanderLocomotor
Locomotor  SET_PANIC  InsurrectionAngryMobPanicLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

;Behavior  SquishCollide ModuleTag_08
;End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  4.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object InsurrectionMobMember03
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIPRTSN3_SKN
IdleAnimation  UIPRTSN3_SKL.UIPRTSN3_STA
IdleAnimation  UIPRTSN3_SKL.UIPRTSN3_IDA
IdleAnimation  UIPRTSN3_SKL.UIPRTSN3_IDB
AnimationMode  ONCE
WeaponFireFXBone  PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
TransitionKey  TRANS_Stand
End
AliasConditionState  REALLYDAMAGED
ConditionState  MOVING
Animation  UIPRTSN3_SKL.UIPRTSN3_RNA
AnimationMode  LOOP
TransitionKey  TRANS_Standing
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A
ConditionState  MOVING REALLYDAMAGED
Animation  UIPRTSN3_SKL.UIPRTSN3_RNA
AnimationMode  LOOP
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
ConditionState  DYING
Animation  UIPRTSN3_SKL.UIPRTSN3_DTA
Animation  UIPRTSN3_SKL.UIPRTSN3_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End
TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIPRTSN3_SKL.UIPRTSN3_ADTA1
AnimationMode  ONCE
End
ConditionState  DYING EXPLODED_FLAILING
Animation  UIPRTSN3_SKL.UIPRTSN3_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End
ConditionState  DYING EXPLODED_BOUNCING
Animation  UIPRTSN3_SKL.UIPRTSN3_ADTA3
AnimationMode  ONCE
End
ConditionState  FIRING_A
Animation  UIPRTSN3_SKL.UIPRTSN3_ATA
AnimationMode  LOOP
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A
ConditionState  FIRING_A REALLYDAMAGED
Animation  UIPRTSN3_SKL.UIPRTSN3_ATA
AnimationMode  LOOP
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  RELOADING_A REALLYDAMAGED
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING
ConditionState  PARACHUTING
Animation  UIPRTSN3_SKL.UIPRTSN3_PHG
AnimationMode  LOOP
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING
TransitionState  TRANS_Falling TRANS_Chute
Animation  UIPRTSN3_SKL.UIPRTSN3_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End
TransitionState  TRANS_Chute TRANS_Stand
Animation  UIPRTSN3_SKL.UIPRTSN3_PTD
AnimationMode  ONCE
End
ConditionState  SPECIAL_CHEERING
Animation  UIPRTSN3_SKL.UIPRTSN3_CHA
AnimationMode  ONCE
End
End

DisplayName       OBJECT:InsurrectionMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY InsurrectionMobAK47Weapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

;**** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL InsurrectionAngryMobNormalLocomotor
Locomotor  SET_WANDER InsurrectionAngryMobWanderLocomotor
Locomotor  SET_PANIC  InsurrectionAngryMobPanicLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

;Behavior  SquishCollide ModuleTag_08
;End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

;Geometry  CYLINDER
;GeometryMajorRadius  4.0 ; very thin
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
ObjectReskin InsurrectionMobMember04 InsurrectionMobMember03

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIPRTSN3_SKN
IdleAnimation  UIPRTSN3_SKL.UIPRTSN3_CHA
AnimationMode  ONCE
WeaponFireFXBone  PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
TransitionKey  TRANS_Stand
End
AliasConditionState  REALLYDAMAGED
ConditionState  MOVING
Animation  UIPRTSN3_SKL.UIPRTSN3_RNA
AnimationMode  LOOP
TransitionKey  TRANS_Standing
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A
ConditionState  MOVING REALLYDAMAGED
Animation  UIPRTSN3_SKL.UIPRTSN3_RNA
AnimationMode  LOOP
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
ConditionState  DYING
Animation  UIPRTSN3_SKL.UIPRTSN3_DTA
Animation  UIPRTSN3_SKL.UIPRTSN3_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End
TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIPRTSN3_SKL.UIPRTSN3_ADTA1
AnimationMode  ONCE
End
ConditionState  DYING EXPLODED_FLAILING
Animation  UIPRTSN3_SKL.UIPRTSN3_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End
ConditionState  DYING EXPLODED_BOUNCING
Animation  UIPRTSN3_SKL.UIPRTSN3_ADTA3
AnimationMode  ONCE
End
ConditionState  FIRING_A
Animation  UIPRTSN3_SKL.UIPRTSN3_ATA
AnimationMode  LOOP
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A
ConditionState  FIRING_A REALLYDAMAGED
Animation  UIPRTSN3_SKL.UIPRTSN3_ATA
AnimationMode  LOOP
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  RELOADING_A REALLYDAMAGED
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING
ConditionState  PARACHUTING
Animation  UIPRTSN3_SKL.UIPRTSN3_PHG
AnimationMode  LOOP
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING
TransitionState  TRANS_Falling TRANS_Chute
Animation  UIPRTSN3_SKL.UIPRTSN3_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End
TransitionState  TRANS_Chute TRANS_Stand
Animation  UIPRTSN3_SKL.UIPRTSN3_PTD
AnimationMode  ONCE
End
ConditionState  SPECIAL_CHEERING
Animation  UIPRTSN3_SKL.UIPRTSN3_CHA
AnimationMode  ONCE
End
End

End
;----------------------------------------------------------------------------
Object GLAInfantryJarmenKell
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUJermanKell1_L
ButtonImage             SUJermanKell1

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; --- idle
DefaultConditionState
Model              UIHERO_SKN
IdleAnimation      UIHERO_SKL.UIHERO_STA 0 21
IdleAnimation      UIHERO_SKL.UIHERO_IDA
IdleAnimation      UIHERO_SKL.UIHERO_IDB
AnimationMode      ONCE
WeaponFireFXBone   PRIMARY Muzzle
WeaponLaunchBone   PRIMARY Muzzle
WeaponFireFXBone   SECONDARY Exhaust01
WeaponLaunchBone   SECONDARY Muzzle02
WeaponFireFXBone   TERTIARY Muzzle
WeaponLaunchBone   TERTIARY Muzzle
TransitionKey      TRANS_Stand
WaitForStateToFinishIfPossible  TRANS_FIRING_STINGER
End

ConditionState       REALLYDAMAGED
IdleAnimation      UIHERO_SKL.UIHERO_ISTA 0 30
IdleAnimation      UIHERO_SKL.UIHERO_IIDA
IdleAnimation      UIHERO_SKL.UIHERO_IIDB
AnimationMode      ONCE
TransitionKey      TRANS_StandInjured
WaitForStateToFinishIfPossible  TRANS_FIRING_STINGER
End

TransitionState      TRANS_Stand TRANS_StandInjured
Animation          UIHERO_SKL.UIHERO_ISTAHIT
AnimationMode      ONCE
End

; --- attack

ConditionState       FIRING_A
Animation          UIHERO_SKL.UIHERO_ATA
AnimationMode      ONCE
TransitionKey      TRANS_FiringA
AnimationSpeedFactorRange  1.5 1.5
WaitForStateToFinishIfPossible  None
End
AliasConditionState  FIRING_C

ConditionState       BETWEEN_FIRING_SHOTS_A
Animation          UIHERO_SKL.UIHERO_ATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RELOADING_A
AliasConditionState  PREATTACK_A
AliasConditionState  BETWEEN_FIRING_SHOTS_C
AliasConditionState  RELOADING_C
AliasConditionState  PREATTACK_C

ConditionState       FIRING_A REALLYDAMAGED
Animation          UIHERO_SKL.UIHERO_IATA2
AnimationMode      ONCE
TransitionKey      TRANS_FiringAInjured
AnimationSpeedFactorRange  1.5 1.5
WaitForStateToFinishIfPossible  None
End
AliasConditionState  FIRING_C REALLYDAMAGED

ConditionState       BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
Animation          UIHERO_SKL.UIHERO_IATA2
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringAInjured
End
AliasConditionState  RELOADING_A REALLYDAMAGED
AliasConditionState  PREATTACK_A REALLYDAMAGED
AliasConditionState  BETWEEN_FIRING_SHOTS_C REALLYDAMAGED
AliasConditionState  RELOADING_C REALLYDAMAGED
AliasConditionState  PREATTACK_C REALLYDAMAGED

TransitionState      TRANS_FiringA TRANS_FiringAInjured
Animation          UIHERO_SKL.UIHERO_IATAHIT
AnimationMode      ONCE
End

; --- attack with stinger missile vehicle  weapon

ConditionState       PREATTACK_B
Model              UIHero_2_SKN
Animation          UISmsd_SKL.UISmsd_ATC
AnimationMode      ONCE
End
AliasConditionState  PREATTACK_B REALLYDAMAGED

ConditionState       FIRING_B
Model              UIHero_2_SKN
Animation          UISmsd_SKL.UISmsd_ATD
AnimationMode      ONCE
TransitionKey      TRANS_FIRING_STINGER
End
AliasConditionState  FIRING_B REALLYDAMAGED

ConditionState       BETWEEN_FIRING_SHOTS_B
Model              UIHero_2_SKN
Animation          UISmsd_SKL.UISmsd_STB
AnimationMode      ONCE
End
AliasConditionState  BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

ConditionState       RELOADING_B
Model              UIHero_2_SKN
Animation          UISmsd_SKL.UISmsd_ATA 10
AnimationMode      ONCE
End


; --- moving
ConditionState       MOVING
Animation          UIHERO_SKL.UIHERO_RNA2 30
AnimationMode      LOOP
Flags              RANDOMSTART
TransitionKey      Trans_Moving
ParticleSysBone    None InfantryDustTrails
WaitForStateToFinishIfPossible  None
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A
AliasConditionState  MOVING RELOADING_B
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B

ConditionState       MOVING REALLYDAMAGED
Animation          UIHERO_SKL.UIHERO_IRNA 30
AnimationMode      LOOP
Flags              RANDOMSTART
TransitionKey      Trans_Moving_Damaged
ParticleSysBone    None InfantryDustTrails
WaitForStateToFinishIfPossible  None
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_B REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED

; --- cheering
ConditionState       SPECIAL_CHEERING
Animation          UIHERO_SKL.UIHERO_CHA
AnimationMode      LOOP
End

ConditionState       SPECIAL_CHEERING REALLYDAMAGED
Animation          UIHERO_SKL.UIHERO_ICHA
AnimationMode      LOOP
End

; --- dying
ConditionState       DYING
Animation          UIHERO_SKL.UIHERO_DTA
Animation          UIHERO_SKL.UIHERO_DTB
Animation          UIHERO_SKL.UIHERO_IDTA
Animation          UIHERO_SKL.UIHERO_IDTB
AnimationMode      ONCE
TransitionKey      TRANS_Dying
WaitForStateToFinishIfPossible  None
End

TransitionState      TRANS_Dying TRANS_Flailing
Animation          UIHERO_SKL.UIHERO_ADTG21
AnimationMode      ONCE
End

ConditionState       DYING EXPLODED_FLAILING
Animation          UIHERO_SKL.UIHERO_ADTG22
AnimationMode      LOOP
TransitionKey      TRANS_Flailing
WaitForStateToFinishIfPossible  None
End

ConditionState       DYING EXPLODED_BOUNCING
Animation          UIHERO_SKL.UIHERO_ADTG23
AnimationMode      ONCE
TransitionKey      TRANS_Dying_Exploded
WaitForStateToFinishIfPossible  None
End

; --- falling
ConditionState       FREEFALL
Animation          UIHERO_SKL.UIHERO_PFL
AnimationMode      LOOP
TransitionKey      TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState       PARACHUTING
Animation          UIHERO_SKL.UIHERO_PHG
AnimationMode      LOOP
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
TransitionKey      TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState      TRANS_Falling TRANS_Chute
Animation          UIHERO_SKL.UIHERO_POP
AnimationMode      ONCE
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState      TRANS_Chute TRANS_Stand
Animation          UIHERO_SKL.UIHERO_PTD
AnimationMode      ONCE
End

TransitionState      TRANS_Chute TRANS_StandInjured
Animation          UIHERO_SKL.UIHERO_PTD
AnimationMode      ONCE
End

End

; ***DESIGN parameters ***
DisplayName            OBJECT:JarmenKell
Side                   GLA
EditorSorting          INFANTRY
TransportSlotCount     1                 ;how many "slots" we take in a transport (0 == not transportable)
MaxSimultaneousOfType  1

WeaponSet
Conditions  None
Weapon             PRIMARY   GLAJarmenKellRifle
Weapon             SECONDARY GLAJarmenKellVehiclePilotSniperRifle
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  GLAJarmenKellSupresiveFireWeapon
AutoChooseSources  TERTIARY  NONE
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon             PRIMARY   GLAJarmenKellRifleUpgraded
Weapon             SECONDARY GLAJarmenKellVehiclePilotSniperRifle
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  GLAJarmenKellSupresiveFireWeapon
AutoChooseSources  TERTIARY  NONE
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End
VisionRange          300
ShroudClearingRange  325

Prerequisites
Object  GLAPalace
End

BuildCost  1500
BuildTime  20.0          ;in seconds

ExperienceValue      50 100 100 150  ;Experience point value at each level
ExperienceRequired   0  200 300 600  ;Experience points needed to gain each level
IsTrainable          Yes             ;Can gain experience
CrushableLevel       2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet           GLAInfantryJarmenKellCommandSet

; *** AUDIO Parameters ***
VoiceSelect      JarmenKellVoiceSelect
VoiceMove        JarmenKellVoiceMove
VoiceGuard       JarmenKellVoiceMove
VoiceAttack      JarmenKellVoiceAttack
VoiceFear        JarmenKellVoiceFear

UnitSpecificSounds
VoiceCreate           JarmenKellVoiceCreate
VoiceGarrison         JarmenKellVoiceGarrison
VoiceEnter            JarmenKellVoiceMove
VoiceEnterHostile     JarmenKellVoiceMove
VoiceGetHealed        JarmenKellVoiceMove
End


; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER STEALTH_GARRISON SCORE HERO REJECT_UNMANNED CANNOT_RETALIATE

Body  ActiveBody ModuleTag_02
MaxHealth        250.0
InitialHealth    250.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL JarmenKellLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End
Behavior  StealthUpdate ModuleTag_06
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING
InnateStealth                Yes
OrderIdleEnemiesToAttackMeUponReveal   Yes
EnemyDetectionEvaEvent       EnemyJarmenKellDetected
OwnDetectionEvaEvent         OwnJarmenKellDetected
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

Behavior  WeaponSetUpgrade ModuleTag_08
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  BoneFXDamage ModuleTag_HeroDecal01
End

Behavior  BoneFXUpdate ModuleTag_HeroDecal02
PristineOCL1       bone:NULL OnlyOnce:No 33 33 OCL:OCL_GLAHeroUnitDecal
DamagedOCL1        bone:NULL OnlyOnce:No 33 33 OCL:OCL_GLAHeroUnitDecal
ReallyDamagedOCL1  bone:NULL OnlyOnce:No 33 33 OCL:OCL_GLAHeroUnitDecal
End

;  Behavior  FireWeaponUpdate ModuleTag_HeroDecal01
;    Weapon  GLAHeroUnitDecalWeapon
;  End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_JarmenKellDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_JarmenKellDie
OCL                  INITIAL OCL_GLAExplodedDeathJarmenKell
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_JarmenKellDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathJarmenKell
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_14
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End
;------------------------------------------------------------------------------
Object GLAInfantryMercenaryGrenadier
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUMercenary_L
ButtonImage              SUMercenary

Draw  W3DModelDraw ModuleTag_01
DefaultConditionState
Model                EIMerc_SKN
IdleAnimation        RIShkTrp_SKL.RIShkTrp_STN
AnimationMode        ONCE
End
End

; set cost and time fields here or else they won't work
BuildCost  750
BuildTime  4.0          ;in seconds

Prerequisites
Object   GLAPalace
End

Side  GLA
EditorSorting  INFANTRY
BuildVariations   GLAInfantryMercenaryGrenadier_Var1 GLAInfantryMercenaryGrenadier_Var2 GLAInfantryMercenaryGrenadier_Var3

KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SCORE SALVAGER

End

;------------------------------------------------------------------------------
Object GLAInfantryMercenaryGrenadier_Var1
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUMercenary_L
ButtonImage              SUMercenary

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; idle
DefaultConditionState
Model                UIMercGrn_SKN_B
HideSubObject        WPN01 HEAD02 HEAD03
IdleAnimation        AIHERO_SKL.AIHERO_STA 0 25
IdleAnimation        AIHERO_SKL.AIHERO_IDA
IdleAnimation        AIHERO_SKL.AIHERO_IDB
AnimationMode        ONCE
TransitionKey        TRANS_Stand
WeaponFireFXBone     PRIMARY Muzzle
WeaponLaunchBone     PRIMARY Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
End


; injured idle
ConditionState         REALLYDAMAGED
IdleAnimation        AIHERO_SKL.AIHERO_ISTA 0 30
IdleAnimation        AIHERO_SKL.AIHERO_IIDA
IdleAnimation        AIHERO_SKL.AIHERO_IIDB
AnimationMode        ONCE
TransitionKey        TRANS_StandInjured
End


TransitionState      TRANS_Stand TRANS_StandInjured
Animation          AIHERO_SKL.AIHERO_ISTAHIT
AnimationMode      ONCE
End

; moving
ConditionState         MOVING
Animation            AIHERO_SKL.AIHERO_RNA 26
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_Walking
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A
AliasConditionState  MOVING FIRING_B
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B
AliasConditionState  MOVING RELOADING_B

; injured moving
ConditionState      MOVING REALLYDAMAGED
Animation         AIHERO_SKL.AIHERO_IRNA 26
AnimationMode     LOOP
Flags             RANDOMSTART
TransitionKey     TRANS_WalkingInjured
ParticleSysBone   None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
AliasConditionState  MOVING FIRING_B REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
AliasConditionState  MOVING RELOADING_B REALLYDAMAGED

; Firing animation
ConditionState       FIRING_A
Animation          AIHERO_SKL.AIHERO_ATA
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_FiringA
End

ConditionState       BETWEEN_FIRING_SHOTS_A
Animation          AIHERO_SKL.AIHERO_ATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RELOADING_A

; Injured Firing animation
ConditionState       FIRING_A REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATA
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_FiringAInjured
End

ConditionState       BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringAInjured
End
AliasConditionState  RELOADING_A REALLYDAMAGED

TransitionState      TRANS_FiringA TRANS_FiringAInjured
Animation          AIHERO_SKL.AIHERO_IATAHIT
AnimationMode      ONCE
End

; Arc Firing mode animation

ConditionState       FIRING_B
Animation          AIHERO_SKL.AIHERO_ATD
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_Firing_B
End

ConditionState       BETWEEN_FIRING_SHOTS_B
Animation          AIHERO_SKL.AIHERO_ATD
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_Firing_B
End
AliasConditionState  RELOADING_B

; Injured Arc Firing mode animation
ConditionState       FIRING_B REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATD
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_Firing_B_Injured
End

ConditionState       BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATD
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_Firing_B_Injured
End
AliasConditionState  RELOADING_B REALLYDAMAGED

TransitionState      TRANS_Firing_B TRANS_Firing_B_Injured
Animation          AIHERO_SKL.AIHERO_IATDHIT
AnimationMode      ONCE
End

; Placing charge animation
ConditionState       UNPACKING
Animation          AIHERO_SKL.AIHERO_ATB1
AnimationMode      ONCE
End
AliasConditionState  MOVING UNPACKING

; Injured Placing charge animation
ConditionState       UNPACKING REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATB1
AnimationMode      ONCE
End
AliasConditionState  MOVING UNPACKING REALLYDAMAGED

; cheering
ConditionState       SPECIAL_CHEERING
Animation          AIHERO_SKL.AIHERO_CHA
AnimationMode      ONCE
End

; injured cheering
ConditionState       SPECIAL_CHEERING REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_ICHA
AnimationMode      ONCE
End

; climbing
ConditionState       CLIMBING
Animation          AIHERO_SKL.AIHERO_CLMID
AnimationMode      LOOP
TransitionKey      TRANS_Climbing
End
AliasConditionState  RAPPELLING
AliasConditionState  CLIMBING REALLYDAMAGED
AliasConditionState  RAPPELLING REALLYDAMAGED

ConditionState       CLIMBING MOVING
Animation          AIHERO_SKL.AIHERO_CLMUP
AnimationMode      LOOP
TransitionKey      TRANS_Climbing
End
AliasConditionState  CLIMBING MOVING REALLYDAMAGED

ConditionState       RAPPELLING MOVING
Animation          AIHERO_SKL.AIHERO_CLMUP
AnimationMode      LOOP_BACKWARDS
TransitionKey      TRANS_Climbing
End
AliasConditionState  RAPPELLING MOVING REALLYDAMAGED

; dying anims
ConditionState       DYING
Animation          AIHERO_SKL.AIHERO_DTA
Animation          AIHERO_SKL.AIHERO_DTB
Animation          AIHero_SKL.AIHero_IDTA
Animation          AIHero_SKL.AIHero_IDTB
AnimationMode      ONCE
TransitionKey      TRANS_Dying
End
AliasConditionState  RAPPELLING DYING
AliasConditionState  CLIMBING DYING

TransitionState      TRANS_Dying TRANS_Flailing
Animation          AIHERO_SKL.AIHERO_ADTG21
AnimationMode      ONCE
End

ConditionState       DYING EXPLODED_FLAILING
Animation          AIHERO_SKL.AIHERO_ADTG22
AnimationMode      LOOP
TransitionKey      TRANS_Flailing
End

ConditionState       DYING EXPLODED_BOUNCING
Animation          AIHERO_SKL.AIHERO_ADTG23
AnimationMode      ONCE
TransitionKey      None
End

; misc anims
ConditionState       FREEFALL
Animation          AIHERO_SKL.AIHERO_PFL
AnimationMode      LOOP
TransitionKey      TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState       PARACHUTING
Animation          AIHERO_SKL.AIHERO_PHG
AnimationMode      LOOP
TransitionKey      TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState      TRANS_Falling TRANS_Chute
Animation          AIHERO_SKL.AIHERO_POP
AnimationMode      ONCE
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState      TRANS_Chute TRANS_Stand
Animation          AIHERO_SKL.AIHERO_PTD
AnimationMode      ONCE
End

TransitionState      TRANS_Chute TRANS_StandInjured
Animation          AIHERO_SKL.AIHERO_PTD
AnimationMode      ONCE
End

End

; ***DESIGN parameters ***
DisplayName          OBJECT:MercenaryGrenadier
Side                 GLA
EditorSorting        SYSTEM
TransportSlotCount   1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions         NONE
Weapon             PRIMARY   MercenaryGrenadeLauncherWeapon
Weapon             SECONDARY MercenaryGrenadeLauncherArcFireModeWeapon
AutoChooseSources  SECONDARY NONE
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

Prerequisites
Object   GLABlackMarket
Science  SCIENCE_Mercenaries
End

VisionRange          225
ShroudClearingRange  250

BuildCost  750
BuildTime  4.0          ;in seconds

ExperienceValue      40 60  80  100  ;Experience point value at each level
ExperienceRequired   0  300 400 600  ;Experience points needed to gain each level
IsTrainable          Yes             ;Can gain experience
CrushableLevel       2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet           GLAInfantryMercenaryGrenadierCommandSet

; *** AUDIO Parameters ***
VoiceSelect            MercenaryGrenadierVoiceSelect
VoiceMove              MercenaryGrenadierVoiceMove
VoiceGuard             MercenaryGrenadierVoiceMove
VoiceAttack            MercenaryGrenadierVoiceAttack
VoiceFear              MercenaryGrenadierVoiceFear

UnitSpecificSounds
VoiceCreate          MercenaryGrenadierVoiceCreate
VoiceGarrison        MercenaryGrenadierVoiceGarrison
VoiceEnter           MercenaryGrenadierVoiceMove
VoiceEnterHostile    MercenaryGrenadierVoiceMove
VoiceGetHealed       MercenaryGrenadierVoiceMove
VoicePrimaryWeaponMode    MercenaryGrenadierVoiceSwitchDirrectFireMode
VoiceSecondaryWeaponMode  MercenaryGrenadierVoiceSwitchArFireMode
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SCORE SALVAGER

Body  ActiveBody ModuleTag_02
MaxHealth        200.0
InitialHealth    200.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Locomotor  SET_NORMAL ConscriptHumanLocomotor
Locomotor  SET_SUPERSONIC MercenaryMachetteLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

Behavior  LockWeaponCreate ModuleTag_WeaponLock01
SlotToLock  SECONDARY
End

;  Behavior  SquishCollide ModuleTag_11
;  End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
ForbiddenStatus              STATUS_RIDER2 ;running around screaming with a machete is not exactly stealthy afterall
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_MercenaryGrenadierDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDie
OCL                  INITIAL OCL_GLAExplodedDeathMercGrenadier
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDieByFire
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDieByToxin
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDieByToxin
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDieByTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDieByFire
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDieByToxin
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_MercenaryGrenadierDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathMercGrenadier
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MercenaryGrenadierDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MercenaryGrenadierDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryMercenaryGrenadier_Var2 GLAInfantryMercenaryGrenadier_Var1


Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; idle
DefaultConditionState
Model                UIMercGrn_SKN_B
HideSubObject        WPN01 GLASSES HEAD01 HEAD02
IdleAnimation        AIHERO_SKL.AIHERO_STA 0 25
IdleAnimation        AIHERO_SKL.AIHERO_IDA
IdleAnimation        AIHERO_SKL.AIHERO_IDB
AnimationMode        ONCE
TransitionKey        TRANS_Stand
WeaponFireFXBone     PRIMARY Muzzle
WeaponLaunchBone     PRIMARY Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
End


; injured idle
ConditionState         REALLYDAMAGED
IdleAnimation        AIHERO_SKL.AIHERO_ISTA 0 30
IdleAnimation        AIHERO_SKL.AIHERO_IIDA
IdleAnimation        AIHERO_SKL.AIHERO_IIDB
AnimationMode        ONCE
TransitionKey        TRANS_StandInjured
End


TransitionState      TRANS_Stand TRANS_StandInjured
Animation          AIHERO_SKL.AIHERO_ISTAHIT
AnimationMode      ONCE
End

; moving
ConditionState         MOVING
Animation            AIHERO_SKL.AIHERO_RNA 26
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_Walking
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A
AliasConditionState  MOVING FIRING_B
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B
AliasConditionState  MOVING RELOADING_B

; injured moving
ConditionState      MOVING REALLYDAMAGED
Animation         AIHERO_SKL.AIHERO_IRNA 26
AnimationMode     LOOP
Flags             RANDOMSTART
TransitionKey     TRANS_WalkingInjured
ParticleSysBone   None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
AliasConditionState  MOVING FIRING_B REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
AliasConditionState  MOVING RELOADING_B REALLYDAMAGED

; Firing animation
ConditionState       FIRING_A
Animation          AIHERO_SKL.AIHERO_ATA
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_FiringA
End

ConditionState       BETWEEN_FIRING_SHOTS_A
Animation          AIHERO_SKL.AIHERO_ATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RELOADING_A

; Injured Firing animation
ConditionState       FIRING_A REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATA
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_FiringAInjured
End

ConditionState       BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringAInjured
End
AliasConditionState  RELOADING_A REALLYDAMAGED

TransitionState      TRANS_FiringA TRANS_FiringAInjured
Animation          AIHERO_SKL.AIHERO_IATAHIT
AnimationMode      ONCE
End

; Arc Firing mode animation

ConditionState       FIRING_B
Animation          AIHERO_SKL.AIHERO_ATD
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_Firing_B
End

ConditionState       BETWEEN_FIRING_SHOTS_B
Animation          AIHERO_SKL.AIHERO_ATD
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_Firing_B
End
AliasConditionState  RELOADING_B

; Injured Arc Firing mode animation
ConditionState       FIRING_B REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATD
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_Firing_B_Injured
End

ConditionState       BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATD
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_Firing_B_Injured
End
AliasConditionState  RELOADING_B REALLYDAMAGED

TransitionState      TRANS_Firing_B TRANS_Firing_B_Injured
Animation          AIHERO_SKL.AIHERO_IATDHIT
AnimationMode      ONCE
End

; Placing charge animation
ConditionState       UNPACKING
Animation          AIHERO_SKL.AIHERO_ATB1
AnimationMode      ONCE
End
AliasConditionState  MOVING UNPACKING

; Injured Placing charge animation
ConditionState       UNPACKING REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATB1
AnimationMode      ONCE
End
AliasConditionState  MOVING UNPACKING REALLYDAMAGED

; cheering
ConditionState       SPECIAL_CHEERING
Animation          AIHERO_SKL.AIHERO_CHA
AnimationMode      ONCE
End

; injured cheering
ConditionState       SPECIAL_CHEERING REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_ICHA
AnimationMode      ONCE
End

; climbing
ConditionState       CLIMBING
Animation          AIHERO_SKL.AIHERO_CLMID
AnimationMode      LOOP
TransitionKey      TRANS_Climbing
End
AliasConditionState  RAPPELLING
AliasConditionState  CLIMBING REALLYDAMAGED
AliasConditionState  RAPPELLING REALLYDAMAGED

ConditionState       CLIMBING MOVING
Animation          AIHERO_SKL.AIHERO_CLMUP
AnimationMode      LOOP
TransitionKey      TRANS_Climbing
End
AliasConditionState  CLIMBING MOVING REALLYDAMAGED

ConditionState       RAPPELLING MOVING
Animation          AIHERO_SKL.AIHERO_CLMUP
AnimationMode      LOOP_BACKWARDS
TransitionKey      TRANS_Climbing
End
AliasConditionState  RAPPELLING MOVING REALLYDAMAGED

; dying anims
ConditionState       DYING
Animation          AIHERO_SKL.AIHERO_DTA
Animation          AIHERO_SKL.AIHERO_DTB
Animation          AIHero_SKL.AIHero_IDTA
Animation          AIHero_SKL.AIHero_IDTB
AnimationMode      ONCE
TransitionKey      TRANS_Dying
End
AliasConditionState  RAPPELLING DYING
AliasConditionState  CLIMBING DYING

TransitionState      TRANS_Dying TRANS_Flailing
Animation          AIHERO_SKL.AIHERO_ADTG21
AnimationMode      ONCE
End

ConditionState       DYING EXPLODED_FLAILING
Animation          AIHERO_SKL.AIHERO_ADTG22
AnimationMode      LOOP
TransitionKey      TRANS_Flailing
End

ConditionState       DYING EXPLODED_BOUNCING
Animation          AIHERO_SKL.AIHERO_ADTG23
AnimationMode      ONCE
TransitionKey      None
End

; misc anims
ConditionState       FREEFALL
Animation          AIHERO_SKL.AIHERO_PFL
AnimationMode      LOOP
TransitionKey      TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState       PARACHUTING
Animation          AIHERO_SKL.AIHERO_PHG
AnimationMode      LOOP
TransitionKey      TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState      TRANS_Falling TRANS_Chute
Animation          AIHERO_SKL.AIHERO_POP
AnimationMode      ONCE
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState      TRANS_Chute TRANS_Stand
Animation          AIHERO_SKL.AIHERO_PTD
AnimationMode      ONCE
End

TransitionState      TRANS_Chute TRANS_StandInjured
Animation          AIHERO_SKL.AIHERO_PTD
AnimationMode      ONCE
End

End

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryMercenaryGrenadier_Var3 GLAInfantryMercenaryGrenadier_Var1

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; idle
DefaultConditionState
Model                UIMercGrn_SKN_B
HideSubObject        WPN01 GLASSES HEAD01 HEAD03
IdleAnimation        AIHERO_SKL.AIHERO_STA 0 25
IdleAnimation        AIHERO_SKL.AIHERO_IDA
IdleAnimation        AIHERO_SKL.AIHERO_IDB
AnimationMode        ONCE
TransitionKey        TRANS_Stand
WeaponFireFXBone     PRIMARY Muzzle
WeaponLaunchBone     PRIMARY Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
End


; injured idle
ConditionState         REALLYDAMAGED
IdleAnimation        AIHERO_SKL.AIHERO_ISTA 0 30
IdleAnimation        AIHERO_SKL.AIHERO_IIDA
IdleAnimation        AIHERO_SKL.AIHERO_IIDB
AnimationMode        ONCE
TransitionKey        TRANS_StandInjured
End


TransitionState      TRANS_Stand TRANS_StandInjured
Animation          AIHERO_SKL.AIHERO_ISTAHIT
AnimationMode      ONCE
End

; moving
ConditionState         MOVING
Animation            AIHERO_SKL.AIHERO_RNA 26
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_Walking
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A
AliasConditionState  MOVING FIRING_B
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B
AliasConditionState  MOVING RELOADING_B

; injured moving
ConditionState      MOVING REALLYDAMAGED
Animation         AIHERO_SKL.AIHERO_IRNA 26
AnimationMode     LOOP
Flags             RANDOMSTART
TransitionKey     TRANS_WalkingInjured
ParticleSysBone   None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
AliasConditionState  MOVING FIRING_B REALLYDAMAGED
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
AliasConditionState  MOVING RELOADING_B REALLYDAMAGED

; Firing animation
ConditionState       FIRING_A
Animation          AIHERO_SKL.AIHERO_ATA
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_FiringA
End

ConditionState       BETWEEN_FIRING_SHOTS_A
Animation          AIHERO_SKL.AIHERO_ATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RELOADING_A

; Injured Firing animation
ConditionState       FIRING_A REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATA
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_FiringAInjured
End

ConditionState       BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringAInjured
End
AliasConditionState  RELOADING_A REALLYDAMAGED

TransitionState      TRANS_FiringA TRANS_FiringAInjured
Animation          AIHERO_SKL.AIHERO_IATAHIT
AnimationMode      ONCE
End

; Arc Firing mode animation

ConditionState       FIRING_B
Animation          AIHERO_SKL.AIHERO_ATD
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_Firing_B
End

ConditionState       BETWEEN_FIRING_SHOTS_B
Animation          AIHERO_SKL.AIHERO_ATD
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_Firing_B
End
AliasConditionState  RELOADING_B

; Injured Arc Firing mode animation
ConditionState       FIRING_B REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATD
AnimationMode      ONCE
AnimationSpeedFactorRange  1.5 1.5
TransitionKey      TRANS_Firing_B_Injured
End

ConditionState       BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATD
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_Firing_B_Injured
End
AliasConditionState  RELOADING_B REALLYDAMAGED

TransitionState      TRANS_Firing_B TRANS_Firing_B_Injured
Animation          AIHERO_SKL.AIHERO_IATDHIT
AnimationMode      ONCE
End

; Placing charge animation
ConditionState       UNPACKING
Animation          AIHERO_SKL.AIHERO_ATB1
AnimationMode      ONCE
End
AliasConditionState  MOVING UNPACKING

; Injured Placing charge animation
ConditionState       UNPACKING REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_IATB1
AnimationMode      ONCE
End
AliasConditionState  MOVING UNPACKING REALLYDAMAGED

; cheering
ConditionState       SPECIAL_CHEERING
Animation          AIHERO_SKL.AIHERO_CHA
AnimationMode      ONCE
End

; injured cheering
ConditionState       SPECIAL_CHEERING REALLYDAMAGED
Animation          AIHERO_SKL.AIHERO_ICHA
AnimationMode      ONCE
End

; climbing
ConditionState       CLIMBING
Animation          AIHERO_SKL.AIHERO_CLMID
AnimationMode      LOOP
TransitionKey      TRANS_Climbing
End
AliasConditionState  RAPPELLING
AliasConditionState  CLIMBING REALLYDAMAGED
AliasConditionState  RAPPELLING REALLYDAMAGED

ConditionState       CLIMBING MOVING
Animation          AIHERO_SKL.AIHERO_CLMUP
AnimationMode      LOOP
TransitionKey      TRANS_Climbing
End
AliasConditionState  CLIMBING MOVING REALLYDAMAGED

ConditionState       RAPPELLING MOVING
Animation          AIHERO_SKL.AIHERO_CLMUP
AnimationMode      LOOP_BACKWARDS
TransitionKey      TRANS_Climbing
End
AliasConditionState  RAPPELLING MOVING REALLYDAMAGED

; dying anims
ConditionState       DYING
Animation          AIHERO_SKL.AIHERO_DTA
Animation          AIHERO_SKL.AIHERO_DTB
Animation          AIHero_SKL.AIHero_IDTA
Animation          AIHero_SKL.AIHero_IDTB
AnimationMode      ONCE
TransitionKey      TRANS_Dying
End
AliasConditionState  RAPPELLING DYING
AliasConditionState  CLIMBING DYING

TransitionState      TRANS_Dying TRANS_Flailing
Animation          AIHERO_SKL.AIHERO_ADTG21
AnimationMode      ONCE
End

ConditionState       DYING EXPLODED_FLAILING
Animation          AIHERO_SKL.AIHERO_ADTG22
AnimationMode      LOOP
TransitionKey      TRANS_Flailing
End

ConditionState       DYING EXPLODED_BOUNCING
Animation          AIHERO_SKL.AIHERO_ADTG23
AnimationMode      ONCE
TransitionKey      None
End

; misc anims
ConditionState       FREEFALL
Animation          AIHERO_SKL.AIHERO_PFL
AnimationMode      LOOP
TransitionKey      TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState       PARACHUTING
Animation          AIHERO_SKL.AIHERO_PHG
AnimationMode      LOOP
TransitionKey      TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState      TRANS_Falling TRANS_Chute
Animation          AIHERO_SKL.AIHERO_POP
AnimationMode      ONCE
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState      TRANS_Chute TRANS_Stand
Animation          AIHERO_SKL.AIHERO_PTD
AnimationMode      ONCE
End

TransitionState      TRANS_Chute TRANS_StandInjured
Animation          AIHERO_SKL.AIHERO_PTD
AnimationMode      ONCE
End

End

End
;------------------------------------------------------------------------------
Object GLAInfantryMercenaryGunner
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUMercenaryGunner_L
ButtonImage              SUMercenaryGunner

Draw  W3DModelDraw ModuleTag_01
DefaultConditionState
Model                UIMercGnr_SKN
IdleAnimation        AIRngr_SKL.AIRngr_STA
AnimationMode        ONCE
End
End

; set cost and time fields here or else they won't work
BuildCost  600
BuildTime  4.0          ;in seconds

Prerequisites
Object   GLABlackMarket
Science  SCIENCE_Mercenaries
End

Side  GLA
EditorSorting  INFANTRY
BuildVariations   GLAInfantryMercenaryGunner_Var1 GLAInfantryMercenaryGunner_Var2 GLAInfantryMercenaryGunner_Var3

KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SCORE SALVAGER

End

;------------------------------------------------------------------------------
Object GLAInfantryMercenaryGunner_Var1
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUMercenaryGunner_L
ButtonImage              SUMercenaryGunner

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; ---- standing
DefaultConditionState
Model                UIMercGnr_SKN_C
IdleAnimation        RIShkTrp_SKL.RIShkTrp_STN 0 35
IdleAnimation        RIShkTrp_SKL.RIShkTrp_IDA
IdleAnimation        RIShkTrp_SKL.RIShkTrp_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponLaunchBone     PRIMARY Muzzle
HideSubObject        HEAD02 HEAD03
TransitionKey        TRANS_STAND
End
AliasConditionState    RIDER1

; ---- moving
ConditionState         RIDER1 MOVING
Animation            RIShkTrp_SKL.RIShkTrp_MVA 25
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_MOVING
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    RIDER1 MOVING ATTACKING


; ---- firing
ConditionState  RIDER1 FIRING_A
Animation  RIShkTrp_SKL.RIShkTrp_ASA
AnimationMode  ONCE
AnimationSpeedFactorRange  1.2 1.2
Flags  START_FRAME_FIRST
TransitionKey  TRANS_START_FIRING
End
AliasConditionState  RIDER1 BETWEEN_FIRING_SHOTS_A

ConditionState  RIDER1 USING_WEAPON_A
Animation  RIShkTrp_SKL.RIShkTrp_ASA
AnimationMode  ONCE
Flags  START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_START_FIRING
End
AliasConditionState  RIDER1 RELOADING_A

; ---- dying
ConditionState         RIDER1 DYING
Animation            RIShkTrp_SKL.RIShkTrp_DBA
AnimationMode        ONCE
TransitionKey        TRANS_DYING
End

TransitionState  TRANS_DYING TRANS_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_FLAILING
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

;Transition Animations

;Standing to Prone animation
TransitionState  TRANS_STAND TRANS_PRONE
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_SUA
AnimationMode  ONCE_BACKWARDS
HideSubObject  HEAD02 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD01 WPN02
Flags  MAINTAIN_FRAME_ACROSS_STATES
AnimationSpeedFactorRange  1.2 1.5
End

;Prone to Standing animation
TransitionState  TRANS_PRONE TRANS_STAND
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_SUA
AnimationMode  ONCE
HideSubObject  HEAD02 HEAD03 BOX02 WPN02
ShowSubObject  BOX01 HEAD01 WPN01
Flags  MAINTAIN_FRAME_ACROSS_STATES
AnimationSpeedFactorRange  1.2 1.5
End

;Prone Animations

;Prone Idle animation
ConditionState   RIDER2
Model  UIMercGnr_SKN
IdleAnimation  AIPFDR_SKL.AIPFDR_STB 0 10
IdleAnimation  AIPFDR_SKL.AIPFDR_IDB
AnimationMode  ONCE
HideSubObject  HEAD02 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD01 WPN02
TransitionKey  TRANS_PRONE
End

;Prone Moving animation
ConditionState  RIDER2 MOVING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_CLA 12
AnimationMode  LOOP
HideSubObject  HEAD02 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD01 WPN02
TransitionKey  TRANS_PRONE_MOVING
End

;Prone Firing animation
ConditionState  RIDER2 FIRING_A
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ATD
AnimationMode  ONCE
Flags  START_FRAME_FIRST
HideSubObject  HEAD02 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD01 WPN02
TransitionKey  TRANS_PRONE_FIRING
End
AliasConditionState  RIDER2 FIRING_B
AliasConditionState  RIDER2 FIRING_C

;Prone Firing in between shots animation
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ATD
AnimationMode  ONCE
Flags  START_FRAME_LAST
HideSubObject  HEAD02 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD01 WPN02
TransitionKey  TRANS_PRONE_FIRING_BETWEEN_SHOTS
WaitForStateToFinishIfPossible  TRANS_PRONE_FIRING
End
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_B
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_C

;Prone Death animations
ConditionState  RIDER2 DYING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_DTB
AnimationMode  ONCE
HideSubObject  HEAD02 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD01 WPN02
TransitionKey  TRANS_DYING_PRONE
End

TransitionState  TRANS_DYING_PRONE TRANS_PRONE_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_PRONE_FLAILING
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End


;Parachute animation
ConditionState  RIDER1 FREEFALL
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState  RIDER1 PARACHUTING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey  TRANS_Chute
End
AliasConditionState  RIDER1 PARACHUTING DYING

TransitionState  TRANS_Falling TRANS_Chute
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End

TransitionState  TRANS_Chute TRANS_STAND
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PTD
AnimationMode  ONCE
End

End

; ***DESIGN parameters ***
DisplayName          OBJECT:MercenaryGunner
Side                 GLA
EditorSorting        SYSTEM
TransportSlotCount   1                 ;how many "slots" we take in a transport (0 == not transportable)

;Standing Stance Weapons
WeaponSet
Conditions             WEAPON_RIDER1
Weapon                 PRIMARY MercenaryAssaultRifleWeapon
ShareWeaponReloadTime  Yes
End

WeaponSet
Conditions             WEAPON_RIDER1 PLAYER_UPGRADE
Weapon                 PRIMARY MercenaryAssaultRifleUpgradedWeapon
ShareWeaponReloadTime  Yes
End

;Prone Stance Weapons
WeaponSet
Conditions             WEAPON_RIDER2
Weapon                 PRIMARY MercenaryMachineGunWeapon
ShareWeaponReloadTime  Yes
End

WeaponSet
Conditions             WEAPON_RIDER2 PLAYER_UPGRADE
Weapon                 PRIMARY MercenaryMachineGunUpgradedWeapon
ShareWeaponReloadTime  Yes
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

Prerequisites
Object   GLABlackMarket
Science  SCIENCE_Mercenaries
End

VisionRange          200
ShroudClearingRange  225

BuildCost  600
BuildTime  4.0          ;in seconds

ExperienceValue      40 60  80  100  ;Experience point value at each level
ExperienceRequired   0  300 400 600  ;Experience points needed to gain each level
IsTrainable          Yes             ;Can gain experience
CrushableLevel       2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
;CommandSet           GLAInfantryMercenaryGunnerCommandSet

; *** AUDIO Parameters ***
VoiceSelect            MercenaryGunnerVoiceSelect
VoiceMove              MercenaryGunnerVoiceMove
VoiceGuard             MercenaryGunnerVoiceMove
VoiceAttack            MercenaryGunnerVoiceAttack
VoiceFear              MercenaryGunnerVoiceFear

UnitSpecificSounds
VoiceCreate          MercenaryGunnerVoiceCreate
VoiceGarrison        MercenaryGunnerVoiceMove
VoiceEnter           MercenaryGunnerVoiceMove
VoiceEnterHostile    MercenaryGunnerVoiceMove
VoiceGetHealed       MercenaryGunnerVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SCORE SALVAGER

Body  ActiveBody ModuleTag_02
MaxHealth        380.0
InitialHealth    380.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL ConscriptHumanLocomotor
Locomotor  SET_SUPERSONIC MercnaryGunnerProneLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;*************************************
;******Transformation Code Start******
;*************************************

Behavior  RiderChangeContain ModuleTag_Transform01

;;;;Standing Stance Mode
Rider1  GenericFakeRider1_Default_Rank  RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAInfantryMercenaryGunnerCommandSet SET_NORMAL

;;;;Prone Stance Mode
Rider2  GenericFakeRider2_Default_Rank  RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAInfantryMercenaryGunnerCommandSet SET_SUPERSONIC

;;;;Used only dirrectly after beeing dropped then use the above to after switching weapon at least once
Rider3  GenericFakeRider3_Default_Rank  RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAInfantryMercenaryGunnerInitialCommandSet SET_NORMAL

;Standard TransportContain stuff
Slots                  1
InitialPayload         GenericFakeRider3_Default_Rank 1
DamagePercentToUnits   100%
BurnedDeathToUnits     No
AllowInsideKindOf      CAN_ATTACK
ScuttleDelay           100
ScuttleStatus          TOPPLED
End

Behavior  GrantUpgradeCreate ModuleTag_Transform02
UpgradeToGrant      Upgrade_GLAWorkerRealCommandSet
End

Behavior  ProductionUpdate  ModuleTag_Transform03
MaxQueueEntries  1; So you can't build multiple upgrades in the same frame
End

;Primary Unit Mode Triggers

Behavior  FireWeaponCollide ModuleTag_Transform04
CollideWeapon   MercenaryGunnerSwitchToStandardMode
RequiredStatus  STATUS_RIDER2 HIJACKED
End

Behavior  ObjectCreationUpgrade ModuleTag_Transform05
UpgradeObject   OCL_GrenadierHEGrenadeMode
TriggeredBy     Upgrade_GLAWorkerRealCommandSet
End

Behavior  StatusBitsUpgrade ModuleTag_Transform06
TriggeredBy    Upgrade_GLAWorkerRealCommandSet
StatusToSet    HIJACKED
StatusToClear  REPULSOR
End

Behavior  MaxHealthUpgrade ModuleTag_Transform07
TriggeredBy     Upgrade_GLAWorkerRealCommandSet
AddMaxHealth    -200.0 ; This adds 500 hit points when i'm on the ground
ChangeType      PRESERVE_RATIO
ConflictsWith   Upgrade_ChinaOverlordGattlingCannon
End

;Secondary Unit Mode Triggers

Behavior  FireWeaponCollide  ModuleTag_Transform08
CollideWeapon   MercenaryGunnerSwitchToProneMode
RequiredStatus  STATUS_RIDER1 REPULSOR
End

Behavior  ObjectCreationUpgrade ModuleTag_Transform09
UpgradeObject   OCL_GrenadierAirburtGrenadeMode
TriggeredBy     Upgrade_GLAWorkerFakeCommandSet
End

Behavior  StatusBitsUpgrade ModuleTag_Transform10
TriggeredBy    Upgrade_GLAWorkerFakeCommandSet
StatusToSet    REPULSOR
StatusToClear  HIJACKED
End

Behavior  MaxHealthUpgrade ModuleTag_Transform11
TriggeredBy     Upgrade_GLAWorkerFakeCommandSet
AddMaxHealth    200.0 ; This removes 500 hit points when i'm in the air
ChangeType      PRESERVE_RATIO
End

;************************************
;******Transformation Code End*******
;************************************

Behavior  WeaponSetUpgrade ModuleTag_APBullets01
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_MercenaryGunnerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDie
OCL                  INITIAL OCL_GLAExplodedDeathMercGunner
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDieByFire
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDieByTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDieByFire
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDieByToxin
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_MercenaryGunnerDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathMercGunner
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MercenaryGunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MercenaryGunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryMercenaryGunner_Var2 GLAInfantryMercenaryGunner_Var1

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; ---- standing
DefaultConditionState
Model                UIMercGnr_SKN_C
IdleAnimation        RIShkTrp_SKL.RIShkTrp_STN 0 35
IdleAnimation        RIShkTrp_SKL.RIShkTrp_IDA
IdleAnimation        RIShkTrp_SKL.RIShkTrp_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponLaunchBone     PRIMARY Muzzle
HideSubObject        HEAD01 HEAD03
TransitionKey        TRANS_STAND
End
AliasConditionState    RIDER1

; ---- moving
ConditionState         RIDER1 MOVING
Animation            RIShkTrp_SKL.RIShkTrp_MVA 25
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_MOVING
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    RIDER1 MOVING ATTACKING


; ---- firing
ConditionState  RIDER1 FIRING_A
Animation  RIShkTrp_SKL.RIShkTrp_ASA
AnimationMode  ONCE
AnimationSpeedFactorRange  1.2 1.2
Flags  START_FRAME_FIRST
TransitionKey  TRANS_START_FIRING
End
AliasConditionState  RIDER1 BETWEEN_FIRING_SHOTS_A

ConditionState  RIDER1 USING_WEAPON_A
Animation  RIShkTrp_SKL.RIShkTrp_ASA
AnimationMode  ONCE
Flags  START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_START_FIRING
End
AliasConditionState  RIDER1 RELOADING_A

; ---- dying
ConditionState         RIDER1 DYING
Animation            RIShkTrp_SKL.RIShkTrp_DBA
AnimationMode        ONCE
TransitionKey        TRANS_DYING
End

TransitionState  TRANS_DYING TRANS_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_FLAILING
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

;Transition Animations

;Standing to Prone animation
TransitionState  TRANS_STAND TRANS_PRONE
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_SUA
AnimationMode  ONCE_BACKWARDS
HideSubObject  HEAD01 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD02 WPN02
Flags  MAINTAIN_FRAME_ACROSS_STATES
AnimationSpeedFactorRange  1.2 1.5
End

;Prone to Standing animation
TransitionState  TRANS_PRONE TRANS_STAND
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_SUA
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD03 BOX02 WPN02
ShowSubObject  BOX01 HEAD02 WPN01
Flags  MAINTAIN_FRAME_ACROSS_STATES
AnimationSpeedFactorRange  1.2 1.5
End



;Prone Animations

;Prone Idle animation
ConditionState   RIDER2
Model  UIMercGnr_SKN
IdleAnimation  AIPFDR_SKL.AIPFDR_STB 0 10
IdleAnimation  AIPFDR_SKL.AIPFDR_IDB
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD02 WPN02
TransitionKey  TRANS_PRONE
End

;Prone Moving animation
ConditionState  RIDER2 MOVING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_CLA 12
AnimationMode  LOOP
HideSubObject  HEAD01 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD02 WPN02
TransitionKey  TRANS_PRONE_MOVING
End

;Prone Firing animation
ConditionState  RIDER2 FIRING_A
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ATD
AnimationMode  ONCE
Flags  START_FRAME_FIRST
HideSubObject  HEAD01 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD02 WPN02
TransitionKey  TRANS_PRONE_FIRING
End
AliasConditionState  RIDER2 FIRING_B
AliasConditionState  RIDER2 FIRING_C

;Prone Firing in between shots animation
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ATD
AnimationMode  ONCE
Flags  START_FRAME_LAST
HideSubObject  HEAD01 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD02 WPN02
TransitionKey  TRANS_PRONE_FIRING_BETWEEN_SHOTS
WaitForStateToFinishIfPossible  TRANS_PRONE_FIRING
End
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_B
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_C

;Prone Death animations
ConditionState  RIDER2 DYING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_DTB
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD03 BOX01 WPN01
ShowSubObject  BOX02 HEAD02 WPN02
TransitionKey  TRANS_DYING_PRONE
End

TransitionState  TRANS_DYING_PRONE TRANS_PRONE_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_PRONE_FLAILING
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End


;Parachute animation
ConditionState  RIDER1 FREEFALL
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState  RIDER1 PARACHUTING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey  TRANS_Chute
End
AliasConditionState  RIDER1 PARACHUTING DYING

TransitionState  TRANS_Falling TRANS_Chute
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End

TransitionState  TRANS_Chute TRANS_STAND
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PTD
AnimationMode  ONCE
End

End

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryMercenaryGunner_Var3 GLAInfantryMercenaryGunner_Var1

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes



; ---- standing
DefaultConditionState
Model                UIMercGnr_SKN_C
IdleAnimation        RIShkTrp_SKL.RIShkTrp_STN 0 35
IdleAnimation        RIShkTrp_SKL.RIShkTrp_IDA
IdleAnimation        RIShkTrp_SKL.RIShkTrp_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponLaunchBone     PRIMARY Muzzle
HideSubObject        HEAD01 HEAD02
TransitionKey        TRANS_STAND
End
AliasConditionState    RIDER1

; ---- moving
ConditionState         RIDER1 MOVING
Animation            RIShkTrp_SKL.RIShkTrp_MVA 25
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_MOVING
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    RIDER1 MOVING ATTACKING


; ---- firing
ConditionState  RIDER1 FIRING_A
Animation  RIShkTrp_SKL.RIShkTrp_ASA
AnimationMode  ONCE
AnimationSpeedFactorRange  1.2 1.2
Flags  START_FRAME_FIRST
TransitionKey  TRANS_START_FIRING
End
AliasConditionState  RIDER1 BETWEEN_FIRING_SHOTS_A

ConditionState  RIDER1 USING_WEAPON_A
Animation  RIShkTrp_SKL.RIShkTrp_ASA
AnimationMode  ONCE
Flags  START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_START_FIRING
End
AliasConditionState  RIDER1 RELOADING_A

; ---- dying
ConditionState         RIDER1 DYING
Animation            RIShkTrp_SKL.RIShkTrp_DBA
AnimationMode        ONCE
TransitionKey        TRANS_DYING
End

TransitionState  TRANS_DYING TRANS_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_FLAILING
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

;Transition Animations

;Standing to Prone animation
TransitionState  TRANS_STAND TRANS_PRONE
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_SUA
AnimationMode  ONCE_BACKWARDS
HideSubObject  HEAD01 HEAD02 BOX01 WPN01
ShowSubObject  BOX02 HEAD03 WPN02
Flags  MAINTAIN_FRAME_ACROSS_STATES
AnimationSpeedFactorRange  1.2 1.5
End

;Prone to Standing animation
TransitionState  TRANS_PRONE TRANS_STAND
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_SUA
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD02 BOX02 WPN02
ShowSubObject  BOX01 HEAD03 WPN01
Flags  MAINTAIN_FRAME_ACROSS_STATES
AnimationSpeedFactorRange  1.2 1.5
End



;Prone Animations

;Prone Idle animation
ConditionState   RIDER2
Model  UIMercGnr_SKN
IdleAnimation  AIPFDR_SKL.AIPFDR_STB 0 10
IdleAnimation  AIPFDR_SKL.AIPFDR_IDB
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD02 BOX01 WPN01
ShowSubObject  BOX02 HEAD03 WPN02
TransitionKey  TRANS_PRONE
End

;Prone Moving animation
ConditionState  RIDER2 MOVING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_CLA 12
AnimationMode  LOOP
HideSubObject  HEAD01 HEAD02 BOX01 WPN01
ShowSubObject  BOX02 HEAD03 WPN02
TransitionKey  TRANS_PRONE_MOVING
End

;Prone Firing animation
ConditionState  RIDER2 FIRING_A
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ATD
AnimationMode  ONCE
Flags  START_FRAME_FIRST
HideSubObject  HEAD01 HEAD02 BOX01 WPN01
ShowSubObject  BOX02 HEAD03 WPN02
TransitionKey  TRANS_PRONE_FIRING
End
AliasConditionState  RIDER2 FIRING_B
AliasConditionState  RIDER2 FIRING_C

;Prone Firing in between shots animation
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ATD
AnimationMode  ONCE
Flags  START_FRAME_LAST
HideSubObject  HEAD01 HEAD02 BOX01 WPN01
ShowSubObject  BOX02 HEAD03 WPN02
TransitionKey  TRANS_PRONE_FIRING_BETWEEN_SHOTS
WaitForStateToFinishIfPossible  TRANS_PRONE_FIRING
End
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_B
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_C

;Prone Death animations
ConditionState  RIDER2 DYING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_DTB
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD02 BOX01 WPN01
ShowSubObject  BOX02 HEAD03 WPN02
TransitionKey  TRANS_DYING_PRONE
End

TransitionState  TRANS_DYING_PRONE TRANS_PRONE_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_PRONE_FLAILING
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End


;Parachute animation
ConditionState  RIDER1 FREEFALL
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState  RIDER1 PARACHUTING
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey  TRANS_Chute
End
AliasConditionState  RIDER1 PARACHUTING DYING

TransitionState  TRANS_Falling TRANS_Chute
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End

TransitionState  TRANS_Chute TRANS_STAND
Model  UIMercGnr_SKN
Animation  AIPFDR_SKL.AIPFDR_PTD
AnimationMode  ONCE
End

End

End
;------------------------------------------------------------------------------
Object GLAInfantryMercenaryRunner
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUMercenaryRunner_L
ButtonImage              SUMercenaryRunner

Draw  W3DModelDraw ModuleTag_01
DefaultConditionState
Model                UIMercRnr_SKN_B
IdleAnimation        AIPFDR_SKL.AIPFDR_STA
AnimationMode        ONCE
End
End

; set cost and time fields here or else they won't work
BuildCost  250
BuildTime  4.0          ;in seconds

Prerequisites
End

Side  GLA
EditorSorting  INFANTRY
BuildVariations   GLAInfantryMercenaryRunner_Var1 GLAInfantryMercenaryRunner_Var2 GLAInfantryMercenaryRunner_Var3

KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SCORE SALVAGER

End

;------------------------------------------------------------------------------
Object GLAInfantryMercenaryRunner_Var1
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUMercenaryRunner_L
ButtonImage              SUMercenaryRunner

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model  UIMercRnr_SKN_B
IdleAnimation  AIPFDR_SKL.AIPFDR_STA
IdleAnimation  AIPFDR_SKL.AIPFDR_IDA
AnimationMode  ONCE
HideSubObject  HEAD02 HEAD03
WeaponFireFXBone  PRIMARY Muzzle
WeaponLaunchBone  PRIMARY Muzzle
TransitionKey  TRANS_Standing
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  AIPFDR_SKL.AIPFDR_RNA 25
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_Standing
ParticleSysBone    None InfantryDustTrails
End
AliasConditionState    RIDER1 MOVING ATTACKING

ConditionState   RIDER1 FIRING_A
Animation      AIPFDR_SKL.AIPFDR_ATC
AnimationMode  ONCE
TransitionKey  TRANS_FiringA
End
AliasConditionState  RIDER1 FIRING_A MOVING

ConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A
Animation      AIPFDR_SKL.AIPFDR_ATBST
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RIDER1 RELOADING_A

ConditionState  RIDER1 DYING
Animation  AIPFDR_SKL.AIPFDR_DTA
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  RIDER1 FREEFALL
Animation  AIPFDR_SKL.AIPFDR_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState  RIDER1 PARACHUTING
Animation  AIPFDR_SKL.AIPFDR_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING DYING


TransitionState  TRANS_Falling TRANS_Chute
Animation  AIPFDR_SKL.AIPFDR_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End

TransitionState  TRANS_Chute TRANS_Standing
Animation  AIPFDR_SKL.AIPFDR_PTD
AnimationMode  ONCE
End

;Machette animations

; ---- standing
ConditionState          RIDER2
Model                UIMercRnr_SKN
IdleAnimation        UIMerc_SKL.UIMerc_IDA 0 15
IdleAnimation        UIMerc_SKL.UIMerc_IDB
IdleAnimation        UIMerc_SKL.UIMerc_IDC
AnimationMode        ONCE
TransitionKey        TRANS_RIDER2_STANDING
End

; ---- moving
ConditionState         RIDER2 MOVING
Model                UIMercRnr_SKN
Animation            UIMerc_SKL.UIMerc_RNA 25
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_RIDER2_MOVING
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    RIDER2 MOVING ATTACKING

; ---- machette attack
ConditionState  RIDER2 PREATTACK_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATA
AnimationMode  ONCE
End

ConditionState  RIDER2 FIRING_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
TransitionKey  TRANS_RIDER2_START_FIRING
End

ConditionState  RIDER2 USING_WEAPON_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_IDA
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_RIDER2_START_FIRING
End
AliasConditionState  RIDER2 RELOADING_A
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_RIDER2_RELOADING TRANS_RIDER2_STANDING
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
End

TransitionState  TRANS_RIDER2_START_FIRING TRANS_RIDER2_STANDING
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
End

; ---- dying
ConditionState         RIDER2 DYING
Model                UIMercRnr_SKN
Animation            UIMerc_SKL.UIMerc_DTA
Animation            UIMerc_SKL.UIMerc_DTB
AnimationMode        ONCE
TransitionKey        TRANS_RIDER2_DYING
End

TransitionState  TRANS_RIDER2_DYING TRANS_RIDER2_FLAILING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_RIDER2_FLAILING
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

End

; ***DESIGN parameters ***
DisplayName          OBJECT:MercenaryRunner
Side                 GLA
EditorSorting        SYSTEM
TransportSlotCount   1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions         WEAPON_RIDER1
Weapon             PRIMARY   MercenaryRunnerShotgunWeapon
ShareWeaponReloadTime  Yes
End

WeaponSet
Conditions         WEAPON_RIDER1 PLAYER_UPGRADE
Weapon             PRIMARY   MercenaryRunnerShotgunUpgradedWeapon
ShareWeaponReloadTime  Yes
End

WeaponSet
Conditions         WEAPON_RIDER2
Weapon             PRIMARY   MercenaryMachetteKnifeAttack
ShareWeaponReloadTime  Yes
End

WeaponSet
Conditions         WEAPON_RIDER2 PLAYER_UPGRADE
Weapon             PRIMARY   MercenaryMachetteKnifeAttack
ShareWeaponReloadTime  Yes
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

Prerequisites
Science  SCIENCE_Mercenaries
End

VisionRange          150
ShroudClearingRange  200

BuildCost  250
BuildTime  4.0          ;in seconds

ExperienceValue      40 60  80  100  ;Experience point value at each level
ExperienceRequired   0  300 400 600  ;Experience points needed to gain each level
IsTrainable          Yes             ;Can gain experience
CrushableLevel       2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect            MercenaryRunnerVoiceSelect
VoiceMove              MercenaryRunnerVoiceMove
VoiceGuard             MercenaryRunnerVoiceMove
VoiceAttack            MercenaryRunnerVoiceAttack
VoiceFear              MercenaryRunnerVoiceFear

UnitSpecificSounds
VoiceSubdue          MercenaryRunnerVoiceAttackMachete
VoiceCreate          MercenaryRunnerVoiceCreate
VoiceGarrison        MercenaryRunnerVoiceGarrison
VoiceEnter           MercenaryRunnerVoiceMove
VoiceEnterHostile    MercenaryRunnerVoiceMove
VoiceGetHealed       MercenaryRunnerVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SCORE SALVAGER

Body  ActiveBody ModuleTag_02
MaxHealth        150.0
InitialHealth    150.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Locomotor  SET_NORMAL ConscriptHumanLocomotor
Locomotor  SET_SUPERSONIC MercenaryMachetteLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;*************************************
;******Transformation Code Start********
;*************************************

Behavior  RiderChangeContain ModuleTag_Transform01

;;;;Normal Rank
Rider1  GenericFakeRider1_Default_Rank  RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAInfantryMercenaryRunnerCommandSet SET_NORMAL
Rider2  GenericFakeRider2_Default_Rank  RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAInfantryMercenaryRunnerCommandSet SET_SUPERSONIC

;Standard TransportContain stuff
Slots                  1
InitialPayload         GenericFakeRider2_Default_Rank 1
DamagePercentToUnits   100%
BurnedDeathToUnits     No
AllowInsideKindOf      CAN_ATTACK
ScuttleDelay           100
ScuttleStatus          TOPPLED
End

Behavior  ProductionUpdate  ModuleTag_Transform02
MaxQueueEntries  1; So you can't build multiple upgrades in the same frame
End

Behavior  GrantUpgradeCreate ModuleTag_Transform03
UpgradeToGrant      Upgrade_GLAWorkerFakeCommandSet
End

;Primary Unit Mode Triggers

Behavior  FireWeaponCollide ModuleTag_Transform05
CollideWeapon    MercenaryRunnerSwitchToShotgun
RequiredStatus   STATUS_RIDER2 HIJACKED
End

Behavior  StatusBitsUpgrade ModuleTag_Transform006
TriggeredBy    Upgrade_GLAWorkerRealCommandSet
StatusToSet    HIJACKED
StatusToClear  REPULSOR
End

Behavior  ObjectCreationUpgrade ModuleTag_Transform07
UpgradeObject    OCL_MercenaryStandardMode
TriggeredBy      Upgrade_GLAWorkerRealCommandSet
End

Behavior  MaxHealthUpgrade ModuleTag_Transform08
TriggeredBy    Upgrade_GLAWorkerRealCommandSet
AddMaxHealth   -250.0 ; This adds 500 hit points when i'm on the ground
ChangeType     PRESERVE_RATIO
End

;Secondary Unit Mode Triggers

Behavior  FireWeaponCollide  ModuleTag_Transform09
CollideWeapon    MercenaryRunnerSwitchToMachete
RequiredStatus   STATUS_RIDER1 REPULSOR
End

Behavior  StatusBitsUpgrade ModuleTag_Transform10
TriggeredBy    Upgrade_GLAWorkerFakeCommandSet
StatusToSet    REPULSOR
StatusToClear  HIJACKED
End

Behavior  ObjectCreationUpgrade ModuleTag_Transform11
UpgradeObject    OCL_MercenaryMachetteMode
TriggeredBy      Upgrade_GLAWorkerFakeCommandSet
End

Behavior  MaxHealthUpgrade ModuleTag_Transform12
TriggeredBy    Upgrade_GLAWorkerFakeCommandSet
AddMaxHealth   250.0 ; This removes 500 hit points when i'm in the air
ChangeType     PRESERVE_RATIO
End

;************************************
;******Transformation Code End********
;************************************

;  Behavior  SquishCollide ModuleTag_11
;  End

Behavior  WeaponSetUpgrade ModuleTag_APBullets01
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
ForbiddenStatus              STATUS_RIDER2 ;running around screaming with a machete is not exactly stealthy afterall
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_MercenaryRunnerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
ProbabilityModifier  50
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDie
OCL                  INITIAL OCL_GLAExplodedDeathMercRunnerOne
End
Behavior  SlowDeathBehavior ModuleTag_Death03524
DeathTypes           NONE +EXPLODED
ProbabilityModifier  50
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDie
OCL                  INITIAL OCL_GLAExplodedDeathMercRunnerTwo
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDieByFire
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDieByTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDieByFire
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDieByToxin
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_MercenaryRunnerDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathMercRunnerOne
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MercenaryRunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MercenaryRunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryMercenaryRunner_Var2 GLAInfantryMercenaryRunner_Var1

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model  UIMercRnr_SKN_B
IdleAnimation  AIPFDR_SKL.AIPFDR_STA
IdleAnimation  AIPFDR_SKL.AIPFDR_IDA
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD03
WeaponFireFXBone  PRIMARY Muzzle
WeaponLaunchBone  PRIMARY Muzzle
TransitionKey  TRANS_Standing
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  AIPFDR_SKL.AIPFDR_RNA 25
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_Standing
ParticleSysBone    None InfantryDustTrails
End
AliasConditionState    RIDER1 MOVING ATTACKING

ConditionState   RIDER1 FIRING_A
Animation      AIPFDR_SKL.AIPFDR_ATC
AnimationMode  ONCE
TransitionKey  TRANS_FiringA
End
AliasConditionState  RIDER1 FIRING_A MOVING

ConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A
Animation      AIPFDR_SKL.AIPFDR_ATBST
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RIDER1 RELOADING_A

ConditionState  RIDER1 DYING
Animation  AIPFDR_SKL.AIPFDR_DTA
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  RIDER1 FREEFALL
Animation  AIPFDR_SKL.AIPFDR_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState  RIDER1 PARACHUTING
Animation  AIPFDR_SKL.AIPFDR_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING DYING


TransitionState  TRANS_Falling TRANS_Chute
Animation  AIPFDR_SKL.AIPFDR_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End

TransitionState  TRANS_Chute TRANS_Standing
Animation  AIPFDR_SKL.AIPFDR_PTD
AnimationMode  ONCE
End

;Machette animations

; ---- standing
ConditionState          RIDER2
Model                UIMercRnr_SKN
IdleAnimation        UIMerc_SKL.UIMerc_IDA 0 15
IdleAnimation        UIMerc_SKL.UIMerc_IDB
IdleAnimation        UIMerc_SKL.UIMerc_IDC
AnimationMode        ONCE
TransitionKey        TRANS_RIDER2_STANDING
End

; ---- moving
ConditionState         RIDER2 MOVING
Model                UIMercRnr_SKN
Animation            UIMerc_SKL.UIMerc_RNA 25
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_RIDER2_MOVING
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    RIDER2 MOVING ATTACKING

; ---- machette attack
ConditionState  RIDER2 PREATTACK_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATA
AnimationMode  ONCE
End

ConditionState  RIDER2 FIRING_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
TransitionKey  TRANS_RIDER2_START_FIRING
End

ConditionState  RIDER2 USING_WEAPON_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_IDA
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_RIDER2_START_FIRING
End
AliasConditionState  RIDER2 RELOADING_A
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_RIDER2_RELOADING TRANS_RIDER2_STANDING
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
End

TransitionState  TRANS_RIDER2_START_FIRING TRANS_RIDER2_STANDING
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
End

; ---- dying
ConditionState         RIDER2 DYING
Model                UIMercRnr_SKN
Animation            UIMerc_SKL.UIMerc_DTA
Animation            UIMerc_SKL.UIMerc_DTB
AnimationMode        ONCE
TransitionKey        TRANS_RIDER2_DYING
End

TransitionState  TRANS_RIDER2_DYING TRANS_RIDER2_FLAILING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_RIDER2_FLAILING
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

End

End

;------------------------------------------------------------------------------
ObjectReskin GLAInfantryMercenaryRunner_Var3 GLAInfantryMercenaryRunner_Var1

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model  UIMercRnr_SKN_B
IdleAnimation  AIPFDR_SKL.AIPFDR_STA
IdleAnimation  AIPFDR_SKL.AIPFDR_IDA
AnimationMode  ONCE
HideSubObject  HEAD01 HEAD02
WeaponFireFXBone  PRIMARY Muzzle
WeaponLaunchBone  PRIMARY Muzzle
TransitionKey  TRANS_Standing
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  AIPFDR_SKL.AIPFDR_RNA 25
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_Standing
ParticleSysBone    None InfantryDustTrails
End
AliasConditionState    RIDER1 MOVING ATTACKING

ConditionState   RIDER1 FIRING_A
Animation      AIPFDR_SKL.AIPFDR_ATC
AnimationMode  ONCE
TransitionKey  TRANS_FiringA
End
AliasConditionState  RIDER1 FIRING_A MOVING

ConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A
Animation      AIPFDR_SKL.AIPFDR_ATBST
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RIDER1 RELOADING_A

ConditionState  RIDER1 DYING
Animation  AIPFDR_SKL.AIPFDR_DTA
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  AIPFDR_SKL.AIPFDR_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  AIPFDR_SKL.AIPFDR_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  AIPFDR_SKL.AIPFDR_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  RIDER1 FREEFALL
Animation  AIPFDR_SKL.AIPFDR_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState  RIDER1 PARACHUTING
Animation  AIPFDR_SKL.AIPFDR_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING DYING


TransitionState  TRANS_Falling TRANS_Chute
Animation  AIPFDR_SKL.AIPFDR_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME
End

TransitionState  TRANS_Chute TRANS_Standing
Animation  AIPFDR_SKL.AIPFDR_PTD
AnimationMode  ONCE
End

;Machette animations

; ---- standing
ConditionState          RIDER2
Model                UIMercRnr_SKN
IdleAnimation        UIMerc_SKL.UIMerc_IDA 0 15
IdleAnimation        UIMerc_SKL.UIMerc_IDB
IdleAnimation        UIMerc_SKL.UIMerc_IDC
AnimationMode        ONCE
TransitionKey        TRANS_RIDER2_STANDING
End

; ---- moving
ConditionState         RIDER2 MOVING
Model                UIMercRnr_SKN
Animation            UIMerc_SKL.UIMerc_RNA 25
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_RIDER2_MOVING
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    RIDER2 MOVING ATTACKING

; ---- machette attack
ConditionState  RIDER2 PREATTACK_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATA
AnimationMode  ONCE
End

ConditionState  RIDER2 FIRING_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
TransitionKey  TRANS_RIDER2_START_FIRING
End

ConditionState  RIDER2 USING_WEAPON_A
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_IDA
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_RIDER2_START_FIRING
End
AliasConditionState  RIDER2 RELOADING_A
AliasConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_RIDER2_RELOADING TRANS_RIDER2_STANDING
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
End

TransitionState  TRANS_RIDER2_START_FIRING TRANS_RIDER2_STANDING
Model  UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ATB
AnimationMode  ONCE
End

; ---- dying
ConditionState         RIDER2 DYING
Model                UIMercRnr_SKN
Animation            UIMerc_SKL.UIMerc_DTA
Animation            UIMerc_SKL.UIMerc_DTB
AnimationMode        ONCE
TransitionKey        TRANS_RIDER2_DYING
End

TransitionState  TRANS_RIDER2_DYING TRANS_RIDER2_FLAILING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_RIDER2_FLAILING
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Model      UIMercRnr_SKN
Animation  UIMerc_SKL.UIMerc_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

End

End
;----------------------------------------------------------------------------
Object GLAInfantryPartisan
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUPartisan_L
ButtonImage             SUPartisan

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; --- idle
DefaultConditionState
Model              UIPrtisn_SKN
IdleAnimation      UIPART2_SKL.UIPART2_STA 0 5
IdleAnimation      UIPART2_SKL.UIPART2_IDA
IdleAnimation      UIPART2_SKL.UIPART2_IDB
AnimationMode      ONCE
WeaponFireFXBone   PRIMARY Muzzle
WeaponLaunchBone   PRIMARY Muzzle
TransitionKey      TRANS_Stand
End

; --- attack

ConditionState       FIRING_A
Animation          UIPART2_SKL.UIPART2_ATA
AnimationMode      ONCE
TransitionKey      TRANS_FiringA
WaitForStateToFinishIfPossible  None
End

ConditionState       BETWEEN_FIRING_SHOTS_A
Animation          UIPART2_SKL.UIPART2_ATA
AnimationMode      MANUAL
Flags              START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_FiringA
End
AliasConditionState  RELOADING_A
AliasConditionState  PREATTACK_A

; --- radio receiver animations

ConditionState       PREATTACK_C
Model              UIPrtisn_SKN_B
Animation          UIPART2_SKL.UIPrtisn_DPL
AnimationMode      ONCE
End

ConditionState       USING_WEAPON_C
Model              UIPrtisn_SKN_B
Animation          UIPART2_SKL.UIPrtisn_USE
AnimationMode      LOOP
TransitionKey      TRANS_FiringC
WaitForStateToFinishIfPossible  None
End

TransitionState      TRANS_FiringC TRANS_Stand
Animation          UIPART2_SKL.UIPrtisn_DPL
AnimationMode      ONCE_BACKWARDS
End

; --- moving
ConditionState       MOVING
Animation          UIPART2_SKL.UIPART2_RNA 48
AnimationMode      LOOP
Flags              RANDOMSTART
TransitionKey      Trans_Moving
ParticleSysBone    None InfantryDustTrails
WaitForStateToFinishIfPossible  None
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
AliasConditionState  MOVING RELOADING_A

; --- cheering
ConditionState       SPECIAL_CHEERING
Animation          UIPART2_SKL.UIPART2_CHA
AnimationMode      LOOP
End

; --- dying
ConditionState       DYING
Animation          UIPART2_SKL.UIPART2_DTA
Animation          UIPART2_SKL.UIPART2_DTB
AnimationMode      ONCE
TransitionKey      TRANS_Dying
WaitForStateToFinishIfPossible  None
End

TransitionState      TRANS_Dying TRANS_Flailing
Animation          UIPART2_SKL.UIPART2_ADTC1
AnimationMode      ONCE
End

ConditionState       DYING EXPLODED_FLAILING
Animation          UIPART2_SKL.UIPART2_ADTC2
AnimationMode      LOOP
TransitionKey      TRANS_Flailing
End

ConditionState       DYING EXPLODED_BOUNCING
Animation          UIPART2_SKL.UIPART2_ADTC3
AnimationMode      ONCE
TransitionKey      TRANS_Dying_Exploded
End

; --- falling
ConditionState       FREEFALL
Animation          UIPART2_SKL.UIPART2_PFL
AnimationMode      LOOP
TransitionKey      TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState       PARACHUTING
Animation          UIPART2_SKL.UIPART2_PHG
AnimationMode      LOOP
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
TransitionKey      TRANS_Chute
End
AliasConditionState  PARACHUTING DYING

TransitionState      TRANS_Falling TRANS_Chute
Animation          UIPART2_SKL.UIPART2_POP
AnimationMode      ONCE
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState      TRANS_Chute TRANS_Stand
Animation          UIPART2_SKL.UIPART2_PTD
AnimationMode      ONCE
End

End

; ***DESIGN parameters ***
DisplayName            OBJECT:Partisan
Side                   GLA
EditorSorting          INFANTRY
TransportSlotCount     1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon             PRIMARY   GLAPartisanRifle
Weapon             TERTIARY  GLAPartisanRadioReceiver
AutoChooseSources  TERTIARY  NONE
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon             PRIMARY   GLAPartisanRifleUpgraded
Weapon             TERTIARY  GLAPartisanRadioReceiver
AutoChooseSources  TERTIARY  NONE
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange          250
ShroudClearingRange  275

Prerequisites
Object GLAPalace
Science SCIENCE_GlaInformant
End

BuildCost  450
BuildTime  10.0          ;in seconds

ExperienceValue      40 40 60  80    ;Experience point value at each level
ExperienceRequired   0  50 100 200   ;Experience points needed to gain each level
IsTrainable          Yes             ;Can gain experience
CrushableLevel       0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet           GLAInfantryPartisanCommandSet

; *** AUDIO Parameters ***
VoiceSelect      PartisanVoiceSelect
VoiceMove        PartisanVoiceMove
VoiceGuard       PartisanVoiceMove
VoiceAttack      PartisanVoiceAttack
VoiceFear        PartisanVoiceFear

UnitSpecificSounds
VoiceCreate           PartisanVoiceCreate
VoiceGarrison         PartisanVoiceGarrison
VoiceEnter            PartisanVoiceMove
VoiceEnterHostile     PartisanVoiceMove
VoiceGetHealed        PartisanVoiceMove
End


; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL JarmenKellLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

Behavior  WeaponSetUpgrade ModuleTag_08
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  SquishCollide ModuleTag_09
;nothing
End

Behavior  ProductionUpdate ModuleTag_DetectionRange01
MaxQueueEntries  1
End

Behavior  ObjectCreationUpgrade ModuleTag_DetectionRange02
UpgradeObject  OCL_GenericStealthDetectionRangeIndicatorTimer
TriggeredBy    Upgrade_GLAWorkerFakeCommandSet
End

Behavior  FireWeaponWhenDamagedBehavior ModuleTag_DetectionRange03
StartsActive   No
TriggeredBy    Upgrade_GLAWorkerFakeCommandSet
DamageTypes    ALL
DamageAmount   0    ;Effectively all the time when set to zero which we want in this case
ContinuousWeaponPristine       PartisanDetecionRangeIndicatorDecalWeapon
ContinuousWeaponDamaged        PartisanDetecionRangeIndicatorDecalWeapon
ContinuousWeaponReallyDamaged  PartisanDetecionRangeIndicatorDecalWeapon
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2600
ForbiddenStatus              DETECTED
FriendlyOpacityMin           30.0%
FriendlyOpacityMax           80.0%
PulseFrequency               500
InnateStealth                Yes
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_PartisanDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
ProbabilityModifier  50
DestructionDelay     0
FX                   INITIAL FX_PartisanDie
OCL                  INITIAL OCL_GLAExplodedDeathPartisanOne
End
Behavior  SlowDeathBehavior ModuleTag_Death035232
DeathTypes           NONE +EXPLODED
ProbabilityModifier  50
DestructionDelay     0
FX                   INITIAL FX_PartisanDie
OCL                  INITIAL OCL_GLAExplodedDeathPartisanTwo
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_PartisanDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathPartisanTwo
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_14
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAPartisanDetectionRangeIndicatorDecalObject

Draw                     W3DModelDraw ModuleTag_01
DefaultConditionState
Model                EXBlackout
End
End

; ***DESIGN parameters ***
EditorSorting     SYSTEM
TransportSlotCount  1

ArmorSet
Conditions      None
Armor           InvulnerableAllArmor
End

; *** ENGINEERING Parameters ***
KindOf  PRELOAD CAN_CAST_REFLECTIONS CLICK_THROUGH NO_COLLIDE FS_FAKE
Body             StructureBody ModuleTag_02
MaxHealth        10.0
InitialHealth    10.0
End

Behavior              DestroyDie ModuleTag_04
End

Behavior  DeletionUpdate ModuleTag_0345
MinLifetime  33
MaxLifetime  33
End

;Geometry             BOX
;GeometryMajorRadius  500.0
;GeometryMinorRadius  500.0
;GeometryHeight       20.0
;GeometryIsSmall      Yes
Scale                50.0
ShadowTexture  SCCDetection
ShadowSizeX  520
ShadowSizeY  520

End
;------------------------------------------------------------------------------
Object GLAInfantryRPGInsurgent
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUFanaticRPG_L
ButtonImage             SUFanaticRPG

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

DefaultConditionState
Model  UIRPGFntc_SKN
IdleAnimation  UITunF_SKL.UITunF_STA 0 20
IdleAnimation  UITunF_SKL.UITunF_IDA
IdleAnimation  UITunF_SKL.UITunF_IDB
IdleAnimation  UITunF_SKL.UITunF_IDC
AnimationMode  ONCE
HideSubObject  WARHEADUP
WeaponFireFXBone  PRIMARY Muzzle
WeaponLaunchBone  PRIMARY Muzzle
WeaponFireFXBone  SECONDARY Muzzle
WeaponLaunchBone  SECONDARY Muzzle
End

ConditionState  MOVING
Animation  UITunF_SKL.UITunF_WKA 16
Animation  UITunF_SKL.UITunF_WKB 30
Animation  UITunF_SKL.UITunF_WKC 30
Animation  UITunF_SKL.UITunF_RNA 15
Animation  UITunF_SKL.UITunF_RNB 25
AnimationMode  LOOP
ParticleSysBone    None InfantryDustTrails
End

ConditionState  DYING
Animation  UITunF_SKL.UITunF_DTA
Animation  UITunF_SKL.UITunF_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UITunF_SKL.UITunF_ADTA1
Animation  UITunF_SKL.UITunF_ADTE1
Animation  UITunF_SKL.UITunF_ADTF1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UITunF_SKL.UITunF_ADTA2
Animation  UITunF_SKL.UITunF_ADTE2
Animation  UITunF_SKL.UITunF_ADTF2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UITunF_SKL.UITunF_ADTA3
Animation  UITunF_SKL.UITunF_ADTE3
Animation  UITunF_SKL.UITunF_ADTF3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  FIRING_A
Animation  UITunF_SKL.UITunF_ATA
AnimationMode  ONCE
TransitionKey  TRANS_START_FIRING
End
ConditionState  BETWEEN_FIRING_SHOTS_A
Animation  UITunF_SKL.UITunF_STA
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_START_FIRING
End
AliasConditionState  RELOADING_A

ConditionState  FIRING_B
Animation  UITunF_SKL.UITunF_ATB
AnimationMode  ONCE
TransitionKey  TRANS_START_FIRING_B
End
ConditionState  BETWEEN_FIRING_SHOTS_B
Animation  UITunF_SKL.UITunF_ATB
AnimationMode  ONCE
Flags  START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_START_FIRING_B
End
AliasConditionState  RELOADING_B

ConditionState  SPECIAL_CHEERING
Animation  UITUNF_SKL.UITUNF_CHA
AnimationMode  LOOP
End

End

; ***DESIGN parameters ***
DisplayName       OBJECT:RPGFanatic
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY   FanaticRocketWeapon
Weapon  SECONDARY FanaticRocketWeaponAir
PreferredAgainst  SECONDARY AIRCRAFT
ShareWeaponReloadTime  Yes
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY   FanaticRocketWeaponUpgraded
Weapon  SECONDARY FanaticRocketWeaponAirUpgraded
PreferredAgainst  SECONDARY AIRCRAFT
ShareWeaponReloadTime  Yes
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End
VisionRange          225
ShroudClearingRange  250

BuildCost  250
BuildTime  5.0          ;in seconds

ExperienceValue  20 20 40 60    ;Experience point value at each level
ExperienceRequired  0 100 200 400  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet       GLAInfantryTunnelDefenderCommandSet

; *** AUDIO Parameters ***
VoiceSelect  RPGTrooperVoiceSelect
VoiceMove  RPGTrooperVoiceMove
VoiceGuard  RPGTrooperVoiceMove
VoiceAttack  RPGTrooperVoiceAttack
VoiceAttackAir  RPGTrooperVoiceAttack
VoiceFear  RPGTrooperVoiceFear

UnitSpecificSounds
VoiceCreate           RPGTrooperVoiceCreate
VoiceGarrison  RPGTrooperVoiceGarrison
VoiceEnter  RPGTrooperVoiceMove
VoiceEnterHostile  RPGTrooperVoiceMove
VoiceGetHealed       RPGTrooperVoiceMove
End


; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL MissileDefenderLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  SquishCollide ModuleTag_06
;nothing
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RPGTrooperDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_GLAExplodedDeathRPGInsurgent
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathRPGInsurgent
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperSurrender
OCL                  INITIAL OCL_TunnelDefenderSurrendering
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_12
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
MoveThresholdSpeed           3
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End

Behavior  WeaponSetUpgrade ModuleTag_08231
TriggeredBy  Upgrade_GLAAPRockets
End

Behavior  CommandSetUpgrade ModuleTag_SuicidePack02
CommandSet   GLAInfantryTunnelDefenderUpgradedCommandSet
TriggeredBy  Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  SpecialAbility ModuleTag_07
SpecialPowerTemplate  SpecialAbilityTankHunterTNTAttack
UpdateModuleStartsAttack  Yes
InitiateSound  RPGTrooperVoiceAttackTNT
End

Behavior  SpecialAbilityUpdate ModuleTag_08
SpecialPowerTemplate  SpecialAbilityTankHunterTNTAttack
StartAbilityRange  2.5
PreparationTime  0
SpecialObject  TNTStickyBomb
MaxSpecialObjects  8
SpecialObjectsPersistWhenOwnerDies  No ;Charges are removed instantly when owner dies (nobody can detonate).
SpecialObjectsPersistent  Yes          ;Charges are persistent till lifetime expires or owner detonates them.
UniqueSpecialObjectTargets  Yes        ;This prevents multiple charges placed on the same object.
FleeRangeAfterCompletion  100.0        ;Runs away after finishing ability
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryRPGInsurgentSurrenderCrate
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; --- Idle
DefaultConditionState
Model              UIRPGFntc_SKN
Animation          UITunF_SKL.UITunF_SUR
AnimationMode      ONCE
HideSubObject      WARHEADUP
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
Animation          UITunF_SKL.UITunF_SST
AnimationMode      LOOP
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End

; --- dying anims
ConditionState       RUBBLE
Animation          UITunF_SKL.UITunF_DTA
Animation          UITunF_SKL.UITunF_DTB
AnimationMode      ONCE
TransitionKey      None
AnimationSpeedFactorRange  1.5 2.0
End

End

Draw  W3DModelDraw ModuleTag_SurrenderFlag01
DefaultConditionState
Model              EXSurndr_B
Animation          EXSurndr_B.EXSurndr_B
AnimationMode      ONCE
HideSubObject      FLAG
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
ShowSubObject      FLAG
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End
ConditionState       RUBBLE
Animation          NONE
End
End

; ***DESIGN parameters ***
Side             GLA
EditorSorting    SYSTEM

WeaponSet
Conditions           None
Weapon               SECONDARY SuicideUnresistableWeapon
End

ArmorSet
Conditions       None
Armor            POWArmor
DamageFX         InfantryDamageFX
End

ExperienceValue      0 0 0 0
ExperienceRequired   0 0 0 0
IsTrainable      Yes
CrushableLevel   0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** ENGINEERING Parameters ***
KindOf  INFANTRY UNATTACKABLE CAN_ATTACK

Body  ActiveBody ModuleTag_03
MaxHealth        100.0
InitialHealth    10.0
End

Behavior  AIUpdateInterface ModuleTag_03232
End

Behavior  OCLUpdate ModuleTag_ReviveTrigger01
MinDelay      30000
MaxDelay      33000
OCL           OCL_CreateRealFortress
End

Behavior  UnitCrateCollide ModuleTag_02
UnitCount  1
UnitName  AmericanCIAInteligenceObject
RequiredKindOf  CAN_RAPPEL  ;Rangers only
HumanOnly  No
BuildingPickup  No
PickupScience  SCIENCE_CapturePrisoners ;Requires the rangers to have this upgrade
ForbidOwnerPlayer  Yes
ExecuteFX  FX_PrisonerCratePickup
ExecuteAnimation  PrisonerCaptured
ExecuteAnimationTime    4.0    ; In seconds
ExecuteAnimationZRise   15.0   ; Z world units per second to rise
ExecuteAnimationFades   Yes    ; Animation does/doesn't fade out
End

Behavior  TransportContain ModuleTag_Loaded01
Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
AllowInsideKindOf      NO_COLLIDE
End

Behavior  SquishCollide ModuleTag_Crush01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Revive01
DeathTypes           NONE +SUICIDED
DestructionDelay     0
End
Behavior  CreateObjectDie ModuleTag_Revive02
DeathTypes  NONE +SUICIDED
CreationList  OCL_SurrenderedRPGInsurgentRevive
TransferPreviousHealth  Yes
End

Behavior  SubObjectsUpgrade ModuleTag_APRocketVissual01
TriggeredBy     Upgrade_GLAAPRockets
ShowSubObjects  WARHEADUP
End

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -SUICIDED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RPGTrooperDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_GLAExplodedDeathRPGInsurgent
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathRPGInsurgent
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

;Geometry  BOX
;GeometryMajorRadius  5.0
;GeometryMinorRadius  5.0
;GeometryHeight  7.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  18;
ShadowSizeY  18;
ShadowTexture  EXPowDcl;

End
;------------------------------------------------------------------------------
Object GLAInfantryStingerSiteSoldier
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUStingerSoldier_L
ButtonImage              SUStingerSoldier

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

ConditionState  NONE
Model  UISmsd_SKN
IdleAnimation  UISmsd_SKL.UISmsd_STA 0 45
IdleAnimation  UISmsd_SKL.UISmsd_IDA
IdleAnimation  UISmsd_SKL.UISmsd_IDB
IdleAnimation  UISmsd_SKL.UISmsd_IDC
IdleAnimation  UISmsd_SKL.UISmsd_IDD
AnimationMode  ONCE
End
AliasConditionState  MOVING

;Firing Rockets
ConditionState  FIRING_A
Model  UISmsd_SKN_B
Animation  UITunf_SKL.UITunf_ATA
AnimationMode  ONCE
AnimationSpeedFactorRange  1.0 1.3
WeaponFireFXBone  PRIMARY   Muzzle
WeaponLaunchBone  PRIMARY   Muzzle
TransitionKey  TRANS_START_FIRING_A
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING RELOADING_A

ConditionState  BETWEEN_FIRING_SHOTS_A
Model  UISmsd_SKN_B
IdleAnimation  UITunf_SKL.UITunf_STA 0 45
IdleAnimation  UITunf_SKL.UITunf_IDA
IdleAnimation  UITunf_SKL.UITunf_IDC
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_START_FIRING_A
End
AliasConditionState  RELOADING_A

;Firing Stinger Missile at airborne targets
ConditionState  FIRING_B
Model  UISmsd_SKN
Animation  UISmsd_SKL.UISmsd_ATA
AnimationMode  ONCE
AnimationSpeedFactorRange  2.2 2.2
WeaponFireFXBone  SECONDARY Exhaust01
WeaponLaunchBone  SECONDARY Muzzle02
TransitionKey  TRANS_START_FIRING_B
End
AliasConditionState  MOVING FIRING_B
AliasConditionState  MOVING RELOADING_B

ConditionState  BETWEEN_FIRING_SHOTS_B
Model  UISmsd_SKN
IdleAnimation  UISmsd_SKL.UISmsd_STA 0 45
IdleAnimation  UISmsd_SKL.UISmsd_IDA
IdleAnimation  UISmsd_SKL.UISmsd_IDB
IdleAnimation  UISmsd_SKL.UISmsd_IDC
IdleAnimation  UISmsd_SKL.UISmsd_IDD
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_START_FIRING_B
End
AliasConditionState  RELOADING_B

;Firing Stinger Missile at balistic missiles
ConditionState  FIRING_C
Model  UISmsd_SKN
Animation  UISmsd_SKL.UISmsd_ATA
AnimationMode  ONCE
AnimationSpeedFactorRange  2.2 2.2
WeaponFireFXBone  TERTIARY  Exhaust01
WeaponLaunchBone  TERTIARY  Muzzle02
TransitionKey  TRANS_START_FIRING_C
End
AliasConditionState  MOVING FIRING_C
AliasConditionState  MOVING RELOADING_C

ConditionState  BETWEEN_FIRING_SHOTS_C
Model  UISmsd_SKN
IdleAnimation  UISmsd_SKL.UISmsd_STA 0 45
IdleAnimation  UISmsd_SKL.UISmsd_IDA
IdleAnimation  UISmsd_SKL.UISmsd_IDB
IdleAnimation  UISmsd_SKL.UISmsd_IDC
IdleAnimation  UISmsd_SKL.UISmsd_IDD
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_START_FIRING_C
End
AliasConditionState  RELOADING_C


ConditionState  SPECIAL_CHEERING
Model  UISmsd_SKN
Animation  UISMSD_SKL.UISMSD_CHA
AnimationMode  LOOP
End

ConditionState  DYING
Model  UISmsd_SKN
Animation  UISmsd_SKL.UISmsd_DTA
Animation  UISmsd_SKL.UISmsd_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WaitForStateToFinishIfPossible  NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
End

TransitionState  TRANS_Dying TRANS_Flailing
Model  UISmsd_SKN
Animation  UISmsd_SKL.UISmsd_ADTF1
Animation  UISmsd_SKL.UISmsd_ADTG21
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Model  UISmsd_SKN
Animation  UISmsd_SKL.UISmsd_ADTF2
Animation  UISmsd_SKL.UISmsd_ADTG22
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
WaitForStateToFinishIfPossible  NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
End

ConditionState  DYING EXPLODED_BOUNCING
Model  UISmsd_SKN
Animation  UISmsd_SKL.UISmsd_ADTF3
Animation  UISmsd_SKL.UISmsd_ADTG23
AnimationMode  ONCE
TransitionKey  None
WaitForStateToFinishIfPossible  NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
End

End

; ***DESIGN parameters ***
DisplayName       OBJECT:StingerSoldier
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)
VisionRange  500.0
ShroudClearingRange  400

WeaponSet
Conditions           None
Weapon               PRIMARY   StingerMissileWeapon
AutoChooseSources    PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
Weapon               SECONDARY StingerMissileWeaponAir
PreferredAgainst     SECONDARY AIRCRAFT
Weapon               TERTIARY  StingerMissileWeaponBalisticMissile
PreferredAgainst     TERTIARY  BALLISTIC_MISSILE
ShareWeaponReloadTime  Yes
End

ArmorSet
Conditions       None
Armor            StingerSoldierArmor ;Extra protection due to being enclosed by the stinger site.
DamageFX         None
End

CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
SoundStealthOn  NoSound
SoundStealthOff  NoSound

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SALVAGER CLICK_THROUGH SPAWNS_ARE_THE_WEAPONS NO_HEAL_ICON UNATTACKABLE ATTACK_NEEDS_LINE_OF_SIGHT

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes Stealthed ;ATTACK_BUILDINGS
MoodAttackCheckRate         250
End
Locomotor  SET_NORMAL BasicHumanLocomotor
Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End
Behavior  SlavedUpdate ModuleTag_06
End

;This module makes the AI ignore this object and not attack it
Behavior  StatusBitsUpgrade ModuleTag_IgnoreMe01
TriggeredBy    Upgrade_CostReduction
StatusToSet    NO_ATTACK_FROM_AI
End

Behavior  StealthUpdate ModuleTag_09
StealthDelay                 2500 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
MoveThresholdSpeed           3
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal01
HealingAmount      2.5  ;in health points
HealingDelay       100  ; msec
StartHealingDelay  7000 ;in miliseconds
StartsActive       Yes
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -DETONATED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_StingerSoldierDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_StingerSoldierDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_StingerSoldierDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
;Instant death and removal for when the structure is bieng sold
Behavior  SlowDeathBehavior ModuleTag_Removeme01
DeathTypes           NONE +DETONATED
DestructionDelay     0
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_14
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14
ShadowSizeY  14
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End
;------------------------------------------------------------------------------
; Стингер солдат
;------------------------------------------------------------------------------
Object GLAInfantryStingerSoldier
Scale 0.90
; *** ART Parameters ***
SelectPortrait           SUStingerSoldier_L
ButtonImage              SUStingerSoldier

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

DefaultConditionState
Model  UIStngr_SKN
IdleAnimation  UISmsd_SKL.UISmsd_STA 0 45
IdleAnimation  UISmsd_SKL.UISmsd_IDA
IdleAnimation  UISmsd_SKL.UISmsd_IDB
IdleAnimation  UISmsd_SKL.UISmsd_IDC
IdleAnimation  UISmsd_SKL.UISmsd_IDD
AnimationMode  ONCE
WeaponFireFXBone  PRIMARY   Muzzle01
WeaponLaunchBone  PRIMARY   Muzzle01
WeaponFireFXBone  SECONDARY Muzzle01
WeaponLaunchBone  SECONDARY Muzzle01
End

ConditionState  MOVING
Animation  UISmsd_SKL.UISmsd_WKB 25
Animation  UISmsd_SKL.UISmsd_WKA 25
AnimationMode  LOOP
Flags  RANDOMSTART
WaitForStateToFinishIfPossible  NONE
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState  MOVING FIRING_A
AliasConditionState  MOVING RELOADING_A
AliasConditionState  MOVING FIRING_B
AliasConditionState  MOVING RELOADING_B

;Machine Pistol Attack
ConditionState  PREATTACK_A
Model  UIStngr_SKN_B
Animation  UIMOB01_SKL.UIMOB01_ATA1_ST ; start firing
AnimationMode  ONCE
End

ConditionState  FIRING_A
Model  UIStngr_SKN_B
Animation  UIMOB01_SKL.UIMOB01_ATA1 ; looping firing
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
WeaponFireFXBone   PRIMARY Muzzle
AnimationSpeedFactorRange  2.0 3.0
End

ConditionState   RELOADING_A
Model  UIStngr_SKN_B
Animation  UIMOB01_SKL.UIMOB01_ATA1_ED ; end firing
AnimationMode  ONCE
TransitionKey  TRANS_RELOADING_A
WaitForStateToFinishIfPossible  TRANS_FIRING_A
AnimationSpeedFactorRange  2.0 2.0
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A

;Firing Missile
ConditionState  FIRING_B
Animation  UISmsd_SKL.UISmsd_ATA
AnimationMode  ONCE
AnimationSpeedFactorRange  2.2 2.2
Flags  START_FRAME_FIRST
TransitionKey  TRANS_START_FIRING_B
End

ConditionState  BETWEEN_FIRING_SHOTS_B
Animation  UISmsd_SKL.UISmsd_STA
AnimationMode  LOOP
Flags  START_FRAME_LAST
TransitionKey  TRANS_RELOADING_B
WaitForStateToFinishIfPossible  TRANS_START_FIRING_B
End
AliasConditionState  RELOADING_B

ConditionState  PREATTACK_B
Animation  UISmsd_SKL.UISmsd_STA
AnimationMode  ONCE
Flags  START_FRAME_LAST
TransitionKey  TRANS_PREATTACK_B
WaitForStateToFinishIfPossible  TRANS_START_FIRING_B
End

ConditionState  DYING
Animation  UISmsd_SKL.UISmsd_DTA
Animation  UISmsd_SKL.UISmsd_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WaitForStateToFinishIfPossible  NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UISmsd_SKL.UISmsd_ADTF1
Animation  UISmsd_SKL.UISmsd_ADTG21
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UISmsd_SKL.UISmsd_ADTF2
Animation  UISmsd_SKL.UISmsd_ADTG22
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
WaitForStateToFinishIfPossible  NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UISmsd_SKL.UISmsd_ADTF3
Animation  UISmsd_SKL.UISmsd_ADTG23
AnimationMode  ONCE
TransitionKey  None
WaitForStateToFinishIfPossible  NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
End

ConditionState  SPECIAL_CHEERING
Animation  UISMSD_SKL.UISMSD_CHA
AnimationMode  LOOP
End

End

; ***DESIGN parameters ***
DisplayName       OBJECT:StingerSoldier
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY   StingerSoldierPistolWeapon
Weapon  SECONDARY StingerSoldierMissileWeapon
PreferredAgainst  SECONDARY AIRCRAFT
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY   StingerSoldierPistolWeapon
Weapon  SECONDARY StingerSoldierMissileUpgradedWeapon
PreferredAgainst  SECONDARY AIRCRAFT
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End
VisionRange          250
ShroudClearingRange  275

Prerequisites
Object  GLABlackMarket
End

BuildCost  200
BuildTime  5.0          ;in seconds

ExperienceValue  20 20 40 60    ;Experience point value at each level
ExperienceRequired  0 100 200 400  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet       GLAInfantryTunnelDefenderCommandSet

; *** AUDIO Parameters ***
VoiceSelect     StingerSoldierVoiceSelect
VoiceMove       StingerSoldierVoiceMove
VoiceGuard      StingerSoldierVoiceGuard
VoiceAttack     StingerSoldierVoiceAttack
VoiceAttackAir  StingerSoldierVoiceAttackAir
VoiceFear       StingerSoldierVoiceFear

UnitSpecificSounds
VoiceCreate        StingerSoldierVoiceCreate
VoiceGarrison      StingerSoldierVoiceGarrison
VoiceEnter         StingerSoldierVoiceMove
VoiceEnterHostile  StingerSoldierVoiceMove
VoiceGetHealed     StingerSoldierVoiceMove
End


; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL MissileDefenderLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  SquishCollide ModuleTag_06
;nothing
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_StingerSoldierDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDie
OCL                  INITIAL OCL_GLAExplodedDeathStingerSoldier
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDieFire
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDieToxins
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDieToxins
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDieTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDieFire
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDieToxins
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_StingerSoldierDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathStingerSoldier
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_StingerSoldierDieToxins
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_StingerSoldierDieToxins
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_12
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
MoveThresholdSpeed           3
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End

Behavior  WeaponSetUpgrade ModuleTag_08231
TriggeredBy  Upgrade_GLAAPRockets
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End
;------------------------------------------------------------------------------
; Ребель
;------------------------------------------------------------------------------
Object GLAInfantryRebel
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SURebel_L
ButtonImage             SURebel

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model                UIRGrd_SKN
IdleAnimation        UIRGrd_SKL.UIRGrd_STN 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDA
IdleAnimation        UIRGrd_SKL.UIRGrd_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponMuzzleFlash    PRIMARY MuzzleFX
TransitionKey        TRANS_Standing
End

End

BuildCost  65
BuildTime  5.0

Side  GLA
EditorSorting  INFANTRY
BuildVariations  GLAInfantryRebel_Var1 GLAInfantryRebel_Var2

KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryRebel_Var1
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SURebel_L
ButtonImage             SURebel

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; this says "we don't use these condition states at all, so completely
; ignore them for purposes of matchmaking"... this is useful to help
; reduce the number of AliasConditionState clauses you must add in
; order to avoid ambiguity in some cases.
IgnoreConditionStates  PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

; ---- standing
DefaultConditionState
Model                UIRGrd_SKN
IdleAnimation        UIRGrd_SKL.UIRGrd_STN 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDA
IdleAnimation        UIRGrd_SKL.UIRGrd_IDB
AnimationMode        ONCE
WeaponFireFXBone     PRIMARY Muzzle
WeaponMuzzleFlash    PRIMARY MuzzleFX
TransitionKey        TRANS_Standing
End

ConditionState         REALLYDAMAGED
IdleAnimation        UIRGrd_SKL.UIRGrd_STB 0 35
IdleAnimation        UIRGrd_SKL.UIRGrd_IDC
IdleAnimation        UIRGrd_SKL.UIRGrd_IDD
AnimationMode        ONCE
TransitionKey        TRANS_StandingHurt
End

; ---- moving
ConditionState         MOVING
Animation            UIRGrd_SKL.UIRGrd_RNA 15
AnimationMode        LOOP
TransitionKey        TRANS_Walking
ParticleSysBone      None InfantryDustTrails
Flags                RANDOMSTART
End
AliasConditionState    MOVING ATTACKING

ConditionState         MOVING REALLYDAMAGED
Animation            UIRGrd_SKL.UIRGrd_RNB 25
AnimationMode        LOOP
TransitionKey        TRANS_WalkingHurt
ParticleSysBone      None InfantryDustTrails
End
AliasConditionState    MOVING ATTACKING REALLYDAMAGED

; ---- dying
ConditionState         DYING
Animation            UIRGrd_SKL.UIRGrd_DTA
Animation            UIRGrd_SKL.UIRGrd_DTB
AnimationMode        ONCE
TransitionKey        TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIRGrd_SKL.UIRGrd_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIRGrd_SKL.UIRGrd_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIRGrd_SKL.UIRGrd_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  SPECIAL_CHEERING
Animation  UIRGrd_SKL.UIRGrd_IDB
End

; ---- firing
ConditionState  USING_WEAPON_A
Animation  UIRGrd_SKL.UIRGrd_ATA
AnimationMode  LOOP
TransitionKey  TRANS_Firing
End

ConditionState  USING_WEAPON_A REALLYDAMAGED
Animation  UIRGrd_SKL.UIRGrd_ATA2
AnimationMode  LOOP
TransitionKey  TRANS_FiringHurt
End

TransitionState  TRANS_Standing TRANS_Firing
Animation  UIRGrd_SKL.UIRGrd_ATAST
AnimationMode  ONCE
End

TransitionState  TRANS_Firing TRANS_Standing
Animation  UIRGrd_SKL.UIRGrd_ATAED
AnimationMode  ONCE
End

TransitionState  TRANS_StandingHurt TRANS_FiringHurt
Animation  UIRGrd_SKL.UIRGrd_ATA2ED
AnimationMode  ONCE_BACKWARDS
End

TransitionState  TRANS_FiringHurt TRANS_StandingHurt
Animation  UIRGrd_SKL.UIRGrd_ATA2ED
AnimationMode  ONCE
End

TransitionState  TRANS_Standing TRANS_StandingHurt
Animation  UIRGrd_SKL.UIRGrd_ATA2ED
AnimationMode  ONCE
End

; ---- Throwing bottle
ConditionState  PREATTACK_C
Model          UIRGrd_B_SKN
Animation      UIMOB01_SKL.UIMOB01_ATCA_BF
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  PREATTACK_C FIRING_C
AliasConditionState  PREATTACK_C RELOADING_C
AliasConditionState  PREATTACK_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  PREATTACK_C FIRING_C REALLYDAMAGED
AliasConditionState  PREATTACK_C RELOADING_C REALLYDAMAGED
AliasConditionState  PREATTACK_C BETWEEN_FIRING_SHOTS_C REALLYDAMAGED

ConditionState  FIRING_C
Model          UIRGrd_B_SKN
Animation      UIMOB01_SKL.UIMOB01_ATCA_AF
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_THROW
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  FIRING_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  REALLYDAMAGED FIRING_C
AliasConditionState  REALLYDAMAGED FIRING_C BETWEEN_FIRING_SHOTS_C

ConditionState RELOADING_C
Model      UIRGrd_B_SKN
Animation  UIMOB01_SKL.UIMOB01_IDA1
WaitForStateToFinishIfPossible  TRANS_THROW
End
AliasConditionState  RELOADING_C FIRING_C
AliasConditionState  RELOADING_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  RELOADING_C REALLYDAMAGED
AliasConditionState  RELOADING_C REALLYDAMAGED FIRING_C
AliasConditionState  RELOADING_C REALLYDAMAGED BETWEEN_FIRING_SHOTS_C

; ------- Parachuting Animations

ConditionState     FREEFALL
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_POP
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
TransitionKey    TRANS_Falling
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState     PARACHUTING
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_PHG
AnimationMode    ONCE
Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME START_FRAME_LAST ; our bone positions should come from the last frame, rather than the first
TransitionKey    TRANS_Chute
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState    TRANS_Falling TRANS_Chute
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_POP
AnimationMode    ONCE
Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState    TRANS_Chute TRANS_Stand
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_PTD
AnimationMode    ONCE
End

; ------- Bldg-capture

ConditionState  UNPACKING
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP1
AnimationMode      ONCE
End
AliasConditionState  UNPACKING REALLYDAMAGED

ConditionState  RAISING_FLAG
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP2
AnimationMode      ONCE
TransitionKey      TRANS_Raising
End
AliasConditionState  RAISING_FLAG REALLYDAMAGED

ConditionState  PACKING
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP1
AnimationMode      ONCE_BACKWARDS
Flags              START_FRAME_LAST
TransitionKey      TRANS_Packing
End
AliasConditionState  PACKING REALLYDAMAGED

TransitionState  TRANS_Raising TRANS_Packing
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP2
AnimationMode      ONCE_BACKWARDS
Flags              START_FRAME_LAST
End

End

; ***DESIGN parameters ***
DisplayName          OBJECT:Rebel
Side                 GLA
EditorSorting        SYSTEM
TransportSlotCount   1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon             PRIMARY  GLARebelMachineGun
Weapon             TERTIARY GLARebelMolotovCocktailWeapon
AutoChooseSources  TERTIARY NONE
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon             PRIMARY  GLARebelMachineGunUpgraded
Weapon             TERTIARY GLARebelMolotovCocktailWeapon
AutoChooseSources  TERTIARY NONE
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange          175
ShroudClearingRange  200

Prerequisites
Object  GLABarracks
End

BuildCost  65
BuildTime  5.0          ;in seconds

ExperienceValue      15 15 30 40     ;Experience point value at each level
ExperienceRequired   0 40 60 120     ;Experience points needed to gain each level
IsTrainable          Yes             ;Can gain experience
CrushableLevel       0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet           GLAInfantryRebelCommandSet

; *** AUDIO Parameters ***
VoiceSelect  RebelVoiceSelect
VoiceMove  RebelVoiceMove
VoiceGuard  RebelVoiceMove
VoiceAttack  RebelVoiceAttack
SoundStealthOn  StealthOn
SoundStealthOff  StealthOff
VoiceFear  RebelVoiceFear
VoiceTaskComplete  RebelVoiceCaptureComplete
UnitSpecificSounds
VoiceCreate  RebelVoiceCreate
VoiceSubdue  RebelVoiceSubdue
VoiceGarrison  RebelVoiceGarrison
VoiceEnter  RebelVoiceMove
VoiceEnterHostile  RebelVoiceMove
VoiceGetHealed       RebelVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL RebelLocomotor

Behavior  CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit.
End

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End
Behavior  StealthUpdate ModuleTag_07
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
MoveThresholdSpeed           3
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_10
TriggeredBy  Upgrade_GLACamouflage
End

Behavior  WeaponSetUpgrade ModuleTag_09
TriggeredBy  Upgrade_GLAAPBullets
End

Behavior  FireWeaponWhenDeadBehavior ModuleTag_SuicidePack01
DeathTypes     NONE +CRUSHED
DeathWeapon    TunnelDefenderSuicideDynamitePack
StartsActive   No
TriggeredBy    Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  CommandSetUpgrade ModuleTag_SuicidePack02
CommandSet   GLAInfantryRebelUpgradedCommandSet
TriggeredBy  Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  SquishCollide ModuleTag_11
;nothing
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RebelDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_GLAExplodedDeathRebel
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathRebel
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_RebelSurrender
OCL                  INITIAL OCL_RebelSurrendering
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_16
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  SpecialAbility ModuleTag_17
SpecialPowerTemplate       SpecialAbilityRebelCaptureBuilding
UpdateModuleStartsAttack   Yes
StartsPaused               No
InitiateSound          RebelVoiceCapture
End
Behavior  SpecialAbilityUpdate ModuleTag_18
SpecialPowerTemplate   SpecialAbilityRebelCaptureBuilding
StartAbilityRange   5.0
UnpackTime             3000  ; (changing this will scale anim speed)
PreparationTime        20000 ; time to complete hack once prepared (changing this will scale anim speed)
PackTime               2000  ; (changing this will scale anim speed)
DoCaptureFX            Yes
AwardXPForTriggering   12
End

Behavior  SpecialAbility ModuleTag_20
SpecialPowerTemplate  SpecialAbilityBoobyTrap
UpdateModuleStartsAttack  Yes
StartsPaused               Yes
InitiateSound  RebelVoiceBoobyTrapInstall
End
Behavior  SpecialAbilityUpdate ModuleTag_21
SpecialPowerTemplate  SpecialAbilityBoobyTrap
StartAbilityRange  5.0
PreparationTime  0
SpecialObject  BoobyTrap
MaxSpecialObjects  100
SpecialObjectsPersistWhenOwnerDies  Yes
SpecialObjectsPersistent  Yes          ;Charges are persistent till lifetime expires or owner detonates them.
End

Behavior  UnpauseSpecialPowerUpgrade ModuleTag_22
SpecialPowerTemplate  SpecialAbilityBoobyTrap
TriggeredBy  Upgrade_GLAInfantryRebelBoobyTrapAttack
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End



;------------------------------------------------------------------------------
ObjectReskin GLAInfantryRebel_Var2 GLAInfantryRebel_Var1

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes
IgnoreConditionStates  PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

; ---- standing
ConditionState  NONE
Model                UIRGrd2_SKN
Animation            UIMOB01_SKL.UIMOB01_STD
AnimationMode        LOOP
AnimationSpeedFactorRange 0.9 1.1
Flags                RANDOMSTART
WeaponFireFXBone     PRIMARY MuzzleAK
WeaponMuzzleFlash    PRIMARY MuzzleAKFX
TransitionKey        TRANS_Standing
WaitForStateToFinishIfPossible  Trans_Taunting
End
AliasConditionState  REALLYDAMAGED

; ---- moving
ConditionState         MOVING
Model                UIRGrd2_SKN
Animation            UIMOB01_SKL.UIMOB01_RND  15
AnimationMode        LOOP
Flags                RANDOMSTART
TransitionKey        TRANS_Walking
ParticleSysBone      None InfantryDustTrails
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState    MOVING ATTACKING
AliasConditionState    MOVING REALLYDAMAGED
AliasConditionState    MOVING ATTACKING REALLYDAMAGED

; ---- dying
ConditionState         DYING
Model                UIRGrd2_SKN
Animation            UIMOB01_SKL.UIMOB01_DD1
Animation            UIMOB01_SKL.UIMOB01_DD2
AnimationMode        ONCE
TransitionKey        TRANS_Dying
WaitForStateToFinishIfPossible  NADA
End

TransitionState  TRANS_Dying TRANS_Flailing
Model                UIRGrd2_SKN
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Model                UIRGrd2_SKN
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
WaitForStateToFinishIfPossible  NADA
End

ConditionState  DYING EXPLODED_BOUNCING
Model                UIRGrd2_SKN
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  None
WaitForStateToFinishIfPossible  NADA
End

; ---- firing
ConditionState  USING_WEAPON_A
Model                UIRGrd2_SKN
Animation  UIMOB01_SKL.UIMOB01_ATD1_LP
AnimationMode  LOOP
TransitionKey  TRANS_Firing
WaitForStateToFinishIfPossible  NADA
WeaponFireFXBone     PRIMARY MuzzleAK
WeaponMuzzleFlash    PRIMARY MuzzleAKFX
End
AliasConditionState  USING_WEAPON_A REALLYDAMAGED

TransitionState  TRANS_Standing TRANS_Firing
Model                UIRGrd2_SKN
Animation  UIMOB01_SKL.UIMOB01_ATD1_ST
AnimationMode  ONCE
WeaponFireFXBone     PRIMARY MuzzleAK
WeaponMuzzleFlash    PRIMARY MuzzleAKFX
End

TransitionState  TRANS_Firing TRANS_Standing
Model                UIRGrd2_SKN
Animation  UIMOB01_SKL.UIMOB01_ATD1_ED
AnimationMode  ONCE
WeaponFireFXBone     PRIMARY MuzzleAK
WeaponMuzzleFlash    PRIMARY MuzzleAKFX
End

; ---- Throwing bottle

ConditionState  PREATTACK_C
Model          UIRGrd_B_SKN
Animation      UIMOB01_SKL.UIMOB01_ATCA_BF
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  PREATTACK_C FIRING_C
AliasConditionState  PREATTACK_C RELOADING_C
AliasConditionState  PREATTACK_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  PREATTACK_C FIRING_C REALLYDAMAGED
AliasConditionState  PREATTACK_C RELOADING_C REALLYDAMAGED
AliasConditionState  PREATTACK_C BETWEEN_FIRING_SHOTS_C REALLYDAMAGED

ConditionState  FIRING_C
Model          UIRGrd_B_SKN
Animation      UIMOB01_SKL.UIMOB01_ATCA_AF
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_THROW
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  FIRING_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  REALLYDAMAGED FIRING_C
AliasConditionState  REALLYDAMAGED FIRING_C BETWEEN_FIRING_SHOTS_C

ConditionState RELOADING_C
Model      UIRGrd_B_SKN
Animation  UIMOB01_SKL.UIMOB01_IDA1
WaitForStateToFinishIfPossible  TRANS_THROW
End
AliasConditionState  RELOADING_C FIRING_C
AliasConditionState  RELOADING_C BETWEEN_FIRING_SHOTS_C
AliasConditionState  RELOADING_C REALLYDAMAGED
AliasConditionState  RELOADING_C REALLYDAMAGED FIRING_C
AliasConditionState  RELOADING_C REALLYDAMAGED BETWEEN_FIRING_SHOTS_C


; ---- Cheering

ConditionState  SPECIAL_CHEERING
Model                UIRGrd2_SKN
Animation  UIMOB01_SKL.UIRGrd_IDD1
Animation  UIMOB01_SKL.UIRGrd_IDD2
Animation  UIMOB01_SKL.UIRGrd_CHD
AnimationMode  LOOP
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  SPECIAL_CHEERING REALLYDAMAGED

; ------- Parachuting Animations

ConditionState     FREEFALL
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_POP
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
TransitionKey    TRANS_Falling
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState     PARACHUTING
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_PHG
AnimationMode    ONCE
Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME START_FRAME_LAST ; our bone positions should come from the last frame, rather than the first
TransitionKey    TRANS_Chute
WaitForStateToFinishIfPossible  NADA
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState    TRANS_Falling TRANS_Chute
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_POP
AnimationMode    ONCE
Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState    TRANS_Chute TRANS_Stand
Model            UIRGrd_SKN
Animation        UIRGrd_SKL.UIRGrd_PTD
AnimationMode    ONCE
End

; ------- Bldg-capture

ConditionState  UNPACKING
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP1
AnimationMode      ONCE
End
AliasConditionState  UNPACKING REALLYDAMAGED

ConditionState  RAISING_FLAG
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP2
AnimationMode      ONCE
TransitionKey      TRANS_Raising
End
AliasConditionState  RAISING_FLAG REALLYDAMAGED

ConditionState  PACKING
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP1
AnimationMode      ONCE_BACKWARDS
Flags              START_FRAME_LAST
TransitionKey      TRANS_Packing
End
AliasConditionState  PACKING REALLYDAMAGED

TransitionState  TRANS_Raising TRANS_Packing
Model              UIRGrd_F_SKN
Animation          UIRGrd_F_SKL.UIRGrd_F_FDP2
AnimationMode      ONCE_BACKWARDS
Flags              START_FRAME_LAST
End

End

End

;------------------------------------------------------------------------------
Object GLAInfantryRebelSurrenderCrate
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; --- Idle
DefaultConditionState
Model              UIRGrd_SKN
Animation          UIRGrd_SKL.UIRGrd_SUR
AnimationMode      ONCE
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
Animation          UIRGrd_SKL.UIRGrd_SST
AnimationMode      LOOP
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End

; --- dying anims
ConditionState       RUBBLE
Animation          UIRGrd_SKL.UIRGrd_DTA
Animation          UIRGrd_SKL.UIRGrd_DTB
AnimationMode      ONCE
TransitionKey      None
AnimationSpeedFactorRange  1.5 2.0
End

End

Draw  W3DModelDraw ModuleTag_SurrenderFlag01
DefaultConditionState
Model              EXSurndr
Animation          EXSurndr.EXSurndr
AnimationMode      ONCE
HideSubObject      FLAG
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
ShowSubObject      FLAG
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End
ConditionState       RUBBLE
Animation          NONE
End
End

; ***DESIGN parameters ***
Side             GLA
EditorSorting    SYSTEM

WeaponSet
Conditions           None
Weapon               SECONDARY SuicideUnresistableWeapon
End

ArmorSet
Conditions       None
Armor            POWArmor
DamageFX         InfantryDamageFX
End

ExperienceValue      0 0 0 0
ExperienceRequired   0 0 0 0
IsTrainable      Yes
CrushableLevel   0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** ENGINEERING Parameters ***
KindOf  INFANTRY UNATTACKABLE CAN_ATTACK

Body  ActiveBody ModuleTag_03
MaxHealth        100.0
InitialHealth    10.0
End

Behavior  AIUpdateInterface ModuleTag_03232
End

Behavior  OCLUpdate ModuleTag_ReviveTrigger01
MinDelay      30000
MaxDelay      33000
OCL           OCL_CreateRealFortress
End

Behavior  UnitCrateCollide ModuleTag_02
UnitCount  1
UnitName  AmericanCIAInteligenceObject
RequiredKindOf  CAN_RAPPEL  ;Rangers only
HumanOnly  No
BuildingPickup  No
PickupScience  SCIENCE_CapturePrisoners ;Requires the rangers to have this upgrade
ForbidOwnerPlayer  Yes
ExecuteFX  FX_PrisonerCratePickup
ExecuteAnimation  PrisonerCaptured
ExecuteAnimationTime    4.0    ; In seconds
ExecuteAnimationZRise   15.0   ; Z world units per second to rise
ExecuteAnimationFades   Yes    ; Animation does/doesn't fade out
End

Behavior  TransportContain ModuleTag_Loaded01
Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
AllowInsideKindOf      NO_COLLIDE
End

Behavior  SquishCollide ModuleTag_Crush01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Revive01
DeathTypes           NONE +SUICIDED
DestructionDelay     0
End
Behavior  CreateObjectDie ModuleTag_Revive02
DeathTypes  NONE +SUICIDED
CreationList  OCL_SurrenderedRebelRevive
TransferPreviousHealth  Yes
End

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -SUICIDED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RebelDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_GLAExplodedDeathRebel
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RebelDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathRebel
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End

; --- end Death modules ---

Geometry  BOX
GeometryMajorRadius  5.0
GeometryMinorRadius  5.0
GeometryHeight  7.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  18;
ShadowSizeY  18;
ShadowTexture  EXPowDcl;

End
;------------------------------------------------------------------------------
; Террорист
;------------------------------------------------------------------------------
Object GLAInfantryTerrorist
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUTerrorist_L
ButtonImage             SUTerrorist


Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UITrrst_SKN
IdleAnimation  UITRRT_SKL.UITRRT_STA 0 25
;Regular spice animations
IdleAnimation  UITRRT_SKL.UITRRT_IDA
IdleAnimation  UITRRT_SKL.UITRRT_IDB
AnimationMode  ONCE
TransitionKey  TRANS_Stand
HideSubObject  NAPALM CLUSTER01 CLUSTER02 CLUSTER03
End

ConditionState  REALLYDAMAGED
Animation  UITRRT_SKL.UITRRT_STA
AnimationMode  LOOP
TransitionKey  TRANS_Stand
End

ConditionState  FREEFALL
Animation  UITRRT_SKL.UITRRT_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState  PARACHUTING
Animation  UITRRT_SKL.UITRRT_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

ConditionState  MOVING
Animation  UITRRT_SKL.UITRRT_RNA 25
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  None
ParticleSysBone    None InfantryDustTrails
End
AliasConditionState  MOVING REALLYDAMAGED

ConditionState  ATTACKING MOVING
Animation  UITRRT_SKL.UITRRT_RNB 25
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  None
End
AliasConditionState  ATTACKING MOVING REALLYDAMAGED

ConditionState  PREATTACK_A
Animation  UITRRT_SKL.UITRRT_ATA
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A MOVING

ConditionState  DYING
Animation  UITRRT_SKL.UITRRT_DTA
Animation  UITRRT_SKL.UITRRT_DTC
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UITRRT_SKL.UITRRT_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UITRRT_SKL.UITRRT_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UITRRT_SKL.UITRRT_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  SPECIAL_CHEERING
Animation  UITRRT_SKL.UITRRT_CHA
AnimationMode  LOOP
End

TransitionState  TRANS_Falling TRANS_Chute
Animation  UITRRT_SKL.UITRRT_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState  TRANS_Chute TRANS_Stand
Animation  UITRRT_SKL.UITRRT_PTD
AnimationMode  ONCE
End

End

; ***DESIGN parameters ***
DisplayName       OBJECT:Terrorist
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)
WeaponSet
Conditions  None
;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
;damage to do ini logic for type of death to play -- unresistable for success.
Weapon  PRIMARY TerroristSuicideWeapon
End
ArmorSet
Conditions       None
Armor            TerroristArmor
DamageFX         InfantryDamageFX
End
VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
Object  GLAPalace
End
BuildCost  400
BuildTime  5.0          ;in seconds
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet     GLAInfantryTerroristCommandSet

; *** AUDIO Parameters ***
VoiceSelect  TerroristVoiceSelect
VoiceMove  TerroristVoiceMove
VoiceAttack  TerroristVoiceAttack
VoiceFear  TerroristVoiceFear
VoiceGuard  TerroristVoiceMove
UnitSpecificSounds
VoiceGarrison          TerroristVoiceMove
VoiceCreate            TerroristVoiceCreate
VoiceEnter             TerroristVoiceEnter
VoiceEnterHostile      TerroristVoiceEnterHostile
VoiceGetHealed       TerroristVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

ExperienceValue      20 20 20 20  ; Experience point value at each level

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL TerroristLocomotor
Locomotor  SET_NORMAL_UPGRADED TerroristUpgradedLocomotor

Behavior  CommandButtonHuntUpdate  ModuleTag_CBH01 ; allows use of command button hunt script with this unit.
End

Behavior  ProductionUpdate ModuleTag_Production01
MaxQueueEntries  1
End

Behavior  LocomotorSetUpgrade ModuleTag_Fanatical01
TriggeredBy    Upgrade_GLAArmTheMob
End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;; Start Special Recycler Upgrades ;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;Napalm Payload
Behavior  SubObjectsUpgrade ModuleTag_RecyclerUpgrade01
TriggeredBy     Upgrade_GLAWorkerWorthlessCommandSet
ShowSubObjects  NAPALM
HideSubObjects  CLUSTER01 CLUSTER02 CLUSTER03
ConflictsWith   Upgrade_GLAWorkerRealCommandSet
End

Behavior  FireWeaponWhenDeadBehavior ModuleTag_RecyclerUpgrade02
TriggeredBy    Upgrade_GLAWorkerWorthlessCommandSet
DeathWeapon    TerroristNapalmDeathExplosionWeapon
StartsActive   No
ConflictsWith  Upgrade_GLAWorkerRealCommandSet
End

;Cluster Payload
Behavior  SubObjectsUpgrade ModuleTag_RecyclerUpgrade03
TriggeredBy     Upgrade_GLAWorkerRealCommandSet
ShowSubObjects  CLUSTER01 CLUSTER02 CLUSTER03
HideSubObjects  NAPALM
ConflictsWith   Upgrade_GLAWorkerWorthlessCommandSet
End

Behavior  FireWeaponWhenDeadBehavior ModuleTag_RecyclerUpgrade04
TriggeredBy    Upgrade_GLAWorkerRealCommandSet
DeathWeapon    TerroristClusterBombDeathExplosionWeapon
StartsActive   No
ConflictsWith  Upgrade_GLAWorkerWorthlessCommandSet
End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;; End Special Recycler Upgrades ;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

;  Behavior  ConvertToCarBombCrateCollide       ModuleTag_06
;    RequiredKindOf     VEHICLE      ; we only give our bonus to VEHICLEs we collide with
;    FXList             FX_MakeCarBombSuccess
;  End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000
InnateStealth                No
;HintDetectableConditions     DETECTED
ForbiddenStatus              DETECTED
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  SquishCollide ModuleTag_07
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL  -TOPPLED -EXPLODED -SUICIDED -CRUSHED -SPLATTED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -BURNED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_TerroristDie
End

;POISON_DEATHS POISON_DEATHS POISON_DEATHS POISON_DEATHS
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_032324156 ;Surrender Death (altho not quite surrendering)
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
OCL                  INITIAL OCL_TerroristSurrendering
FX                   INITIAL FX_TerroristSurrender
End

; I have just pulled my ripcord, and this ain't no parachute!
Behavior  SlowDeathBehavior ModuleTag_Death03232
DeathTypes           NONE +TOPPLED +EXPLODED +SUICIDED +CRUSHED +SPLATTED +BURNED +EXTRA_2 +EXTRA_5
DestructionDelay     0
FX                   INITIAL FX_TerroristExplode
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
Weapon               FINAL   SuicideDynamitePack
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_14
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryTerroristRevealDummy

; *** ART Parameters ***

Draw                     W3DDependencyModelDraw ModuleTag_01

AttachToBoneInContainer  FIREPOINT01

DefaultConditionState
Model                None
End

End

PlacementViewAngle  -45

; ***DESIGN parameters ***
Side              GLA
EditorSorting     SYSTEM
TransportSlotCount  1
VisionRange      100

WeaponSet
Conditions  None
Weapon  PRIMARY TerroristRevealDummyWeapon
End

ArmorSet
Conditions      None
Armor           InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
End

; *** ENGINEERING Parameters ***
KindOf             PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
Body             StructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  PRIMARY SECONDARY
TurretTurnRate       3600
End
AutoAcquireEnemiesWhenIdle  Yes Stealthed
MoodAttackCheckRate  1
End

Behavior              DestroyDie ModuleTag_05
End

End

;------------------------------------------------------------------------------
Object GLAInfantryTerroristSurrendering ;not realy
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

ConditionState  NONE
Model  UITrrst_SKN
Animation  UITRRT_SKL.UITRRT_RNB
AnimationMode  LOOP
Flags  RANDOMSTART
End

ConditionState  DYING
Model  UITrrst_SKN
Animation  UITRRT_SKL.UITRRT_ATA
AnimationMode  ONCE
Flags  START_FRAME_FIRST
End

End

; ***DESIGN parameters ***
Side  GLA
EditorSorting  SYSTEM
TransportSlotCount  1

ArmorSet
Conditions       None
Armor            InvulnerableArmorAll
DamageFX         None
End

VisionRange  150
DisplayName  OBJECT:Terrorist

; *** AUDIO Parameters ***

; *** ENGINEERING Parameters ***
KindOf  PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK INFANTRY PARACHUTABLE

Body  ActiveBody ModuleTag_02
MaxHealth        50.0
InitialHealth    50.0
End

Behavior  WanderAIUpdate ModuleTag_03
End
Locomotor  SET_NORMAL FastHumanLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  LifetimeUpdate ModuleTag_05
MinLifetime  2500
MaxLifetime  4000
End

Behavior  SlowDeathBehavior ModuleTag_06
DeathTypes           ALL
DestructionDelay     690
OCL                  FINAL   OCL_BloodyGoreExplosion
FX                   FINAL   FX_TerroristSurrenderExplode
Weapon               FINAL   SuicideDynamitePack
End

Geometry  CYLINDER
GeometryMajorRadius  3.0
GeometryMinorRadius  3.0
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;

End
;------------------------------------------------------------------------------
; Защитник Тунелей
;------------------------------------------------------------------------------
Object GLAInfantryTunnelDefender
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SURPG_L
ButtonImage             SURPG

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

DefaultConditionState
Model  UITunF_SKN
IdleAnimation  UITunF_SKL.UITunF_STA 0 20
IdleAnimation  UITunF_SKL.UITunF_IDA
IdleAnimation  UITunF_SKL.UITunF_IDB
IdleAnimation  UITunF_SKL.UITunF_IDC
AnimationMode  ONCE
HideSubObject  WARHEADUP
WeaponFireFXBone  PRIMARY Muzzle
WeaponLaunchBone  PRIMARY Muzzle
WeaponFireFXBone  SECONDARY Muzzle
WeaponLaunchBone  SECONDARY Muzzle
End

ConditionState  MOVING
Animation  UITunF_SKL.UITunF_WKA 16
Animation  UITunF_SKL.UITunF_WKB 30
Animation  UITunF_SKL.UITunF_WKC 30
Animation  UITunF_SKL.UITunF_RNA 15
Animation  UITunF_SKL.UITunF_RNB 25
AnimationMode  LOOP
ParticleSysBone    None InfantryDustTrails
End

ConditionState  DYING
Animation  UITunF_SKL.UITunF_DTA
Animation  UITunF_SKL.UITunF_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UITunF_SKL.UITunF_ADTA1
Animation  UITunF_SKL.UITunF_ADTE1
Animation  UITunF_SKL.UITunF_ADTF1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UITunF_SKL.UITunF_ADTA2
Animation  UITunF_SKL.UITunF_ADTE2
Animation  UITunF_SKL.UITunF_ADTF2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UITunF_SKL.UITunF_ADTA3
Animation  UITunF_SKL.UITunF_ADTE3
Animation  UITunF_SKL.UITunF_ADTF3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  FIRING_A
Animation  UITunF_SKL.UITunF_ATA
AnimationMode  ONCE
TransitionKey  TRANS_START_FIRING
End
ConditionState  BETWEEN_FIRING_SHOTS_A
Animation  UITunF_SKL.UITunF_STA
AnimationMode  ONCE
WaitForStateToFinishIfPossible  TRANS_START_FIRING
End
AliasConditionState  RELOADING_A

ConditionState  FIRING_B
Animation  UITunF_SKL.UITunF_ATB
AnimationMode  ONCE
TransitionKey  TRANS_START_FIRING_B
End
ConditionState  BETWEEN_FIRING_SHOTS_B
Animation  UITunF_SKL.UITunF_ATB
AnimationMode  ONCE
Flags  START_FRAME_LAST
WaitForStateToFinishIfPossible  TRANS_START_FIRING_B
End
AliasConditionState  RELOADING_B

ConditionState  SPECIAL_CHEERING
Animation  UITUNF_SKL.UITUNF_CHA
AnimationMode  LOOP
End

End

; ***DESIGN parameters ***
DisplayName       OBJECT:TunnelDefender
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY   TunnelDefenderRocketWeapon
Weapon  SECONDARY TunnelDefenderRocketWeaponAir
PreferredAgainst  SECONDARY AIRCRAFT
ShareWeaponReloadTime  Yes
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY   TunnelDefenderRocketWeaponUpgraded
Weapon  SECONDARY TunnelDefenderRocketWeaponAirUpgraded
PreferredAgainst  SECONDARY AIRCRAFT
ShareWeaponReloadTime  Yes
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End
VisionRange          225
ShroudClearingRange  250

BuildCost  250
BuildTime  5.0          ;in seconds

ExperienceValue  20 20 40 60    ;Experience point value at each level
ExperienceRequired  0 100 200 400  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet       GLAInfantryTunnelDefenderCommandSet

; *** AUDIO Parameters ***
VoiceSelect  RPGTrooperVoiceSelect
VoiceMove  RPGTrooperVoiceMove
VoiceGuard  RPGTrooperVoiceMove
VoiceAttack  RPGTrooperVoiceAttack
VoiceAttackAir  RPGTrooperVoiceAttack
VoiceFear  RPGTrooperVoiceFear

UnitSpecificSounds
VoiceCreate           RPGTrooperVoiceCreate
VoiceGarrison  RPGTrooperVoiceGarrison
VoiceEnter  RPGTrooperVoiceMove
VoiceEnterHostile  RPGTrooperVoiceMove
VoiceGetHealed       RPGTrooperVoiceMove
End


; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End
Locomotor  SET_NORMAL MissileDefenderLocomotor

Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  SquishCollide ModuleTag_06
;nothing
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RPGTrooperDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_GLAExplodedDeathTunnelDefender
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathTunnelDefender
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperSurrender
OCL                  INITIAL OCL_TunnelDefenderSurrendering
End

; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_12
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  StealthUpdate ModuleTag_Stealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   ATTACKING USING_ABILITY
MoveThresholdSpeed           3
InnateStealth                No ;Requires upgrade first
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  StealthUpgrade ModuleTag_Stealth02
TriggeredBy  Upgrade_GLACamouflage
End

Behavior  WeaponSetUpgrade ModuleTag_08231
TriggeredBy  Upgrade_GLAAPRockets
End

Behavior  SubObjectsUpgrade ModuleTag_APRocketVissual01
TriggeredBy     Upgrade_GLAAPRockets
ShowSubObjects  WARHEADUP
End

Behavior  FireWeaponWhenDeadBehavior ModuleTag_SuicidePack01
DeathTypes     NONE +CRUSHED
DeathWeapon    TunnelDefenderSuicideDynamitePack
StartsActive   No
TriggeredBy    Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  CommandSetUpgrade ModuleTag_SuicidePack02
CommandSet   GLAInfantryTunnelDefenderUpgradedCommandSet
TriggeredBy  Upgrade_GLAInfantryRebelBoobyTrapAttack
End

Behavior  SpecialAbility ModuleTag_07
SpecialPowerTemplate  SpecialAbilityTankHunterTNTAttack
UpdateModuleStartsAttack  Yes
InitiateSound  RPGTrooperVoiceAttackTNT
End

Behavior  SpecialAbilityUpdate ModuleTag_08
SpecialPowerTemplate  SpecialAbilityTankHunterTNTAttack
StartAbilityRange  2.5
PreparationTime  0
SpecialObject  TNTStickyBomb
MaxSpecialObjects  8
SpecialObjectsPersistWhenOwnerDies  No ;Charges are removed instantly when owner dies (nobody can detonate).
SpecialObjectsPersistent  Yes          ;Charges are persistent till lifetime expires or owner detonates them.
UniqueSpecialObjectTargets  Yes        ;This prevents multiple charges placed on the same object.
FleeRangeAfterCompletion  100.0        ;Runs away after finishing ability
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryTunnelDefenderSurrenderCrate
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

; --- Idle
DefaultConditionState
Model              UITunF_SKN
Animation          UITunF_SKL.UITunF_SUR
AnimationMode      ONCE
HideSubObject      WARHEADUP
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
Animation          UITunF_SKL.UITunF_SST
AnimationMode      LOOP
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End

; --- dying anims
ConditionState       RUBBLE
Animation          UITunF_SKL.UITunF_DTA
Animation          UITunF_SKL.UITunF_DTB
AnimationMode      ONCE
TransitionKey      None
AnimationSpeedFactorRange  1.5 2.0
End

End

Draw  W3DModelDraw ModuleTag_SurrenderFlag01
DefaultConditionState
Model              EXSurndr_B
Animation          EXSurndr_B.EXSurndr_B
AnimationMode      ONCE
HideSubObject      FLAG
TransitionKey      TRANS_SURRENDERING
End
ConditionState     LOADED
ShowSubObject      FLAG
WaitForStateToFinishIfPossible  TRANS_SURRENDERING
End
ConditionState       RUBBLE
Animation          NONE
End
End

; ***DESIGN parameters ***
Side             GLA
EditorSorting    SYSTEM

WeaponSet
Conditions           None
Weapon               SECONDARY SuicideUnresistableWeapon
End

ArmorSet
Conditions       None
Armor            POWArmor
DamageFX         InfantryDamageFX
End

ExperienceValue      0 0 0 0
ExperienceRequired   0 0 0 0
IsTrainable      Yes
CrushableLevel   0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** ENGINEERING Parameters ***
KindOf  INFANTRY UNATTACKABLE CAN_ATTACK

Body  ActiveBody ModuleTag_03
MaxHealth        100.0
InitialHealth    10.0
End

Behavior  AIUpdateInterface ModuleTag_03232
End

Behavior  OCLUpdate ModuleTag_ReviveTrigger01
MinDelay      30000
MaxDelay      33000
OCL           OCL_CreateRealFortress
End

Behavior  UnitCrateCollide ModuleTag_02
UnitCount  1
UnitName  AmericanCIAInteligenceObject
RequiredKindOf  CAN_RAPPEL  ;Rangers only
HumanOnly  No
BuildingPickup  No
PickupScience  SCIENCE_CapturePrisoners ;Requires the rangers to have this upgrade
ForbidOwnerPlayer  Yes
ExecuteFX  FX_PrisonerCratePickup
ExecuteAnimation  PrisonerCaptured
ExecuteAnimationTime    4.0    ; In seconds
ExecuteAnimationZRise   15.0   ; Z world units per second to rise
ExecuteAnimationFades   Yes    ; Animation does/doesn't fade out
End

Behavior  TransportContain ModuleTag_Loaded01
Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
AllowInsideKindOf      NO_COLLIDE
End

Behavior  SquishCollide ModuleTag_Crush01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Revive01
DeathTypes           NONE +SUICIDED
DestructionDelay     0
End
Behavior  CreateObjectDie ModuleTag_Revive02
DeathTypes  NONE +SUICIDED
CreationList  OCL_SurrenderedTunnelDefenderRevive
TransferPreviousHealth  Yes
End

Behavior  SubObjectsUpgrade ModuleTag_APRocketVissual01
TriggeredBy     Upgrade_GLAAPRockets
ShowSubObjects  WARHEADUP
End

Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -SUICIDED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_RPGTrooperDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_GLAExplodedDeathTunnelDefender
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_RPGTrooperDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_GLAExplodedDeathTunnelDefender
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

;Geometry  BOX
;GeometryMajorRadius  5.0
;GeometryMinorRadius  5.0
;GeometryHeight  7.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  18;
ShadowSizeY  18;
ShadowTexture  EXPowDcl;

End
;------------------------------------------------------------------------------
; Рабочий
;------------------------------------------------------------------------------
Object GLAInfantryWorker
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUWorker_L
ButtonImage             SUWorker

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

DefaultConditionState
Model          UIWRKR_SKN
IdleAnimation  UIWRKR_SKL.UIWRKR_STA 0 9
IdleAnimation  UIWRKR_SKL.UIWRKR_IDA
AnimationMode  ONCE
TransitionKey  TRANS_Stand
HideSubObject  OMGL33TSHOES
WaitForStateToFinishIfPossible  DroppingCrate
End

ConditionState   MOVING
Animation      UIWRKR_SKL.UIWRKR_RNA 16
AnimationMode  LOOP
Flags          RANDOMSTART
TransitionKey  TRANS_Moving
ParticleSysBone  None InfantryDustTrails
End
; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
; since we flip the bit once we get pretty close to the target. but it looks
; funky to do the construction animation while moving.
; so just use the normal move animation in that case.
AliasConditionState  ACTIVELY_CONSTRUCTING MOVING

ConditionState  ATTACKING
ShowSubObject  MINED_SKIN
Animation  UIWRKR_SKL.UIWRKR_MS
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_MetalDetector_Standing
End

ConditionState  MOVING ATTACKING
Animation  UIWRKR_SKL.UIWRKR_MSW 50
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_MetalDetector_Moving
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING ATTACKING CARRYING

TransitionState  TRANS_Stand TRANS_MetalDetector_Standing    ;STANDING -= ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRB1;take out standing
AnimationMode  ONCE
End
TransitionState  TRANS_MetalDetector_Standing TRANS_Stand    ;ATTACKING -= STANDING
Animation      UIWRKR_SKL.UIWRKR_TRB2;put away standing
AnimationMode  ONCE
End

TransitionState  TRANS_Carry TRANS_MetalDetector_Standing    ;CARRYING -= ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRB1;take out standing
AnimationMode  ONCE
End
TransitionState  TRANS_MetalDetector_Standing TRANS_Carry    ;ATTACKING -= CARRYING
ShowSubObject  MINED_SKIN
Animation      UIWRKR_SKL.UIWRKR_TRB2;put away standing
AnimationMode  ONCE
End
TransitionState  TRANS_Carry TRANS_MetalDetector_Moving      ;CARRYING -= MOVING ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End

TransitionState  TRANS_MetalDetector_Moving TRANS_Stand      ;MOVING ATTACKING -= STANDING
Animation      UIWRKR_SKL.UIWRKR_TRB2;put away moving
AnimationMode  ONCE
End
TransitionState  TRANS_Stand TRANS_MetalDetector_Moving      ;STANDING -= MOVING ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End

TransitionState  TRANS_Moving TRANS_MetalDetector_Standing   ;MOVING -= ATTACKING [STANDING]
Animation      UIWRKR_SKL.UIWRKR_TRB1;take out standing
AnimationMode  ONCE
End
TransitionState  TRANS_MetalDetector_Standing TRANS_Moving   ;ATTACKING [STANDING] -= MOVING
Animation      UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End

TransitionState  TRANS_Moving TRANS_MetalDetector_Moving     ;MOVING -= MOVING ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End
TransitionState  TRANS_MetalDetector_Moving TRANS_Moving     ;MOVING ATTACKING -= MOVING
Animation      UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End


ConditionState  MOVING CARRYING
ShowSubObject  BOX
Animation  UIWRKR_SKL.UIWRKR_CARY 12
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_Carry
ParticleSysBone  None InfantryDustTrails
End
; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
; since we flip the bit once we get pretty close to the target. but it looks
; funky to do the construction animation while moving.
; so just use the normal move animation in that case.
AliasConditionState  ACTIVELY_CONSTRUCTING MOVING CARRYING

ConditionState  CARRYING
Animation  UIWRKR_SKL.UIWRKR_CARST 30
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_Carry
End

ConditionState  DYING
Animation  UIWRKR_SKL.UIWRKR_DTA
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End
AliasConditionState  DYING CARRYING

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIWRKR_SKL.UIWRKR_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIWRKR_SKL.UIWRKR_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIWRKR_SKL.UIWRKR_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState   SPECIAL_CHEERING
Animation      UIWRKR_SKL.UIWRKR_CHA
AnimationMode  ONCE
End

ConditionState   ACTIVELY_CONSTRUCTING
Animation      UIWRKR_SKL.UIWRKR_BDA
AnimationMode  LOOP
TransitionKey  TRANS_Constructing
End
AliasConditionState  ACTIVELY_CONSTRUCTING CARRYING

; --------------------
ConditionState  DOCKING
Animation      UIWRKR_SKL.UIWRKR_PIK
AnimationMode  ONCE
TransitionKey  DroppingCrate
End

ConditionState  DOCKING CARRYING
Animation      UIWRKR_SKL.UIWRKR_PIK
AnimationMode  ONCE_BACKWARDS
AnimationSpeedFactorRange  2.3 2.3
Flags          START_FRAME_LAST
TransitionKey  DroppingCrate
End

TransitionState  TRANS_Stand TRANS_Constructing
Animation      UIWRKR_SKL.UIWRKR_TRA1
AnimationMode  ONCE
End

TransitionState  TRANS_Constructing TRANS_Stand
Animation      UIWRKR_SKL.UIWRKR_TRA2
AnimationMode  ONCE
End

End


; ***DESIGN parameters ***
DisplayName  OBJECT:Worker
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)


WeaponSet
Conditions  None
Weapon  PRIMARY None
End
WeaponSet
Conditions  MINE_CLEARING_DETAIL
Weapon  PRIMARY WorkerMineDisarmingWeapon
End

ArmorSet
Conditions       None
Armor            WorkerHumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  100
ShroudClearingRange  220

BuildCost  200
BuildTime  3.0          ;in seconds
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet  GLAWorkerCommandSet

; *** AUDIO Parameters ***
VoiceSelect  WorkerVoiceSelect
VoiceMove  WorkerVoiceMove
VoiceAttack  WorkerVoiceMove
VoiceGuard  WorkerVoiceMove
VoiceFear  WorkerVoiceFear
VoiceTaskComplete  WorkerVoiceBuildComplete
UnitSpecificSounds
VoiceEnter         WorkerVoiceMoveUpgraded
VoiceEnterHostile  WorkerVoiceMoveUpgraded
VoiceGarrison      WorkerVoiceGarrison
VoiceCreate        WorkerVoiceCreate
VoiceSupply        WorkerVoiceSupply
VoiceNoBuild       WorkerVoiceBuildNot
VoiceRepair        WorkerVoiceRepair
VoiceDisarm        WorkerVoiceClearMine
VoiceBuildResponse  WorkerVoiceBuild
VoiceGetHealed     WorkerVoiceMoveUpgraded
VoiceMoveUpgraded  WorkerVoiceMoveUpgraded
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER DOZER HARVESTER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  WorkerAIUpdate ModuleTag_03
RepairHealthPercentPerSecond   2%    ; % of max health to repair each second
BoredTime                      5000  ; in milliseconds
BoredRange                     150   ; when bored, we look this far away to do something
MaxBoxes                       1
UpgradedSupplyBoost            8 ; gives this much more cash for every box collected
SupplyCenterActionDelay        150 ;400 ; ms for whole thing (one transaction)
SupplyWarehouseActionDelay     150 ;400 ;ms per box (many small transactions)
SupplyWarehouseScanDistance    700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
SuppliesDepletedVoice  WorkerVoiceSuppliesDepleted
; the only "enemies" that workers can acquire are mines, to be disarmed...
AutoAcquireEnemiesWhenIdle     Yes
End
Locomotor  SET_NORMAL FastHumanLocomotor
Locomotor  SET_NORMAL_UPGRADED WorkerShoesLocomotor
Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  SquishCollide ModuleTag_06
;nothing
End
Behavior  LocomotorSetUpgrade ModuleTag_07
TriggeredBy  Upgrade_GLAWorkerShoes
End

Behavior  StatusBitsUpgrade ModuleTag_0625
TriggeredBy    Upgrade_GLAWorkerShoes
StatusToSet    STATUS_RIDER8
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_WorkerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_WorkerDie
End
Behavior  CreateObjectDie ModuleTag_Death03_OCLOne
DeathTypes  NONE +EXPLODED
ExemptStatus  STATUS_RIDER8
CreationList  OCL_GLAExplodedDeathWorker
End
Behavior  CreateObjectDie ModuleTag_Death03_OCLTwo
DeathTypes  NONE +EXPLODED
RequiredStatus  STATUS_RIDER8
CreationList  OCL_GLAExplodedDeathWorkerShoes
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_WorkerDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL xxxxxxxxx
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_WorkerSurrender
OCL                  INITIAL OCL_WorkerSurrendering
End
; --- end Death modules ---



Behavior  StealthDetectorUpdate ModuleTag_StealthDetect01
DetectionRate              100   ; how often to rescan for stealthed things in my sight (msec)
CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
ExtraRequiredKindOf        MINE
ExtraForbiddenKindOf       UNATTACKABLE
End

Behavior  StealthDetectorUpdate ModuleTag_StealthDetect02
DetectionRate              100   ; how often to rescan for stealthed things in my sight (msec)
CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
ExtraRequiredKindOf        DEMOTRAP
ExtraForbiddenKindOf       UNATTACKABLE
End


Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  SubObjectsUpgrade ModuleTag_ShoeVissual01
TriggeredBy     Upgrade_GLAWorkerShoes
ShowSubObjects  OMGL33TSHOES
End

;*************************************
;******Transformation Code Start********
;*************************************

Behavior  ProductionUpdate ModuleTag_CommandSetUpgrade01
End

Behavior  CommandSetUpgrade ModuleTag_CommandSetUpgrade02
CommandSet       GLAWorkerCommandSet ; AmericaDozerCommandSet
TriggeredBy      Upgrade_GLAWorkerRealCommandSet
RemovesUpgrades  Upgrade_GLAWorkerRealCommandSet Upgrade_GLAWorkerFakeCommandSet
End

Behavior  StatusBitsUpgrade ModuleTag_CommandSetUpgrade03
TriggeredBy          Upgrade_GLAWorkerRealCommandSet
RemovesUpgrades      Upgrade_GLAWorkerRealCommandSet Upgrade_GLAWorkerFakeCommandSet
RequiresAllTriggers  No
StatusToSet          STATUS_RIDER1
StatusToClear        STATUS_RIDER2
End

Behavior  CommandSetUpgrade ModuleTag_CommandSetUpgrade04
CommandSet       GLAWorkerDefenceCommandSet ; AmericaDozerDefenceCommandSet
TriggeredBy      Upgrade_GLAWorkerFakeCommandSet
RemovesUpgrades  Upgrade_GLAWorkerRealCommandSet Upgrade_GLAWorkerFakeCommandSet
End

Behavior  StatusBitsUpgrade ModuleTag_CommandSetUpgrade05
TriggeredBy          Upgrade_GLAWorkerFakeCommandSet
RemovesUpgrades      Upgrade_GLAWorkerRealCommandSet Upgrade_GLAWorkerFakeCommandSet
RequiresAllTriggers  No
StatusToSet          STATUS_RIDER2
StatusToClear        STATUS_RIDER1
End

Behavior  StatusBitsUpgrade ModuleTag_CommandSetUpgrade06
TriggeredBy          Upgrade_CostReduction
ConflictsWith        Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
RequiresAllTriggers  No
StatusToSet          STATUS_RIDER1
End

;This module fires a weapon with a dummy collision object that ensures that we always have collision
Behavior  FireWeaponUpdate ModuleTag_CommandSetUpgrade07
Weapon  GenericCollisionDummyWeapon
End

Behavior  FireWeaponCollide ModuleTag_CommandSetUpgrade08
CollideWeapon   GLAWorkerStandardBuildingDecalWeapon
RequiredStatus  STATUS_RIDER1
End

Behavior  FireWeaponCollide ModuleTag_CommandSetUpgrade09
CollideWeapon   GLAWorkerDefenceBuildingDecalWeapon
RequiredStatus  STATUS_RIDER2
End

;************************************
;******Transformation Code End********
;************************************

;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object WorkerDefaultDecalObject

  Draw  W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model                ExJammerRadius
    End
  End

  EditorSorting  SYSTEM

  ArmorSet
    Conditions       None
    Armor            InvulnerableArmorAll
    DamageFX         None
  End


  ; *** ENGINEERING Parameters ***
  KindOf  PRELOAD CAN_CAST_REFLECTIONS CLICK_THROUGH NO_COLLIDE FS_FAKE CLEARED_BY_BUILD

  Body  ActiveBody ModuleTag_02
    MaxHealth        10.0
    InitialHealth    10.0
  End
  
  Behavior  DeletionUpdate ModuleTag_03
    MinLifetime  50
    MaxLifetime  50
  End
  
  Scale   25.0
  ShadowTexture  EXEUDzrNrm
  ShadowSizeX  20
  ShadowSizeY  20

End


Object GLAInfantryWorker_AI
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SUWorker_L
ButtonImage             SUWorker

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

DefaultConditionState
Model          UIWRKR_SKN
IdleAnimation  UIWRKR_SKL.UIWRKR_STA 0 9
IdleAnimation  UIWRKR_SKL.UIWRKR_IDA
AnimationMode  ONCE
TransitionKey  TRANS_Stand
HideSubObject  OMGL33TSHOES
WaitForStateToFinishIfPossible  DroppingCrate
End

ConditionState   MOVING
Animation      UIWRKR_SKL.UIWRKR_RNA 16
AnimationMode  LOOP
Flags          RANDOMSTART
TransitionKey  TRANS_Moving
ParticleSysBone  None InfantryDustTrails
End
; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
; since we flip the bit once we get pretty close to the target. but it looks
; funky to do the construction animation while moving.
; so just use the normal move animation in that case.
AliasConditionState  ACTIVELY_CONSTRUCTING MOVING

ConditionState  ATTACKING
ShowSubObject  MINED_SKIN
Animation  UIWRKR_SKL.UIWRKR_MS
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_MetalDetector_Standing
End

ConditionState  MOVING ATTACKING
Animation  UIWRKR_SKL.UIWRKR_MSW 50
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_MetalDetector_Moving
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState  MOVING ATTACKING CARRYING

TransitionState  TRANS_Stand TRANS_MetalDetector_Standing    ;STANDING -= ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRB1;take out standing
AnimationMode  ONCE
End
TransitionState  TRANS_MetalDetector_Standing TRANS_Stand    ;ATTACKING -= STANDING
Animation      UIWRKR_SKL.UIWRKR_TRB2;put away standing
AnimationMode  ONCE
End

TransitionState  TRANS_Carry TRANS_MetalDetector_Standing    ;CARRYING -= ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRB1;take out standing
AnimationMode  ONCE
End
TransitionState  TRANS_MetalDetector_Standing TRANS_Carry    ;ATTACKING -= CARRYING
ShowSubObject  MINED_SKIN
Animation      UIWRKR_SKL.UIWRKR_TRB2;put away standing
AnimationMode  ONCE
End
TransitionState  TRANS_Carry TRANS_MetalDetector_Moving      ;CARRYING -= MOVING ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End

TransitionState  TRANS_MetalDetector_Moving TRANS_Stand      ;MOVING ATTACKING -= STANDING
Animation      UIWRKR_SKL.UIWRKR_TRB2;put away moving
AnimationMode  ONCE
End
TransitionState  TRANS_Stand TRANS_MetalDetector_Moving      ;STANDING -= MOVING ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End

TransitionState  TRANS_Moving TRANS_MetalDetector_Standing   ;MOVING -= ATTACKING [STANDING]
Animation      UIWRKR_SKL.UIWRKR_TRB1;take out standing
AnimationMode  ONCE
End
TransitionState  TRANS_MetalDetector_Standing TRANS_Moving   ;ATTACKING [STANDING] -= MOVING
Animation      UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End

TransitionState  TRANS_Moving TRANS_MetalDetector_Moving     ;MOVING -= MOVING ATTACKING
Animation      UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End
TransitionState  TRANS_MetalDetector_Moving TRANS_Moving     ;MOVING ATTACKING -= MOVING
Animation      UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
AnimationMode  ONCE
AnimationSpeedFactorRange  2.0 2.0
End


ConditionState  MOVING CARRYING
ShowSubObject  BOX
Animation  UIWRKR_SKL.UIWRKR_CARY 12
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_Carry
ParticleSysBone  None InfantryDustTrails
End
; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
; since we flip the bit once we get pretty close to the target. but it looks
; funky to do the construction animation while moving.
; so just use the normal move animation in that case.
AliasConditionState  ACTIVELY_CONSTRUCTING MOVING CARRYING

ConditionState  CARRYING
Animation  UIWRKR_SKL.UIWRKR_CARST 30
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  TRANS_Carry
End

ConditionState  DYING
Animation  UIWRKR_SKL.UIWRKR_DTA
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End
AliasConditionState  DYING CARRYING

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIWRKR_SKL.UIWRKR_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIWRKR_SKL.UIWRKR_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIWRKR_SKL.UIWRKR_ADTE3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState   SPECIAL_CHEERING
Animation      UIWRKR_SKL.UIWRKR_CHA
AnimationMode  ONCE
End

ConditionState   ACTIVELY_CONSTRUCTING
Animation      UIWRKR_SKL.UIWRKR_BDA
AnimationMode  LOOP
TransitionKey  TRANS_Constructing
End
AliasConditionState  ACTIVELY_CONSTRUCTING CARRYING

; --------------------
ConditionState  DOCKING
Animation      UIWRKR_SKL.UIWRKR_PIK
AnimationMode  ONCE
TransitionKey  DroppingCrate
End

ConditionState  DOCKING CARRYING
Animation      UIWRKR_SKL.UIWRKR_PIK
AnimationMode  ONCE_BACKWARDS
AnimationSpeedFactorRange  2.3 2.3
Flags          START_FRAME_LAST
TransitionKey  DroppingCrate
End

TransitionState  TRANS_Stand TRANS_Constructing
Animation      UIWRKR_SKL.UIWRKR_TRA1
AnimationMode  ONCE
End

TransitionState  TRANS_Constructing TRANS_Stand
Animation      UIWRKR_SKL.UIWRKR_TRA2
AnimationMode  ONCE
End

End


; ***DESIGN parameters ***
DisplayName  OBJECT:Worker
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)


WeaponSet
Conditions  None
Weapon  PRIMARY None
End
WeaponSet
Conditions  MINE_CLEARING_DETAIL
Weapon  PRIMARY WorkerMineDisarmingWeapon
End

ArmorSet
Conditions       None
Armor            WorkerHumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  100
ShroudClearingRange  220

BuildCost  200
BuildTime  3.0          ;in seconds
CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet  GLAWorkerCommandSet_AI

; *** AUDIO Parameters ***
VoiceSelect  WorkerVoiceSelect
VoiceMove  WorkerVoiceMove
VoiceAttack  WorkerVoiceMove
VoiceGuard  WorkerVoiceMove
VoiceFear  WorkerVoiceFear
VoiceTaskComplete  WorkerVoiceBuildComplete
UnitSpecificSounds
VoiceEnter         WorkerVoiceMoveUpgraded
VoiceEnterHostile  WorkerVoiceMoveUpgraded
VoiceGarrison      WorkerVoiceGarrison
VoiceCreate        WorkerVoiceCreate
VoiceSupply        WorkerVoiceSupply
VoiceNoBuild       WorkerVoiceBuildNot
VoiceRepair        WorkerVoiceRepair
VoiceDisarm        WorkerVoiceClearMine
VoiceBuildResponse  WorkerVoiceBuild
VoiceGetHealed     WorkerVoiceMoveUpgraded
VoiceMoveUpgraded  WorkerVoiceMoveUpgraded
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER DOZER HARVESTER SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        120.0
InitialHealth    120.0
End

Behavior  WorkerAIUpdate ModuleTag_03
RepairHealthPercentPerSecond   2%    ; % of max health to repair each second
BoredTime                      5000  ; in milliseconds
BoredRange                     150   ; when bored, we look this far away to do something
MaxBoxes                       1
UpgradedSupplyBoost            8 ; gives this much more cash for every box collected
SupplyCenterActionDelay        150 ;400 ; ms for whole thing (one transaction)
SupplyWarehouseActionDelay     150 ;400 ;ms per box (many small transactions)
SupplyWarehouseScanDistance    700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
SuppliesDepletedVoice  WorkerVoiceSuppliesDepleted
; the only "enemies" that workers can acquire are mines, to be disarmed...
AutoAcquireEnemiesWhenIdle     Yes
End
Locomotor  SET_NORMAL FastHumanLocomotor
Locomotor  SET_NORMAL_UPGRADED WorkerShoesLocomotor
Behavior  PhysicsBehavior ModuleTag_04
Mass  5.0
End

Behavior  SquishCollide ModuleTag_06
;nothing
End
Behavior  LocomotorSetUpgrade ModuleTag_07
TriggeredBy  Upgrade_GLAWorkerShoes
End

Behavior  StatusBitsUpgrade ModuleTag_0625
TriggeredBy    Upgrade_GLAWorkerShoes
StatusToSet    STATUS_RIDER8
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_WorkerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_WorkerDie
End
Behavior  CreateObjectDie ModuleTag_Death03_OCLOne
DeathTypes  NONE +EXPLODED
ExemptStatus  STATUS_RIDER8
CreationList  OCL_GLAExplodedDeathWorker
End
Behavior  CreateObjectDie ModuleTag_Death03_OCLTwo
DeathTypes  NONE +EXPLODED
RequiredStatus  STATUS_RIDER8
CreationList  OCL_GLAExplodedDeathWorkerShoes
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_WorkerDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL xxxxxxxxx
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Surrender_Death
DeathTypes           NONE +EXTRA_8
DestructionDelay     0
FX                   INITIAL FX_WorkerSurrender
OCL                  INITIAL OCL_WorkerSurrendering
End
; --- end Death modules ---



Behavior  StealthDetectorUpdate ModuleTag_StealthDetect01
DetectionRate              100   ; how often to rescan for stealthed things in my sight (msec)
CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
ExtraRequiredKindOf        MINE
ExtraForbiddenKindOf       UNATTACKABLE
End

Behavior  StealthDetectorUpdate ModuleTag_StealthDetect02
DetectionRate              100   ; how often to rescan for stealthed things in my sight (msec)
CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
ExtraRequiredKindOf        DEMOTRAP
ExtraForbiddenKindOf       UNATTACKABLE
End


Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  SubObjectsUpgrade ModuleTag_ShoeVissual01
TriggeredBy     Upgrade_GLAWorkerShoes
ShowSubObjects  OMGL33TSHOES
End


;Geometry  CYLINDER
;GeometryMajorRadius  10.0
;GeometryMinorRadius  10.0
;GeometryHeight  12.0
;GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object GLAInfantryBlackMarketArmsDealer01
Scale 0.90
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor   Yes

DefaultConditionState
Model          UIDealer02_SKN
IdleAnimation  UIPART_SKL.UIPART_STA 0 10
IdleAnimation  UIPART_SKL.UIPART_IDA
IdleAnimation  UIPART_SKL.UIPART_IDB
AnimationMode  ONCE
Turret         UIPART_MAINRT
End

End

; ***DESIGN parameters ***
DisplayName    OBJECT:GunMerchant
EditorSorting  SYSTEM

ArmorSet
Conditions       None
Armor            InvulnerableAllButStatusArmor
DamageFX         None
End

; *** ENGINEERING Parameters ***
KindOf  PRELOAD CAN_ATTACK CAN_CAST_REFLECTIONS CLICK_THROUGH IMMOBILE

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
TurretTurnRate         80
ControlledWeaponSlots  PRIMARY
NaturalTurretAngle     -135.0
End
End

; --- begin Death modules ---
Behavior  DestroyDie ModuleTag_Death01
End
; --- end Death modules ---

Behavior  StealthUpdate ModuleTag_GPSStealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
InnateStealth                Yes
RequiredStatus               REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  AutoDepositUpdate ModuleTag_MakeMoney01
DepositTiming        1800  ; in milliseconds
DepositAmount        25    ; cash amount to deposit every DepositTiming
InitialCaptureBonus  0     ; no initial bonus
End

Behavior  FireWeaponCollide ModuleTag_KillSelf01
CollideWeapon   SuicideUnresistableWeapon
RequiredStatus  HIJACKED
End

Behavior  BoneFXDamage ModuleTag_Collision01
End

Behavior  BoneFXUpdate ModuleTag_Collision02
PristineOCL1       bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
DamagedOCL1        bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
ReallyDamagedOCL1  bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
End

Geometry  CYLINDER
GeometryMajorRadius  30.0
GeometryMinorRadius  30.0
GeometryHeight  12.0
GeometryIsSmall  Yes

End

;------------------------------------------------------------------------------
Object GLAInfantryBlackMarketArmsDealer02
Scale 0.90
Draw  W3DModelDraw ModuleTag_01

DefaultConditionState
Model          UIDealer01_SKN
IdleAnimation  UIPART2_SKL.UIPART2_STA 0 10
IdleAnimation  UIPART2_SKL.UIPART2_IDA
IdleAnimation  UIPART2_SKL.UIPART2_IDB
AnimationMode  ONCE
End

End

; ***DESIGN parameters ***
DisplayName    OBJECT:SmallArmsMerchant
EditorSorting  SYSTEM

ArmorSet
Conditions       None
Armor            InvulnerableAllButStatusArmor
DamageFX         None
End

; *** ENGINEERING Parameters ***
KindOf  PRELOAD CAN_ATTACK CAN_CAST_REFLECTIONS CLICK_THROUGH IMMOBILE

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
End

; --- begin Death modules ---
Behavior  DestroyDie ModuleTag_Death01
End
; --- end Death modules ---

Behavior  StealthUpdate ModuleTag_GPSStealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
InnateStealth                Yes
RequiredStatus               REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  AutoDepositUpdate ModuleTag_MakeMoney01
DepositTiming        1800  ; in milliseconds
DepositAmount        25    ; cash amount to deposit every DepositTiming
InitialCaptureBonus  0     ; no initial bonus
End

Behavior  FireWeaponCollide ModuleTag_KillSelf01
CollideWeapon   SuicideUnresistableWeapon
RequiredStatus  HIJACKED
End

Behavior  BoneFXDamage ModuleTag_Collision01
End

Behavior  BoneFXUpdate ModuleTag_Collision02
PristineOCL1       bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
DamagedOCL1        bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
ReallyDamagedOCL1  bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
End

Geometry  CYLINDER
GeometryMajorRadius  30.0
GeometryMinorRadius  30.0
GeometryHeight  12.0
GeometryIsSmall  Yes

End

;------------------------------------------------------------------------------
Object GLAInfantryBlackMarketArmsDealer03
Scale 0.90
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor   Yes

DefaultConditionState
Model          UIDealer03_SKN
IdleAnimation  CIUMC01_SKL.CIUMC01_STN 0 10
IdleAnimation  CIUMC01_SKL.CIUMC01_IDA
AnimationMode  ONCE
Turret         CIUMC01_MAINRT
End

End

; ***DESIGN parameters ***
DisplayName    OBJECT:HeavyWeaponsMerchant
EditorSorting  SYSTEM

ArmorSet
Conditions       None
Armor            InvulnerableAllButStatusArmor
DamageFX         None
End

; *** ENGINEERING Parameters ***
KindOf  PRELOAD CAN_ATTACK CAN_CAST_REFLECTIONS CLICK_THROUGH IMMOBILE

Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_073243
Turret
TurretTurnRate         80
ControlledWeaponSlots  PRIMARY
NaturalTurretAngle     -25
End
End

; --- begin Death modules ---
Behavior  DestroyDie ModuleTag_Death01
End
; --- end Death modules ---

Behavior  StealthUpdate ModuleTag_GPSStealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
InnateStealth                Yes
RequiredStatus               REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  AutoDepositUpdate ModuleTag_MakeMoney01
DepositTiming        1800  ; in milliseconds
DepositAmount        25    ; cash amount to deposit every DepositTiming
InitialCaptureBonus  0     ; no initial bonus
End

Behavior  FireWeaponCollide ModuleTag_KillSelf01
CollideWeapon   SuicideUnresistableWeapon
RequiredStatus  HIJACKED
End

Behavior  BoneFXDamage ModuleTag_Collision01
End

Behavior  BoneFXUpdate ModuleTag_Collision02
PristineOCL1       bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
DamagedOCL1        bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
ReallyDamagedOCL1  bone:NULL OnlyOnce:No 0 0 OCL:OCL_GenericNoAICollisionObjectDummy
End

Geometry  CYLINDER
GeometryMajorRadius  30.0
GeometryMinorRadius  30.0
GeometryHeight  12.0
GeometryIsSmall  Yes

End

;------------------------------------------------------------------------------
Object GLAGunMerchant1DummyObject

; *** ART Parameters ***
ButtonImage             SSGunMerchant

; ***DESIGN parameters ***
DisplayName            OBJECT:GunMerchant
MaxSimultaneousOfType  1
Side                   GLA
EditorSorting          SYSTEM
TransportSlotCount     0
BuildTime              45.0
BuildCost              2000

Prerequisites
Object  GLAPalace
End

Behavior  GrantUpgradeCreate ModuleTag_01
UpgradeToGrant  Upgrade_BlackMarketMerchant1
End

Behavior  DeletionUpdate ModuleTag_02
MinLifetime  1000
MaxLifetime  1000
End

End

;------------------------------------------------------------------------------
Object GLAGunMerchant2DummyObject

; *** ART Parameters ***
ButtonImage             SSSmallArmsMerchant

; ***DESIGN parameters ***
DisplayName            OBJECT:SmallArmsMerchant
MaxSimultaneousOfType  1
Side                   GLA
EditorSorting          SYSTEM
TransportSlotCount     0
BuildTime              45.0
BuildCost              2000

Prerequisites
;    Object  GLAPalace
Object  GLAInfantryBlackMarketArmsDealer01
End

Behavior  GrantUpgradeCreate ModuleTag_01
UpgradeToGrant  Upgrade_BlackMarketMerchant2
End

Behavior  DeletionUpdate ModuleTag_02
MinLifetime  1000
MaxLifetime  1000
End

End

;------------------------------------------------------------------------------
Object GLAGunMerchant3DummyObject

; *** ART Parameters ***
ButtonImage             SSHeavyWeaponsMerchant

; ***DESIGN parameters ***
DisplayName            OBJECT:HeavyWeaponsMerchant
MaxSimultaneousOfType  1
Side                   GLA
EditorSorting          SYSTEM
TransportSlotCount     0
BuildTime              45.0
BuildCost              2000

Prerequisites
;    Object  GLAPalace
Object  GLAInfantryBlackMarketArmsDealer01
Object  GLAInfantryBlackMarketArmsDealer02
End

Behavior  GrantUpgradeCreate ModuleTag_01
UpgradeToGrant  Upgrade_BlackMarketMerchant3
End

Behavior  DeletionUpdate ModuleTag_02
MinLifetime  1000
MaxLifetime  1000
End

End
