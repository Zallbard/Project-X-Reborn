Object GLAInfantryAngryMobNexus
Scale 0.90
;**** ART Parameters **************************
SelectPortrait          SUAngryMob_L
ButtonImage             SUAngryMob

UpgradeCameo1  Upgrade_GLAArmTheMob

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  None
End
End


;****DESIGN parameters **************************

DisplayName       OBJECT:AngryMobNexus
Side  GLA

RadarPriority        NOT_ON_RADAR

EditorSorting    INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY   GLAAngryMobNexusHarmlessWeapon
Weapon  SECONDARY GLAAngryMobNexusHarmlessWeapon
Weapon  TERTIARY  GLAAngryMobNexusHarmlessWeapon
End


ArmorSet
Conditions       None
Armor            InvulnerableAllArmor
DamageFX         None
End

BuildCost        1200
BuildTime        18.0          ;in seconds
VisionRange      220  ; it can scout for the spawn
ShroudClearingRange  0

Prerequisites
Object  GLABarracks
Object  GLABlackMarket
End

IsTrainable      No

ExperienceValue  30 60 120 240    ;Experience point value at each level

CommandSet     GLAInfantryAngryMobCommandSet;

;**** AUDIO Parameters *****************************
VoiceSelect  AngryMobVoiceSelect
VoiceMove  AngryMobVoiceMove
VoiceGuard  AngryMobVoiceMove
VoiceAttack  AngryMobVoiceAttack
SoundMoveStart  NoSound
SoundAmbient  AngryMobAmbientLoop
SoundAmbientRubble  NoSound
UnitSpecificSounds
VoiceCreate           AngryMobVoiceCreate
End


;**** ENGINEERING Parameters ******************************

RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK INFANTRY OBSTACLE MOB_NEXUS ATTACK_NEEDS_LINE_OF_SIGHT NO_COLLIDE SELECTABLE SCORE
Body  ImmortalBody ModuleTag_02
MaxHealth        99999.0
InitialHealth    99999.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Locomotor  SET_NORMAL AngryMobNexusLocomotor
Locomotor  SET_WANDER AngryMobNexusLocomotor
Locomotor  SET_PANIC AngryMobNexusLocomotor


Behavior  PhysicsBehavior ModuleTag_04
Mass  50.0
End

Behavior             SpawnBehavior ModuleTag_05
SpawnNumber        15
SpawnReplaceDelay  20000 ; 20 seconds

;GLAInfantryAngryMobPistol01          ; Aladdin that gets a bigger gun
;GLAInfantryAngryMobPistolToMolotov01 ; Aladdin gets hot sauce
;GLAInfantryAngryMobRock02            ; Woman in the Gypsy Costume that gets a bigger gun
;GLAInfantryAngryMobMolotov02         ; The Lady with the hot sauce
;GLAInfantryAngryMobPistol03          ; Skinny Guy with the Green Beret that gets a bigger gun
;GLAInfantryAngryMobPistolToMolotov03 ; Skinny Guy with the Green Beret that gets hot sauce
;GLAInfantryAngryMobRock04            ; Fat guy with the tank top that gets a bigger gun
;GLAInfantryAngryMobMolotov04         ; Fat guy with the hot sauce
;GLAInfantryAngryMobPistol05          ; The robed dude with the Man-Veil that gets a bigger gun
;GLAInfantryAngryMobPistolToMolotov05 ; The robed dude with the Man-Veil that gets hot sauce
;GLAInfantryAngryMobRock02            ; Woman in the Gypsy Costume that gets a bigger gun

SpawnTemplateName  GLAInfantryAngryPistolToAK47
SpawnTemplateName  GLAInfantryAngryPistolToMolotov
SpawnTemplateName  GLAInfantryAngryRockToAK47
SpawnTemplateName  GLAInfantryAngryRockToMolotov

ExitByBudding       Yes;!
OneShot             No
AggregateHealth     Yes
SlavesHaveFreeWill  No
End

Behavior  QueueProductionExitUpdate ModuleTag_06
UnitCreatePoint    X:0.0 Y:0.0 Z:0.0
NaturalRallyPoint  X:0.0 Y:0.0 Z:0.0
ExitDelay          5000 ; 5 sec
InitialBurst       7 ; the first set of 7 will not delay
End

Behavior  DestroyDie ModuleTag_07
DeathTypes  ALL
End

Geometry  CYLINDER
GeometryMajorRadius  1.0
GeometryMinorRadius  1.0
GeometryHeight  1.0
GeometryIsSmall  Yes
Shadow  SHADOW_VOLUME

End

;Using build variations to create greater variety in mobs instead of spawning with a fixed number of members each time
;------------------------------------------------------------------------------
Object GLAInfantryAngryRockToAK47
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobRock02 GLAInfantryAngryMobRock04
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End

;------------------------------------------------------------------------------
Object GLAInfantryAngryPistolToAK47
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobPistol01 GLAInfantryAngryMobPistol03 GLAInfantryAngryMobPistol05
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End

;------------------------------------------------------------------------------
Object GLAInfantryAngryRockToMolotov
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobMolotov02 GLAInfantryAngryMobMolotov04
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End

;------------------------------------------------------------------------------
Object GLAInfantryAngryPistolToMolotov
Scale 0.90
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  UIMOB01_SKN
End
End
Side  GLA
EditorSorting  SYSTEM
BuildVariations  GLAInfantryAngryMobPistolToMolotov01 GLAInfantryAngryMobPistolToMolotov03 GLAInfantryAngryMobPistolToMolotov05
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI
End


;Guy with pistol that upgrades to Molotov cocktails
Object GLAInfantryAngryMobPistol01
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING PISTOL
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB01_SKN
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA1 0 12
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA2 0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_CHA  0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End

ConditionState  MOVING
Animation  UIMOB01_SKL.UIMOB01_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB01_SKL.UIMOB01_CHD
AnimationMode  ONCE
End

; Aiming Pistol
TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  ATTACKING FIRING_A
Animation  UIMOB01_SKL.UIMOB01_ATA1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB01_SKL.UIMOB01_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RELOADING_A
Animation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB01_SKL.UIMOB01_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

;--------------------------------------------------------
; TRANSITION FROM PISTOL TO AK47
TransitionState  TRANS_STAND TRANS_STAND_AK
Animation  UIMOB01_SKL.UIMOB01_TA-D
AnimationMode  ONCE
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
Model  UIMOB01_SKN
IdleAnimation  UIMOB01_SKL.UIMOB01_IDD1 0 6
IdleAnimation  UIMOB01_SKL.UIMOB01_IDD2 0 6
IdleAnimation  UIMOB01_SKL.UIMOB01_CHD  0 6
IdleAnimation  UIMOB01_SKL.UIMOB01_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_DD1
Animation  UIMOB01_SKL.UIMOB01_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB01_SKL.UIMOB01_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB01_SKL.UIMOB01_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  None
End
End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobPistolWeapon
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY GLAAngryMobAK47Weapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB01
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  WeaponSetUpgrade UpgradeTag_01
TriggeredBy  Upgrade_GLAArmTheMob
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with pistol that upgrades to Molotov cocktails
Object GLAInfantryAngryMobPistolToMolotov01
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; While carrying pistol
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB01_SKN
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA1 0 12
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA2 0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_CHA  0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  UIMOB01_SKL.UIMOB01_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  RIDER1 DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider1
End

ConditionState  RIDER2 DYING
Animation  UIMOB01_SKL.UIMOB01_DA1
Animation  UIMOB01_SKL.UIMOB01_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider2
End

ConditionState  RIDER1 SPECIAL_CHEERING
Animation  UIMOB01_SKL.UIMOB01_CHD
AnimationMode  ONCE
End
AliasConditionState  RIDER2 SPECIAL_CHEERING

; Aiming Pistol

ConditionState  RIDER1 PREATTACK_A
Animation      UIMOB01_SKL.UIMOB01_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  RIDER1 FIRING_A
Animation  UIMOB01_SKL.UIMOB01_ATA2_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB01_SKL.UIMOB01_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RIDER1 RELOADING_A
Animation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB01_SKL.UIMOB01_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB01_SKL.UIMOB01_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

; Upgraded with Molotovs
;---------------------------------------------------------

ConditionState  RIDER2
IdleAnimation  UIMOB01_SKL.UIMOB01_IDA1 0 12
IdleAnimation  UIMOB01_SKL.UIMOB01_CHA  0 5
IdleAnimation  UIMOB01_SKL.UIMOB01_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End

ConditionState  MOVING RIDER2
Animation  UIMOB01_SKL.UIMOB01_RNA
Animation  UIMOB01_SKL.UIMOB01_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  MOVING_MOLOTOV
End

; Drawing Molotov
ConditionState   RIDER2 PREATTACK_A
Animation      UIMOB01_SKL.UIMOB01_ATCA_BF ; wind up
AnimationMode  ONCE
TransitionKey  TRANS_PREATTACK_MOLOTOV
End

; Throwing Molotov
ConditionState  RIDER2 FIRING_A
Animation  UIMOB01_SKL.UIMOB01_ATCA_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_MOLOTOV
AnimationSpeedFactorRange 2.0 2.0
End

; Reloading Molotov
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Animation  UIMOB01_SKL.UIMOB01_STA 0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_RELOADING_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End
AliasConditionState  RIDER2 RELOADING_A


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  Bogo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider1 TRANS_Flailing_Rider1
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider1
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  Logo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider2 TRANS_Flailing_Rider2
Animation  UIMOB01_SKL.UIMOB01_A_ADTE1
Animation  UIMOB01_SKL.UIMOB01_D_ADTE1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE2
Animation  UIMOB01_SKL.UIMOB01_D_ADTE2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider2
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Animation  UIMOB01_SKL.UIMOB01_A_ADTE3
Animation  UIMOB01_SKL.UIMOB01_D_ADTE3
AnimationMode  ONCE
TransitionKey  Zogo
End


End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  WEAPON_RIDER1
Weapon  PRIMARY GLAAngryMobPistolWeapon
End

WeaponSet
Conditions  WEAPON_RIDER2
Weapon  PRIMARY GLAAngryMobMolotovCocktailProjectileWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB01
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC  AngryMobPanicLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  StatusBitsUpgrade ModuleTag_Upgrade01
TriggeredBy     Upgrade_GLAArmTheMob
StatusToSet     HIJACKED
End

Behavior  SubObjectsUpgrade ModuleTag_Upgrade02
TriggeredBy     Upgrade_GLAArmTheMob
HideSubObjects  AK47 PISTOL_01
End

;This module triggers the weapon switch for all mob members freshly build or spawned
Behavior  FireWeaponCollide  ModuleTag_Upgrade03
CollideWeapon    GLAAngryMobPistolToMolotovTriggerWeapon
RequiredStatus   STATUS_RIDER1 HIJACKED
End

;This module triggers the weapon switch for all mob members presently on the map
Behavior  ObjectCreationUpgrade ModuleTag_Upgrade04
UpgradeObject    OCL_GenericDummyRider2_Normal
TriggeredBy      Upgrade_GLAArmTheMob
End

Behavior  RiderChangeContain ModuleTag_Upgrade05
;;;;Normal
Rider1  GenericFakeRider1_Default_Rank RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GenericCommandSet SET_NORMAL
;;;;Upgraded
Rider2  GenericFakeRider2_Default_Rank RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GenericCommandSet SET_NORMAL

Slots                  1
InitialPayload         GenericFakeRider1_Default_Rank 1
DamagePercentToUnits   100%
BurnedDeathToUnits     No
AllowInsideKindOf      CAN_ATTACK
ScuttleDelay           100
ScuttleStatus          TOPPLED
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Woman with throwing rock that upgrades to an AK
Object GLAInfantryAngryMobRock02
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB02_SKN
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB1 0 12
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB2 0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_CHB  0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
WeaponFireFXBone   PRIMARY NONE
WeaponMuzzleFlash  PRIMARY NONE
End


; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB02_SKL.UIMOB02_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  ATTACKING FIRING_A
Animation  UIMOB02_SKL.UIMOB02_ATB1_AF ; throw
Animation  UIMOB02_SKL.UIMOB02_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A


ConditionState  MOVING
Animation  UIMOB02_SKL.UIMOB02_RNB
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  DYING
Animation  UIMOB02_SKL.UIMOB02_DB1
Animation  UIMOB02_SKL.UIMOB02_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB02_SKL.UIMOB02_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


;--------------------------------------------------------
; TRANSITION FROM STONE TO AK47
TransitionState  TRANS_STAND_A TRANS_STAND_AK
Animation  UIMOB02_SKL.UIMOB02_TB-D
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
IdleAnimation  UIMOB02_SKL.UIMOB02_IDD1 0 6
IdleAnimation  UIMOB02_SKL.UIMOB02_IDD2 0 6
IdleAnimation  UIMOB02_SKL.UIMOB02_CHD  0 6
IdleAnimation  UIMOB02_SKL.UIMOB02_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_DD1
Animation  UIMOB02_SKL.UIMOB02_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB02_SKL.UIMOB02_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
WeaponFireFXBone   SECONDARY NONE
WeaponMuzzleFlash  SECONDARY NONE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB02_SKL.UIMOB02_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB02_SKL.UIMOB02_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB02_SKL.UIMOB02_B_ADTA1
Animation  UIMOB02_SKL.UIMOB02_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA2
Animation  UIMOB02_SKL.UIMOB02_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA3
Animation  UIMOB02_SKL.UIMOB02_D_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

End



;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobRockProjectileWeapon
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY GLAAngryMobAK47Weapon ; for atttacking in AK-proof conditions
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  WeaponSetUpgrade UpgradeTag_01
TriggeredBy  Upgrade_GLAArmTheMob
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Woman with throwing rock that upgrades to Molotov cocktails
Object GLAInfantryAngryMobMolotov02
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB02_SKN
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB1 0 12
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB2 0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_CHB  0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End


; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB02_SKL.UIMOB02_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  FIRING_A
Animation  UIMOB02_SKL.UIMOB02_ATB1_AF ; throw
Animation  UIMOB02_SKL.UIMOB02_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A



ConditionState  DYING
Animation  UIMOB02_SKL.UIMOB02_DB1
Animation  UIMOB02_SKL.UIMOB02_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB02_SKL.UIMOB02_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


; WHILE CARRYING MOLOTOV
;---------------------------------------------------------
ConditionState  USER_1
Model  UIMOB02_SKN
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB1 0 12
IdleAnimation  UIMOB02_SKL.UIMOB02_IDB2 0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_CHB  0 5
IdleAnimation  UIMOB02_SKL.UIMOB02_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End


; Drawing Molotov
ConditionState   USER_1 PREATTACK_A
Animation      UIMOB02_SKL.UIMOB02_ATCB_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  USER_1 PREATTACK_A FIRING_A
AliasConditionState  USER_1 PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing Molotov
ConditionState  USER_1 FIRING_A
Animation  UIMOB02_SKL.UIMOB02_ATCB_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.0 2.0
End
AliasConditionState  USER_1 BETWEEN_FIRING_SHOTS_A
AliasConditionState  USER_1 RELOADING_A

ConditionState  USER_1 MOVING
Animation  UIMOB02_SKL.UIMOB02_RNB
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  USER_1 DYING
Animation  UIMOB02_SKL.UIMOB02_DB1
Animation  UIMOB02_SKL.UIMOB02_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  USER_1 SPECIAL_CHEERING
Animation  UIMOB02_SKL.UIMOB02_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End

;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB02_SKL.UIMOB02_B_ADTA1
Animation  UIMOB02_SKL.UIMOB02_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA2
Animation  UIMOB02_SKL.UIMOB02_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB02_SKL.UIMOB02_B_ADTA3
Animation  UIMOB02_SKL.UIMOB02_D_ADTA3
AnimationMode  ONCE
TransitionKey  None
End

End



;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobMolotovCocktailProjectileWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  ModelConditionUpgrade ModuleTag_Upgrade01
ConditionFlag  USER_1
TriggeredBy    Upgrade_GLAArmTheMob
End

Behavior  SubObjectsUpgrade ModuleTag_Upgrade02
TriggeredBy     Upgrade_GLAArmTheMob
HideSubObjects  ROCK_01
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireFemale
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinFemale
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabFemaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinFemale
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with pistol that upgrades to Molotov cocktails
ObjectReskin GLAInfantryAngryMobPistol03 GLAInfantryAngryMobPistol01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes



; WHILE CARRYING PISTOL
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB03_SKN
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA1 0 12
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA2 0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_CHA  0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End

ConditionState  MOVING
Animation  UIMOB03_SKL.UIMOB03_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB03_SKL.UIMOB03_CHD
AnimationMode  ONCE
End

; Aiming Pistol
TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  ATTACKING FIRING_A
Animation  UIMOB03_SKL.UIMOB03_ATA1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB03_SKL.UIMOB03_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RELOADING_A
Animation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB03_SKL.UIMOB03_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

;--------------------------------------------------------
; TRANSITION FROM PISTOL TO AK47
TransitionState  TRANS_STAND TRANS_STAND_AK
Animation  UIMOB03_SKL.UIMOB03_TA-D
AnimationMode  ONCE
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
Model  UIMOB03_SKN
IdleAnimation  UIMOB03_SKL.UIMOB03_IDD1 0 6
IdleAnimation  UIMOB03_SKL.UIMOB03_IDD2 0 6
IdleAnimation  UIMOB03_SKL.UIMOB03_CHD  0 6
IdleAnimation  UIMOB03_SKL.UIMOB03_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_DD1
Animation  UIMOB03_SKL.UIMOB03_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB03_SKL.UIMOB03_ATD_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB03_SKL.UIMOB03_ATD_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB03_SKL.UIMOB03_ATD_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  None
End


End


Geometry  CYLINDER
GeometryMajorRadius  3.0 ; very thin
GeometryMinorRadius  3.0 ; very thinD
GeometryHeight  12.0
GeometryIsSmall  Yes

End

;Guy with pistol that upgrades to Molotov cocktails
ObjectReskin GLAInfantryAngryMobPistolToMolotov03 GLAInfantryAngryMobPistolToMolotov01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; While carrying pistol
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB03_SKN
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA1 0 12
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA2 0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_CHA  0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  UIMOB03_SKL.UIMOB03_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  RIDER1 DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider1
End

ConditionState  RIDER2 DYING
Animation  UIMOB03_SKL.UIMOB03_DA1
Animation  UIMOB03_SKL.UIMOB03_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider2
End

ConditionState  RIDER1 SPECIAL_CHEERING
Animation  UIMOB03_SKL.UIMOB03_CHD
AnimationMode  ONCE
End
AliasConditionState  RIDER2 SPECIAL_CHEERING

; Aiming Pistol

ConditionState  RIDER1 PREATTACK_A
Animation      UIMOB03_SKL.UIMOB03_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  RIDER1 FIRING_A
Animation  UIMOB03_SKL.UIMOB03_ATA2_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB03_SKL.UIMOB03_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RIDER1 RELOADING_A
Animation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB03_SKL.UIMOB03_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB03_SKL.UIMOB03_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

; Upgraded with Molotovs
;---------------------------------------------------------

ConditionState  RIDER2
IdleAnimation  UIMOB03_SKL.UIMOB03_IDA1 0 12
IdleAnimation  UIMOB03_SKL.UIMOB03_CHA  0 5
IdleAnimation  UIMOB03_SKL.UIMOB03_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End

ConditionState  MOVING RIDER2
Animation  UIMOB03_SKL.UIMOB03_RNA
Animation  UIMOB03_SKL.UIMOB03_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  MOVING_MOLOTOV
End

; Drawing Molotov
ConditionState   RIDER2 PREATTACK_A
Animation      UIMOB03_SKL.UIMOB03_ATCA_BF ; wind up
AnimationMode  ONCE
TransitionKey  TRANS_PREATTACK_MOLOTOV
End

; Throwing Molotov
ConditionState  RIDER2 FIRING_A
Animation  UIMOB03_SKL.UIMOB03_ATCA_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_MOLOTOV
AnimationSpeedFactorRange 2.0 2.0
End

; Reloading Molotov
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Animation  UIMOB03_SKL.UIMOB03_STA 0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_RELOADING_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End
AliasConditionState  RIDER2 RELOADING_A


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  Bogo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider1 TRANS_Flailing_Rider1
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider1
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  Logo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider2 TRANS_Flailing_Rider2
Animation  UIMOB03_SKL.UIMOB03_A_ADTD1
Animation  UIMOB03_SKL.UIMOB03_D_ADTD1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD2
Animation  UIMOB03_SKL.UIMOB03_D_ADTD2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider2
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Animation  UIMOB03_SKL.UIMOB03_A_ADTD3
Animation  UIMOB03_SKL.UIMOB03_D_ADTD3
AnimationMode  ONCE
TransitionKey  Zogo
End


End

Geometry  CYLINDER
GeometryMajorRadius  3.0 ; very thin
GeometryMinorRadius  3.0 ; very thinD
GeometryHeight  12.0
GeometryIsSmall  Yes

End

;Guy with throwing rock that upgrades to an AK
Object GLAInfantryAngryMobRock04
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB04_SKN
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB1 0 12
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB2 0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_CHB  0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
WeaponFireFXBone   PRIMARY NONE
WeaponMuzzleFlash  PRIMARY NONE
End


; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB04_SKL.UIMOB04_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  ATTACKING FIRING_A
Animation  UIMOB04_SKL.UIMOB04_ATB1_AF ; throw
Animation  UIMOB04_SKL.UIMOB04_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A

ConditionState  MOVING
Animation  UIMOB04_SKL.UIMOB04_RUN
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  DYING
Animation  UIMOB04_SKL.UIMOB04_DB1
Animation  UIMOB04_SKL.UIMOB04_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB04_SKL.UIMOB04_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


;--------------------------------------------------------
; TRANSITION FROM STONE TO AK47
TransitionState  TRANS_STAND_A TRANS_STAND_AK
Animation  UIMOB04_SKL.UIMOB04_TB-D
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
IdleAnimation  UIMOB04_SKL.UIMOB04_IDD1 0 6
IdleAnimation  UIMOB04_SKL.UIMOB04_IDD2 0 6
IdleAnimation  UIMOB04_SKL.UIMOB04_CHD  0 6
IdleAnimation  UIMOB04_SKL.UIMOB04_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_DD1
Animation  UIMOB04_SKL.UIMOB04_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB04_SKL.UIMOB04_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB04_SKL.UIMOB04_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB04_SKL.UIMOB04_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB04_SKL.UIMOB04_B_ADTF1
Animation  UIMOB04_SKL.UIMOB04_D_ADTF1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF2
Animation  UIMOB04_SKL.UIMOB04_D_ADTF2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF3
Animation  UIMOB04_SKL.UIMOB04_D_ADTF3
AnimationMode  ONCE
TransitionKey  None
End

End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobRockProjectileWeapon
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY GLAAngryMobAK47Weapon ; for atttacking in AK-proof conditions
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  WeaponSetUpgrade UpgradeTag_01
TriggeredBy  Upgrade_GLAArmTheMob
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  5.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with throwing rock that upgrades to Molotov cocktails
Object GLAInfantryAngryMobMolotov04
Scale 0.90
;**** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

; WHILE CARRYING ROCK
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB04_SKN
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB1 0 12
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB2 0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_CHB  0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End

; Drawing rock
ConditionState   PREATTACK_A
Animation      UIMOB04_SKL.UIMOB04_ATB2_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  PREATTACK_A FIRING_A
AliasConditionState  PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing rock
ConditionState  FIRING_A
Animation  UIMOB04_SKL.UIMOB04_ATB1_AF ; throw
Animation  UIMOB04_SKL.UIMOB04_ATB2_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.9 2.9
End
AliasConditionState  BETWEEN_FIRING_SHOTS_A
AliasConditionState  RELOADING_A


ConditionState  DYING
Animation  UIMOB04_SKL.UIMOB04_DB1
Animation  UIMOB04_SKL.UIMOB04_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB04_SKL.UIMOB04_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End


; WHILE CARRYING MOLOTOV
;---------------------------------------------------------
ConditionState  USER_1
Model  UIMOB04_SKN
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB1 0 12
IdleAnimation  UIMOB04_SKL.UIMOB04_IDB2 0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_CHB  0 5
IdleAnimation  UIMOB04_SKL.UIMOB04_STB  0 12
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_A
End


; Drawing Molotov
ConditionState   USER_1 PREATTACK_A
Animation      UIMOB04_SKL.UIMOB04_ATCB_BF ; wind up
AnimationMode  ONCE
End
AliasConditionState  USER_1 PREATTACK_A FIRING_A
AliasConditionState  USER_1 PREATTACK_A BETWEEN_FIRING_SHOTS_A

; throwing Molotov
ConditionState  USER_1 FIRING_A
Animation  UIMOB04_SKL.UIMOB04_ATCB_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_A
AnimationSpeedFactorRange 2.0 2.0
End
AliasConditionState  USER_1 BETWEEN_FIRING_SHOTS_A
AliasConditionState  USER_1 RELOADING_A

ConditionState  USER_1 MOVING
Animation  UIMOB04_SKL.UIMOB04_RUN
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
ParticleSysBone    None InfantryDustTrails
End

ConditionState  USER_1 DYING
Animation  UIMOB04_SKL.UIMOB04_DB1
Animation  UIMOB04_SKL.UIMOB04_DB2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  USER_1 SPECIAL_CHEERING
Animation  UIMOB04_SKL.UIMOB04_CHB
Flags  RANDOMSTART
AnimationMode  LOOP
End

;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB04_SKL.UIMOB04_B_ADTF1
Animation  UIMOB04_SKL.UIMOB04_D_ADTF1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF2
Animation  UIMOB04_SKL.UIMOB04_D_ADTF2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB04_SKL.UIMOB04_B_ADTF3
Animation  UIMOB04_SKL.UIMOB04_D_ADTF3
AnimationMode  ONCE
TransitionKey  None
End

End

;**** DESIGN parameters ***

DisplayName       OBJECT:AngryMob
Side  GLA
EditorSorting  INFANTRY
TransportSlotCount  0                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  None
Weapon  PRIMARY GLAAngryMobMolotovCocktailProjectileWeapon
End

ArmorSet
Conditions       None
Armor            HumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220
Prerequisites
Object  GLABarracks
End
BuildCost  80
BuildTime  0.0

ExperienceValue  5 5 5 5    ;Experience point value at each level
ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters *** ;MOB02
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables

Body  ActiveBody BodyTag_01
MaxHealth        60.0
InitialHealth    60.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  250
End

Behavior  MobMemberSlavedUpdate ModuleTag_04
MustCatchUpRadius    150
NoNeedToCatchUpRadius  80
Squirrelliness  0.05
CatchUpCrisisBailTime  30; this is in calls to this update, not in frames
End

Locomotor  SET_NORMAL AngryMobNormalLocomotor
Locomotor  SET_WANDER AngryMobWanderLocomotor
Locomotor  SET_PANIC AngryMobPanicLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

;  Behavior  SquishCollide ModuleTag_08
;  End

Behavior  ModelConditionUpgrade ModuleTag_Upgrade01
ConditionFlag  USER_1
TriggeredBy    Upgrade_GLAArmTheMob
End

Behavior  SubObjectsUpgrade ModuleTag_Upgrade02
TriggeredBy     Upgrade_GLAArmTheMob
HideSubObjects  ROCK_01
End


; --- begin Death modules ---
Behavior  SlowDeathBehavior DeathTag_01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
End
Behavior  SlowDeathBehavior DeathTag_02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior DeathTag_03
DeathTypes           NONE +EXPLODED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior DeathTag_04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_DieByFireGLA
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_DieByToxinGLA
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_CivilianArabMaleDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FlingForce           8
FlingForceVariance   3
FlingPitch           60
FlingPitchVariance   10
End
Behavior  SlowDeathBehavior ModuleTag_03315726 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_DieByToxinGLA
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior ModuleTag_13
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  1000 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  5.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;Guy with pistol that upgrades to an AK
ObjectReskin GLAInfantryAngryMobPistol05 GLAInfantryAngryMobPistol01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes



; WHILE CARRYING PISTOL
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB05_SKN
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA1 0 12
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA2 0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_CHA  0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End

ConditionState  MOVING
Animation  UIMOB05_SKL.UIMOB05_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  SPECIAL_CHEERING
Animation  UIMOB05_SKL.UIMOB05_CHD
AnimationMode  ONCE
End

; Aiming Pistol
TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  ATTACKING FIRING_A
Animation  UIMOB05_SKL.UIMOB05_ATA1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB05_SKL.UIMOB05_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RELOADING_A
Animation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB05_SKL.UIMOB05_ATA1_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

;--------------------------------------------------------
; TRANSITION FROM PISTOL TO AK47
TransitionState  TRANS_STAND TRANS_STAND_AK
Animation  UIMOB05_SKL.UIMOB05_TA-D
AnimationMode  ONCE
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; WHILE CARRYING AK47
;---------------------------------------------------------
ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
Model  UIMOB05_SKN
IdleAnimation  UIMOB05_SKL.UIMOB05_IDD1 0 6
IdleAnimation  UIMOB05_SKL.UIMOB05_IDD2 0 6
IdleAnimation  UIMOB05_SKL.UIMOB05_CHD  0 6
IdleAnimation  UIMOB05_SKL.UIMOB05_STD
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  MOVING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  DYING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_DD1
Animation  UIMOB05_SKL.UIMOB05_DD2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

ConditionState  SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_CHD
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Drawing AK47
TransitionState   TRANS_STAND_AK TRANS_FIRING_AK
Animation      UIMOB05_SKL.UIMOB05_ATD1_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End

; Firing Gun
ConditionState  ATTACKING FIRING_A WEAPONSET_PLAYER_UPGRADE
Animation  UIMOB05_SKL.UIMOB05_ATD1_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING_AK
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
End
AliasConditionState   BETWEEN_FIRING_SHOTS_A WEAPONSET_PLAYER_UPGRADE

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING_AK TRANS_STAND_AK
Animation      UIMOB05_SKL.UIMOB05_ATD1_ED ; end firing
AnimationMode  ONCE
WeaponFireFXBone   PRIMARY MuzzleAK
WeaponMuzzleFlash  PRIMARY MuzzleAKFX
AnimationSpeedFactorRange  1.5 1.5
End

;    ;Throwing bottle----------------------------------------------------------------


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  None
End


End



Geometry  CYLINDER
GeometryMajorRadius  3.0 ; very thin
GeometryMinorRadius  3.0 ; very thinD
GeometryHeight  12.0
GeometryIsSmall  Yes

End

;Guy with pistol that upgrades to Molotov cocktails
ObjectReskin GLAInfantryAngryMobPistolToMolotov05 GLAInfantryAngryMobPistolToMolotov01

;**** ART Parameters ***
Draw  W3DModelDraw DrawTag_01
OkToChangeModelColor  Yes

; While carrying pistol
;---------------------------------------------------------
DefaultConditionState
Model  UIMOB05_SKN
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA1 0 12
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA2 0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_CHA  0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
End
AliasConditionState  RIDER1

ConditionState  RIDER1 MOVING
Animation  UIMOB05_SKL.UIMOB05_RNA
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey    MOVING
End

ConditionState  DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

ConditionState  RIDER1 DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider1
End

ConditionState  RIDER2 DYING
Animation  UIMOB05_SKL.UIMOB05_DA1
Animation  UIMOB05_SKL.UIMOB05_DA2
AnimationMode  ONCE
TransitionKey  TRANS_Dying_Rider2
End

ConditionState  RIDER1 SPECIAL_CHEERING
Animation  UIMOB05_SKL.UIMOB05_CHD
AnimationMode  ONCE
End
AliasConditionState  RIDER2 SPECIAL_CHEERING

; Aiming Pistol

ConditionState  RIDER1 PREATTACK_A
Animation      UIMOB05_SKL.UIMOB05_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

TransitionState   TRANS_STAND TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange 2.5 2.5
End

; Firing Gun
ConditionState  RIDER1 FIRING_A
Animation  UIMOB05_SKL.UIMOB05_ATA2_LP ; looping firing
AnimationMode  LOOP
TransitionKey  TRANS_FIRING
AnimationSpeedFactorRange  1.9 1.9
End
AliasConditionState   RIDER1 BETWEEN_FIRING_SHOTS_A

TransitionState  TRANS_FIRING TRANS_RELOADING
Animation      UIMOB05_SKL.UIMOB05_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

ConditionState   RIDER1 RELOADING_A
Animation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  LOOP
AnimationSpeedFactorRange  1.5 1.5
TransitionKey  TRANS_RELOADING
End

TransitionState  TRANS_RELOADING TRANS_FIRING
Animation      UIMOB05_SKL.UIMOB05_ATA2_ST ; start firing
AnimationMode  ONCE
AnimationSpeedFactorRange  2.5 2.5
End

; This transition allows him to put his gun away when he's finished attacking.
TransitionState  TRANS_FIRING TRANS_STAND
Animation      UIMOB05_SKL.UIMOB05_ATA2_ED ; end firing
AnimationMode  ONCE
AnimationSpeedFactorRange  1.5 1.5
End

; Upgraded with Molotovs
;---------------------------------------------------------

ConditionState  RIDER2
IdleAnimation  UIMOB05_SKL.UIMOB05_IDA1 0 12
IdleAnimation  UIMOB05_SKL.UIMOB05_CHA  0 5
IdleAnimation  UIMOB05_SKL.UIMOB05_STA  0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_STAND_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End

ConditionState  MOVING RIDER2
Animation  UIMOB05_SKL.UIMOB05_RNA
Animation  UIMOB05_SKL.UIMOB05_RND
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  MOVING_MOLOTOV
End

; Drawing Molotov
ConditionState   RIDER2 PREATTACK_A
Animation      UIMOB05_SKL.UIMOB05_ATCA_BF ; wind up
AnimationMode  ONCE
TransitionKey  TRANS_PREATTACK_MOLOTOV
End

; Throwing Molotov
ConditionState  RIDER2 FIRING_A
Animation  UIMOB05_SKL.UIMOB05_ATCA_AF ; throw
AnimationMode  ONCE
TransitionKey  TRANS_FIRING_MOLOTOV
AnimationSpeedFactorRange 2.0 2.0
End

; Reloading Molotov
ConditionState  RIDER2 BETWEEN_FIRING_SHOTS_A
Animation  UIMOB05_SKL.UIMOB05_STA 0 5
AnimationMode  ONCE
AnimationSpeedFactorRange 0.9 1.1
TransitionKey  TRANS_RELOADING_MOLOTOV
WeaponFireFXBone   PRIMARY Muzzle
WeaponMuzzleFlash  PRIMARY MuzzleFX
WaitForStateToFinishIfPossible  TRANS_FIRING_MOLOTOV
End
AliasConditionState  RIDER2 RELOADING_A


;--------------------------------------------------------

TransitionState  TRANS_Dying TRANS_Flailing
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  Bogo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider1 TRANS_Flailing_Rider1
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER1 DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider1
End

ConditionState  RIDER1 DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  Logo
End

;--------------------------------------------------------

TransitionState  TRANS_Dying_Rider2 TRANS_Flailing_Rider2
Animation  UIMOB05_SKL.UIMOB05_A_ADTA1
Animation  UIMOB05_SKL.UIMOB05_D_ADTA1
AnimationMode  ONCE
End

ConditionState  RIDER2 DYING EXPLODED_FLAILING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA2
Animation  UIMOB05_SKL.UIMOB05_D_ADTA2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing_Rider2
End

ConditionState  RIDER2 DYING EXPLODED_BOUNCING
Animation  UIMOB05_SKL.UIMOB05_A_ADTA3
Animation  UIMOB05_SKL.UIMOB05_D_ADTA3
AnimationMode  ONCE
TransitionKey  Zogo
End


End

Geometry  CYLINDER
GeometryMajorRadius  3.0 ; very thin
GeometryMinorRadius  3.0 ; very thinD
GeometryHeight  12.0
GeometryIsSmall  Yes

End