Object AmericaJetSpectreGunship

; *** ART Parameters ***
SelectPortrait          SASpectre_L
ButtonImage             SASpectre

Draw  W3DOverlordAircraftDraw ModuleTag_01 ; Works with the dependencyModelDraw of the upgrade portable structures

OkToChangeModelColor  Yes
ParticlesAttachedToAnimatedBones  Yes
RecoilSettleSpeed   10
MaxRecoilDistance   4

;----NORMAL-------------
DefaultConditionState
Model              AVAc17
WeaponFireFXBone   PRIMARY MUZZLE
WeaponMuzzleFlash  PRIMARY MUZZLEFX
WeaponRecoilBone   PRIMARY BARREL
ShowSubObject      VULCAN01 VULCAN02
End

ConditionState     DOOR_1_OPENING
Model            AVAc17
Animation        AVAc17.AVAc17
AnimationMode    ONCE
HideSubObject    VULCAN01 VULCAN02
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 SpectreContrail
ParticleSysBone  WingTip02 SpectreContrail
TransitionKey    TRANS_Wings_Open
End

TransitionState    TRANS_Wings_Closed TRANS_Wings_Open
Model            AVAc17
Animation        AVAc17.AVAc17
AnimationMode    ONCE
ShowSubObject    VULCAN01 VULCAN02
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 SpectreContrail
ParticleSysBone  WingTip02 SpectreContrail
End

ConditionState     DOOR_1_CLOSING
Model            AVAc17
Animation        AVAc17.AVAc17
AnimationMode    ONCE_BACKWARDS
ShowSubObject    VULCAN01 VULCAN02
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 JetContrailThin
ParticleSysBone  WingTip02 JetContrailThin
ParticleSysBone  Engine01 SpectreAfterburnerTrail
ParticleSysBone  Engine02 SpectreAfterburnerTrail
ParticleSysBone  Engine03 SpectreAfterburnerTrail
ParticleSysBone  Engine04 SpectreAfterburnerTrail
ParticleSysBone  Engine01 SpectreEngineFlare
ParticleSysBone  Engine02 SpectreEngineFlare
ParticleSysBone  Engine03 SpectreEngineFlare
ParticleSysBone  Engine04 SpectreEngineFlare
TransitionKey    TRANS_Wings_Closed
End


;----DAMAGED-------------
ConditionState     DOOR_1_OPENING DAMAGED
Model            AVAc17_D
Animation        AVAc17_D.AVAc17_D
AnimationMode    ONCE
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 SpectreContrail
ParticleSysBone  WingTip02 SpectreContrail
ParticleSysBone  Smoke01 JetFireLarge
ParticleSysBone  Smoke02 JetFireLarge
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 JetSmokeLarge
TransitionKey    TRANS_Wings_Open_Damaged
End

TransitionState    TRANS_Wings_Closed_Damaged TRANS_Wings_Open_Damaged
Model            AVAc17_D
Animation        AVAc17_D.AVAc17_D
AnimationMode    ONCE
ShowSubObject    VULCAN01 VULCAN02
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 SpectreContrail
ParticleSysBone  WingTip02 SpectreContrail
ParticleSysBone  Smoke01 JetFireLarge
ParticleSysBone  Smoke02 JetFireLarge
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 JetSmokeLarge
End

ConditionState     DOOR_1_CLOSING DAMAGED
Model            AVAc17_D
Animation        AVAc17_D.AVAc17_D
AnimationMode    ONCE_BACKWARDS
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 JetContrailThin
ParticleSysBone  WingTip02 JetContrailThin
ParticleSysBone  Engine01 SpectreAfterburnerTrail
ParticleSysBone  Engine02 SpectreAfterburnerTrail
ParticleSysBone  Engine03 SpectreAfterburnerTrail
ParticleSysBone  Engine04 SpectreAfterburnerTrail
ParticleSysBone  Engine01 SpectreEngineFlare
ParticleSysBone  Engine02 SpectreEngineFlare
ParticleSysBone  Engine03 SpectreEngineFlare
ParticleSysBone  Engine04 SpectreEngineFlare
ParticleSysBone  Smoke01 JetFireLarge
ParticleSysBone  Smoke02 JetFireLarge
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 JetSmokeLarge
TransitionKey    TRANS_Wings_Closed_Damaged
End


;----REALLY DAMAGED-------------
ConditionState     DOOR_1_OPENING REALLYDAMAGED
Model            AVAc17_D
Animation        AVAc17_D.AVAc17_D
AnimationMode    ONCE
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 SpectreContrail
ParticleSysBone  WingTip02 SpectreContrail
ParticleSysBone  Smoke01 SpectreGunshipFireLarge
ParticleSysBone  Smoke02 SpectreGunshipFireLarge
ParticleSysBone  Smoke03 SpectreGunshipFireLarge
ParticleSysBone  Smoke04 SpectreGunshipFireLarge
ParticleSysBone  Smoke05 SpectreGunshipFireLarge
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 SpectreSmokeLarge
ParticleSysBone  Smoke03 JetSmokeLarge
ParticleSysBone  Smoke04 SpectreSmokeLarge
TransitionKey    TRANS_Wings_Open_Realy_Damaged
End

TransitionState    TRANS_Wings_Closed_Realy_Damaged TRANS_Wings_Open_Realy_Damaged
Model            AVAc17_D
Animation        AVAc17_D.AVAc17_D
AnimationMode    ONCE
ShowSubObject    VULCAN01 VULCAN02
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 SpectreContrail
ParticleSysBone  WingTip02 SpectreContrail
ParticleSysBone  Smoke01 SpectreGunshipFireLarge
ParticleSysBone  Smoke02 SpectreGunshipFireLarge
ParticleSysBone  Smoke03 SpectreGunshipFireLarge
ParticleSysBone  Smoke04 SpectreGunshipFireLarge
ParticleSysBone  Smoke05 SpectreGunshipFireLarge
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 SpectreSmokeLarge
ParticleSysBone  Smoke03 JetSmokeLarge
ParticleSysBone  Smoke04 SpectreSmokeLarge
End

ConditionState     DOOR_1_CLOSING REALLYDAMAGED
Model            AVAc17_D
Animation        AVAc17_D.AVAc17_D
AnimationMode    ONCE_BACKWARDS
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  WingTip01 JetContrailThin
ParticleSysBone  WingTip02 JetContrailThin
ParticleSysBone  Engine01 SpectreAfterburnerTrail
ParticleSysBone  Engine02 SpectreAfterburnerTrail
ParticleSysBone  Engine03 SpectreAfterburnerTrail
ParticleSysBone  Engine04 SpectreAfterburnerTrail
ParticleSysBone  Engine01 SpectreEngineFlare
ParticleSysBone  Engine02 SpectreEngineFlare
ParticleSysBone  Engine03 SpectreEngineFlare
ParticleSysBone  Engine04 SpectreEngineFlare
ParticleSysBone  Smoke01 SpectreGunshipFireLarge
ParticleSysBone  Smoke02 SpectreGunshipFireLarge
ParticleSysBone  Smoke03 SpectreGunshipFireLarge
ParticleSysBone  Smoke04 SpectreGunshipFireLarge
ParticleSysBone  Smoke05 SpectreGunshipFireLarge
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 SpectreSmokeLarge
ParticleSysBone  Smoke03 JetSmokeLarge
ParticleSysBone  Smoke04 SpectreSmokeLarge
TransitionKey    TRANS_Wings_Closed_Realy_Damaged
End


;----RUBBLE CRASHING-------------
ConditionState  RUBBLE
Model            AVAc17_D1
ParticleSysBone  Smoke01 SpectreGunshipFireLarge
ParticleSysBone  Smoke05 SpectreGunshipFireLarge
ParticleSysBone  Smoke03 SpectreGunshipFireLarge
ParticleSysBone  Smoke04 SpectreGunshipFireLarge
ParticleSysBone  Smoke01 SpectreSmokeLarge
ParticleSysBone  Smoke03 SpectreSmokeLarge
ParticleSysBone  Smoke02 SpectreSmokeLarge
ParticleSysBone  Smoke05 SpectreSmokeLarge
End
AliasConditionState  REALLYDAMAGED RUBBLE
AliasConditionState  REALLYDAMAGED RUBBLE DOOR_1_CLOSING
AliasConditionState  REALLYDAMAGED RUBBLE DOOR_1_OPENING

End

; ***DESIGN parameters ***
DisplayName          OBJECT:SpectreGunship
EditorSorting        VEHICLE
Side                 America
TransportSlotCount   0                 ;how many "slots" we take in a transport (0 == not transportable)

ShroudClearingRange  300.0

ArmorSet
Conditions       None
Armor            SpectreGunshipAirplaneArmor
DamageFX         TankDamageFX
End
ArmorSet
Conditions       PLAYER_UPGRADE
Armor            SpectreGunshipCountermeasuresAirplaneArmor
DamageFX         None
End

WeaponSet
Conditions           None
Weapon               PRIMARY   SpectreHowitzerGun
End

; *** AUDIO Parameters ***
VoiceSelect          SpectreGunshipVoiceSelect
VoiceAttack          SpectreGunshipVoiceAttack
VoiceMove            SpectreGunshipVoiceMove
SoundAmbient         SpectreGunshipAmbientLoop
SoundAmbientRubble     NoSound
UnitSpecificSounds
Afterburner     SpectreGunshipAfterburnerLoop
HowitzerFire    SpectreHowitzerWeapon
End


; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK VEHICLE AIRCRAFT SCORE SELECTABLE EMP_HARDENED IGNORES_SELECT_ALL

Body  ActiveBody ModuleTag_03
MaxHealth        1800.0
InitialHealth    1800.0
End

ExperienceValue      40 40 40 40  ; Experience point value at each level


Behavior                           JetSlowDeathBehavior ModuleTag_04
DestructionDelay                 2000
RollRate                         0.0
RollRateDelta                    100%      ;each frame, rollrate  rollrate * rollrateDelta
PitchRate                        0
FallHowFast                      45.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
FXInitialDeath                   FX_SpectreGunshipExplosionLight
OCLInitialDeath                  OCL_AmericaJetCargoDeathStart
DelaySecondaryFromInitialDeath   2000       ; in milliseconds     This guy won't hit the ground, so this time equals the above time
OCLSecondary                     OCL_AmericaJetCargoHulkDeath
FXSecondary                      FX_BigPlaneDeath
FXFinalBlowUp                    FX_spectreGunshipDeathExplosion
End

Behavior  PhysicsBehavior ModuleTag_05
Mass  500.0
End

Behavior  AIUpdateInterface ModuleTag_07
ForbidPlayerCommands  Yes ; this AIUpdate will only do command if from script or AI, not player
End
Locomotor  SET_PANIC  SpectreGunshipTransitLocomotor
Locomotor  SET_NORMAL SpectreGunshipOrbitLocomotor

Behavior  SpecialAbility ModuleTag_32
SpecialPowerTemplate  SuperweaponSpectreGunship
UpdateModuleStartsAttack  Yes
End


Behavior  SpectreGunshipUpdate ModuleTag_10
GattlingStrafeFXParticleSystem   SpectreGattlingArmsSmoke
SpecialPowerTemplate             SuperweaponSpectreGunship
HowitzerWeaponTemplate           SpectreHowitzerGun
GattlingTemplateName             SpectreGunshipGattlingCannon
RandomOffsetForHowitzer  20
TargetingReticleRadius   50
OrbitInsertionSlope      0.7   ; steepness of orbit entry
GunshipOrbitRadius       400
HowitzerFiringRate       1000  ; how long between each attempted shot of howitzer
HowitzerFollowLag        200   ; how long after gattling acquires target can howitzer shoot same
StrafingIncrement        20    ; how far apart is each shot of the gattling as it strafes
AttackAreaRadius         250
OrbitTime                20000 ; twenty seconds

AttackAreaDecal
Texture            SCCSpecTarg
Style              SHADOW_ALPHA_DECAL
OpacityMin         25%
OpacityMax         50%
OpacityThrobTime   1500
Color              R:127 G:177 B:222 A:255
OnlyVisibleToOwningPlayer  Yes
End
TargetingReticleDecal
Texture            SCCSpecRet
Style              SHADOW_ALPHA_DECAL
OpacityMin         50%
OpacityMax         100%
OpacityThrobTime   300
Color              R:127 G:177 B:222 A:255
OnlyVisibleToOwningPlayer  Yes
End
End

Behavior  HelixContain ModuleTag_09
Slots                      1
DamagePercentToUnits       100%
AllowInsideKindOf          PORTABLE_STRUCTURE
PassengersAllowedToFire    Yes
ShouldDrawPips             No
End


Behavior  FlammableUpdate ModuleTag_08
AflameDuration  5000         ; If I catch fire, I'll burn for this long...
AflameDamageAmount  3       ; taking this much damage...
AflameDamageDelay  500       ; this often.
End

Behavior                 ArmorUpgrade ModuleTag_Armor01
TriggeredBy            Upgrade_AmericaCountermeasures
End

Behavior                 CountermeasuresBehavior ModuleTag_11
TriggeredBy            Upgrade_AmericaCountermeasures
FlareTemplateName      CountermeasureFlare
FlareBoneBaseName      Flare ; Name of the base flare bone (Flare01, Flare02, Flare03)
VolleySize             4     ; Number of flares launched per volley (requires bones)
VolleyArcAngle         90.0  ; Max angle of flare relative to forward direction (with VolleySize of 1, flare will always goes straight back).
VolleyVelocityFactor   2.0   ; Shoots out flares at a stronger velocity with a higher value.
DelayBetweenVolleys    1000  ; Time between flare volleys
NumberOfVolleys        5     ; Number of times the volleys will fire before reloading
ReloadTime             0     ; After all volleys launched, then reloading must occur. If 0, then reloading occurs at airstrip only.
EvasionRate            30%   ; With active flares, the specified percentage will be diverted.
ReactionLaunchLatency  0     ; Reaction between getting shot at and the firing of the first volley of countermeasures.
MissileDecoyDelay      200   ; A reported missile that has been determined to hit a decoy will wait this long before acquiring countermeasures.
End

Behavior  MaxHealthUpgrade ModuleTag_ExtraArmor01
TriggeredBy    Upgrade_AmericaGenPowerPlaneArmor
AddMaxHealth   450.0
ChangeType     ADD_CURRENT_HEALTH_TOO
End

Behavior  SpecialPowerCompletionDie ModuleTag_023237
SpecialPowerTemplate  SuperweaponSpectreGunship
End

Geometry  Box
GeometryIsSmall  No
GeometryMajorRadius  40.0
GeometryMinorRadius  10.0
GeometryHeight  10.0
Shadow  SHADOW_VOLUME
ShadowSizeX  89  ; minimum elevation angle above horizon. Used to limit shadow length

End


;------------------------------------------------------------------------------
Object SpectreGunshipGattlingCannon

; *** ART Parameters ***
Draw                     W3DDependencyModelDraw ModuleTag_01
OkToChangeModelColor   Yes
AttachToBoneInContainer  CHASSIS

DefaultConditionState
Model                NVDeva_U2
AnimationMode        MANUAL
End

ConditionState         ATTACKING
Model                AVSpectre_G
Animation            AVSpectre_G.AVSpectre_G
AnimationMode        LOOP
TurretPitch          TURRETEL01
WeaponFireFXBone     PRIMARY Muzzle
WeaponLaunchBone     PRIMARY Muzzle
WeaponMuzzleFlash    PRIMARY MuzzleFX
End

End

; ***DESIGN parameters ***
Side              America
EditorSorting     SYSTEM
TransportSlotCount  1
WeaponSet
Conditions           None
Weapon               PRIMARY   SpectreGattlingGun
End

ArmorSet
Conditions      None
Armor           InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
End
VisionRange      200

; *** AUDIO Parameters ***
UnitSpecificSounds
TurretMoveStart  NoSound
TurretMoveLoop   NoSound ;TurretMoveLoop
VoiceRapidFire   NoSound
End

; *** ENGINEERING Parameters ***
KindOf             PRELOAD PORTABLE_STRUCTURE CAN_ATTACK CLICK_THROUGH IGNORED_IN_GUI
Body             StructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  PRIMARY
TurretTurnRate       160   // turn rate, in degrees per sec
TurretPitchRate      160
AllowsPitch          Yes
End
AutoAcquireEnemiesWhenIdle  No
End

Behavior  PointDefenseLaserUpdate ModuleTag_HellfireMissilePod
WeaponTemplate         SpectreHellFireMissilePod
PrimaryTargetTypes     VEHICLE
SecondaryTargetTypes   AIRCRAFT
ScanRate               30
ScanRange              300.0
PredictTargetVelocityFactor  1.0
End

Behavior              DestroyDie ModuleTag_04
;nothing
End

Geometry             BOX
GeometryMajorRadius  20.0
GeometryMinorRadius  3.0
GeometryHeight       3.0
GeometryIsSmall      No
Shadow               SHADOW_VOLUME
ShadowSizeX          89

End