Object AmericaJetLaserPlane

; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes
ParticlesAttachedToAnimatedBones  Yes

DefaultConditionState
Model            AVTMD
Animation        AVTMD.AVTMD
AnimationMode    LOOP
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  EHXAUST01 JetBlackTrailThin
ParticleSysBone  EHXAUST02 JetBlackTrailThin
ParticleSysBone  EHXAUST03 JetBlackTrailThin
ParticleSysBone  WingTip01 JetContrailThin
ParticleSysBone  WingTip02 JetContrailThin
End
ConditionState  DAMAGED
Model            AVTMD_D
Animation        AVTMD_D.AVTMD_D
AnimationMode    LOOP
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke01 JetFireLarge
ParticleSysBone  Smoke02 JetSmokeLarge
End
ConditionState  REALLYDAMAGED
Model            AVTMD_D
Animation        AVTMD_D.AVTMD_D
AnimationMode    LOOP
Flags            MAINTAIN_FRAME_ACROSS_STATES
ParticleSysBone  Smoke01 JetFireLarge
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 JetFireLarge
ParticleSysBone  Smoke02 JetSmokeLarge
End
ConditionState  RUBBLE
Model            AVTMD_D1
ParticleSysBone  Smoke01 JetSmokeLarge
ParticleSysBone  Smoke02 JetSmokeLarge
ParticleSysBone  Smoke01 JetFireLarge
ParticleSysBone  Smoke02 JetFireLarge
End

End

Draw  W3DModelDraw ModuleTag_02
DefaultConditionState
Model            AVTMD_A1
Animation        AVTMD_A1.AVTMD_A1
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
End
ConditionState  DOOR_1_OPENING
Model            AVTMD_A1
Animation        AVTMD_A1.AVTMD_A1
AnimationMode    ONCE
Flags            START_FRAME_FIRST
End
ConditionState  DOOR_1_CLOSING
Model            AVTMD_A1
Animation        AVTMD_A1.AVTMD_A1
AnimationMode    ONCE_BACKWARDS
Flags            START_FRAME_LAST
End
ConditionState  REALLYDAMAGED
Model            AVTMD_DA1
Animation        AVTMD_DA1.AVTMD_DA1
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
End
AliasConditionState  DAMAGED
ConditionState  REALLYDAMAGED DOOR_1_OPENING
Model            AVTMD_DA1
Animation        AVTMD_DA1.AVTMD_DA1
AnimationMode    ONCE
Flags            START_FRAME_FIRST
End
AliasConditionState  DAMAGED DOOR_1_OPENING
ConditionState  REALLYDAMAGED DOOR_1_CLOSING
Model            AVTMD_DA1
Animation        AVTMD_DA1.AVTMD_DA1
AnimationMode    ONCE_BACKWARDS
Flags            START_FRAME_LAST
End
AliasConditionState  DAMAGED DOOR_1_CLOSING
End

; ***DESIGN parameters ***
DisplayName          OBJECT:CargoPlane
EditorSorting        VEHICLE
Side                 America
TransportSlotCount   0                 ;how many "slots" we take in a transport (0 == not transportable)
VisionRange          0.0
ShroudClearingRange  300.0
ArmorSet
Conditions       None
Armor            GenPowerAirplaneArmor
DamageFX         None
End
CommandSet         AmericaScriptedTransportDropsCommandSet

; *** AUDIO Parameters ***
SoundAmbient  TacticalMissileDefencePlaneAmbientLoop

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_CAST_REFLECTIONS VEHICLE TRANSPORT AIRCRAFT SCORE FORCEATTACKABLE IGNORED_IN_GUI CAN_ATTACK EMP_HARDENED
Body  ActiveBody ModuleTag_03
MaxHealth        850.0
InitialHealth    850.0
End

ExperienceValue      40 40 40 40  ; Experience point value at each level

Behavior  PhysicsBehavior ModuleTag_04
Mass  500.0
End

Behavior  DeliverPayloadAIUpdate ModuleTag_05
DoorDelay  500
MaxAttempts  4
DropOffset  X:0 Y:0 Z:-10
DropDelay  300 ;500 ; time in between each item dropped (if more than one)
PutInContainer  AmericaParachute
DeliveryDistance  150
End
Locomotor  SET_NORMAL TacticalMissileDefencePlaneLocomotor

Behavior  TransportContain ModuleTag_06
Slots  100                     ; hey, it's a BIG transport
ScatterNearbyOnExit  No
OrientLikeContainerOnExit  Yes
KeepContainerVelocityOnExit  Yes
ExitPitchRate  30
ExitBone  WeaponA01
AllowInsideKindOf   INFANTRY VEHICLE PROJECTILE DOZER PARACHUTABLE
DoorOpenTime  0                ; this prevents the Contain module from messing with the doors, since we want DeliverPayload to handle 'em
NumberOfExitPaths  0
DestroyRidersWhoAreNotFreeToExit  Yes  ; 'destroy' as opposed to 'kill'
End

;SCRIPTED SUPPORT: These special powers are triggered directly
;from the transport without creating a transport. This is done
;via new code support and CreateLocation USE_OWNER_OBJECT --
;which also prevents creating the payload transport.

Behavior                OCLSpecialPower ModuleTag_GenPower09
SpecialPowerTemplate  SuperweaponGuardianAngel
OCL                   SUPERWEAPON_America_TacticalMissileDefence
CreateLocation        USE_OWNER_OBJECT
ScriptedSpecialPowerOnly  Yes
End

Behavior                           JetSlowDeathBehavior ModuleTag_12
DestructionDelay                 2000
RollRate                         0.0
RollRateDelta                    100%      ;each frame, rollrate  rollrate * rollrateDelta
PitchRate                        0
FallHowFast                      25.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
FXInitialDeath                   FX_JetBigDeathInitial
OCLInitialDeath                  OCL_AmericaJetCargoDeathStart
DelaySecondaryFromInitialDeath   2000       ; in milliseconds     This guy won't hit the ground, so this time equals the above time
OCLSecondary                     OCL_AmericaJetCargoHulkDeath
FXSecondary                      FX_BigPlaneDeath
End

Behavior  TransitionDamageFX ModuleTag_14
DamagedFXList1  Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
ReallyDamagedFXList1  Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
End

Behavior  PointDefenseLaserUpdate ModuleTag_Laser01
WeaponTemplate         TacticalMissileDefencePlanePointDefenceLaser
PrimaryTargetTypes     BALLISTIC_MISSILE SMALL_MISSILE
ScanRate               100
ScanRange              180.0
PredictTargetVelocityFactor  3.0
End

Behavior  SpecialPowerCompletionDie ModuleTag_0124123
SpecialPowerTemplate  SuperweaponGuardianAngel
End

Behavior  MaxHealthUpgrade ModuleTag_ExtraArmor01
TriggeredBy    Upgrade_AmericaGenPowerPlaneArmor
AddMaxHealth   250.0
ChangeType     ADD_CURRENT_HEALTH_TOO
End

Geometry  Box
GeometryIsSmall  No
GeometryMajorRadius  40.0
GeometryMinorRadius  10.0
GeometryHeight  10.0
Shadow  SHADOW_VOLUME
ShadowSizeX  89  ; minimum elevation angle above horizon. Used to limit shadow length

End