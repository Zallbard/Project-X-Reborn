Object AmericaVehicleLittleBird

; *** ART Parameters ***
SelectPortrait          SALittleBird_L
ButtonImage             SALittleBird

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes
ParticlesAttachedToAnimatedBones  Yes
ExtraPublicBone  RopeStart
ExtraPublicBone  RopeEnd

DefaultConditionState
Model                            AVAH6
Animation                        AVAH6.AVAH6
AnimationMode                    LOOP
Turret                           CHASSIS
HideSubObject                    TURRETEL Rocketpod
End

ConditionState  MOVING
ParticleSysBone                  ENGINE01 HelixExhaust
End

ConditionState  REALLYDAMAGED
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
End

ConditionState  REALLYDAMAGED MOVING
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
ParticleSysBone                  ENGINE01 HelixExhaust
End

ConditionState  RUBBLE
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
AnimationMode                    LOOP
End

ConditionState  RUBBLE SPECIAL_DAMAGED
Model                            AVAH6_D
AnimationMode                    MANUAL
HideSubObject                    PROP01 PROP02
End

;;;;With Rocket Pods

ConditionState  USER_1
HideSubObject                    TURRETEL
ShowSubObject                    Rocketpod
End

ConditionState  USER_1 MOVING
HideSubObject                    TURRETEL
ShowSubObject                    Rocketpod
ParticleSysBone                  ENGINE01 HelixExhaust
End

ConditionState  USER_1 REALLYDAMAGED
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
HideSubObject                    TURRETEL
ShowSubObject                    Rocketpod
End

ConditionState  USER_1 REALLYDAMAGED MOVING
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
ParticleSysBone                  ENGINE01 HelixExhaust
HideSubObject                    TURRETEL
ShowSubObject                    Rocketpod
End

ConditionState  USER_1 RUBBLE
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
AnimationMode                    LOOP
HideSubObject                    TURRETEL
ShowSubObject                    Rocketpod
End

ConditionState  USER_1 RUBBLE SPECIAL_DAMAGED
Model                            AVAH6_D
AnimationMode                    MANUAL
HideSubObject                    TURRETEL
ShowSubObject                    Rocketpod
End

End

Draw  W3DModelDraw ModuleTag_Guns01

OkToChangeModelColor  Yes

DefaultConditionState
Model                            AVAH6
Animation                        AVAH6.AVAH6
AnimationMode                    MANUAL
Turret                           GUN_TURRET
TurretPitch                      TURRETEL
HideSubObject                    CHASSIS
WeaponMuzzleFlash                PRIMARY   MuzzleFX
WeaponFireFXBone                 PRIMARY   Muzzle
WeaponLaunchBone                 PRIMARY   Muzzle
WeaponFireFXBone                 SECONDARY WeaponA
WeaponLaunchBone                 SECONDARY WeaponA
End
AliasConditionState  MOVING
AliasConditionState  ATTACKING MOVING

ConditionState  ATTACKING
AnimationMode                    LOOP
End

ConditionState  REALLYDAMAGED
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
End
AliasConditionState  REALLYDAMAGED MOVING
AliasConditionState  REALLYDAMAGED ATTACKING MOVING

ConditionState  ATTACKING REALLYDAMAGED
Model                            AVAH6_D
Animation                        AVAH6_D.AVAH6_D
AnimationMode                    LOOP
End

End

Draw                     W3DModelDraw ModuleTag_RotorWashEffects01

ConditionState         NONE
Model                NVDeva_U2
ParticleSysBone      NONE Helidirtsandsmall
End
AliasConditionState REALLYDAMAGED

ConditionState         SNOW
Model                NVDeva_U2
ParticleSysBone      NONE Helidirtsnowsmall
End
AliasConditionState  SNOW REALLYDAMAGED

ConditionState         OVER_WATER
Model                NVDeva_U2
ParticleSysBone      NONE Helidirtwatersmall
End
AliasConditionState  OVER_WATER REALLYDAMAGED
AliasConditionState  SNOW OVER_WATER
AliasConditionState  SNOW OVER_WATER REALLYDAMAGED

End

Draw                     W3DModelDraw ModuleTag_ChopperCrashBone01
DefaultConditionState
Model                EXChprCrsh_B
End
End

; ***DESIGN parameters ***
DisplayName          OBJECT:LittleBird
EditorSorting        VEHICLE
Side                 America
TransportSlotCount   0                 ;how many "slots" we take in a transport (0 == not transportable)
VisionRange          300.0
ShroudClearingRange  300.0

Prerequisites
Object   AmericaAirfield AmericaHelipad
End

WeaponSet
Conditions        None
Weapon            PRIMARY   AH6MinigunWeapon
PreferredAgainst  PRIMARY   INFANTRY
End

WeaponSet
Conditions        PLAYER_UPGRADE
Weapon            PRIMARY   AH6MinigunWeapon
PreferredAgainst  PRIMARY   INFANTRY
Weapon            SECONDARY AH6RocketPodWeapon
End

ArmorSet
Conditions       None
Armor            ComancheArmor
DamageFX         None
End

ArmorSet
Conditions       PLAYER_UPGRADE
Armor            CountermeasuresComancheArmor
DamageFX         None
End

BuildCost            800
BuildTime            15.0            ; in seconds
ExperienceValue      25 50  75  150   ; Experience point value at each level
ExperienceRequired   0  100 200 300   ; Experience points needed to gain each level
IsTrainable          Yes             ; Can gain experience
CommandSet           AmericaVehicleLittleBirdCommandSet

; *** AUDIO Parameters ***
VoiceSelect            LittleBirdVoiceSelect
VoiceMove              LittleBirdVoiceMove
VoiceGuard             LittleBirdVoiceMove
VoiceAttack            LittleBirdVoiceAttack
SoundAmbient           LittleBirdAmbientLoop
SoundAmbientRubble     NoSound
SoundEnter             HumveeEnter
SoundExit              HumveeExit

UnitSpecificSounds
VoiceCreate          LittleBirdVoiceCreate
VoiceUnload          LittleBirdVoiceUnload
VoiceCombatDrop      LittleBirdVoiceUnload
VoiceClearBuilding   LittleBirdVoiceUnload
SoundEject           PilotSoundEject
VoiceEject           PilotVoiceEject
VoiceGarrison        LittleBirdVoiceMove
TurretMoveStart      NoSound
TurretMoveLoop       NoSound
End


; *** ENGINEERING Parameters ***
RadarPriority    UNIT
KindOf           PRELOAD CAN_ATTACK CAN_CAST_REFLECTIONS SELECTABLE VEHICLE TRANSPORT AIRCRAFT SCORE PRODUCED_AT_HELIPAD

Behavior  ExperienceScalarUpgrade ModuleTag_03
TriggeredBy  Upgrade_AmericaAdvancedTraining
AddXPScalar  1.0 ;Increases experience gained by an additional 100%
End

Body  ActiveBody ModuleTag_04
MaxHealth        180.0
InitialHealth    180.0

SubdualDamageCap  800
SubdualDamageHealRate  500
SubdualDamageHealAmount  30
End

Behavior  FXListDie ModuleTag_05
DeathFX  FX_LittleBirdStartDeath
End


Behavior  ChinookAIUpdate ModuleTag_06
NumRopes                 4
PerRopeDelayMin          100
PerRopeDelayMax          500
RopeWidth                0.5
RopeColor                R:0 G:0 B:0
RopeWobbleLen            10
RopeWobbleAmplitude      0.25
RopeWobbleRate           180
RopeFinalHeight          10    ; stop this far above ground
RappelSpeed              50
MinDropHeight            40    ; if dropping into a tall bldg, go at least this far above it

Turret
TurretTurnRate  180
TurretPitchRate  180
MinPhysicalPitch  -70
AllowsPitch  Yes
ControlledWeaponSlots  PRIMARY SECONDARY
End
AutoAcquireEnemiesWhenIdle  Yes NotWhileAttacking
MoodAttackCheckRate         33
End

Locomotor  SET_NORMAL  LittleBirdLocomotor
Locomotor  SET_TAXIING BasicHelicopterTaxiLocomotor

Behavior  PhysicsBehavior ModuleTag_07
Mass  50.0
End

Behavior  HelicopterSlowDeathBehavior ModuleTag_08
DestructionDelay                 99999999        ; the destruction delay
SpiralOrbitTurnRate              140.0           ; in degrees per second, bigger #  tighter spiral
SpiralOrbitForwardSpeed          350.0           ; bigger #  larger spiral
SpiralOrbitForwardSpeedDamping   .9999           ; smaller #'s  slow down faster
MaxBraking                       190   ; max braking we can use during death spiral (lower num  wilder spiral)
SoundDeathLoop                   ComancheDamagedLoop
MinSelfSpin                      100                     ; in degrees per second
MaxSelfSpin                      300                     ; in degrees per second
SelfSpinUpdateDelay              100             ; in milliseconds
SelfSpinUpdateAmount             10             ; in degrees
FallHowFast                      12.0%  ; fraction of gravity, lower  take longer to fall
MinBladeFlyOffDelay              1500            ; in milliseconds
MaxBladeFlyOffDelay              1500            ; in milliseconds
AttachParticle                   SootySmokeTrail
AttachParticleBone               Propeller02
BladeObjectName                  ComancheBlades
BladeBoneName                    Propeller01
OCLEjectPilot                    OCL_EjectPilotViaParachute
FXBlade                          FX_HelicopterBladeExplosion
OCLBlade                         OCL_HelicopterBladeExplosion
FXHitGround                      FX_HelicopterHitGround
OCLHitGround                     OCL_HelicopterHitGround
FXFinalBlowUp                    FX_GroundedHelicopterBlowUp
OCLFinalBlowUp                   OCL_GroundedHelicopterBlowUp
DelayFromGroundToFinalDeath      1
FinalRubbleObject                LittleBirdRubbleHull
End

Behavior  TransitionDamageFX ModuleTag_09
ReallyDamagedParticleSystem1  Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuousDown
ReallyDamagedFXList1          Loc: X:0 Y:0 Z:0 FXList:FX_ComancheDamageTransition
End

Behavior                 ArmorUpgrade ModuleTag_Armor01
TriggeredBy            Upgrade_AmericaCountermeasures
End

Behavior                 CountermeasuresBehavior ModuleTag_10
TriggeredBy            Upgrade_AmericaCountermeasures
FlareTemplateName      CountermeasureFlare
FlareBoneBaseName      Flare ; Name of the base flare bone (Flare01, Flare02, Flare03)
VolleySize             2     ; Number of flares launched per volley (requires bones)
VolleyArcAngle         60.0  ; Max angle of flare relative to forward direction (with VolleySize of 1, flare will always goes straight back).
VolleyVelocityFactor   2.0   ; Shoots out flares at a stronger velocity with a higher value.
DelayBetweenVolleys    1000  ; Time between flare volleys
NumberOfVolleys        3     ; Number of times the volleys will fire before reloading
ReloadTime             4000  ; After all volleys launched, then reloading must occur. If 0, then reloading occurs at airstrip only.
EvasionRate            30%   ; With active flares, the specified percentage will be diverted.
ReactionLaunchLatency  0     ; Reaction between getting shot at and the firing of the first volley of countermeasures.
MissileDecoyDelay      200   ; A reported missile that has been determined to hit a decoy will wait this long before acquiring countermeasures.
End

Behavior  FlammableUpdate ModuleTag_21
AflameDuration  5000         ; If I catch fire, I'll burn for this long...
AflameDamageAmount  3       ; taking this much damage...
AflameDamageDelay  500       ; this often.
End

Behavior  HelixContain ModuleTag_29
Slots                    4
DamagePercentToUnits     100%
AllowInsideKindOf        INFANTRY
ForbidInsideKindOf       AIRCRAFT VEHICLE
ExitDelay                100
NumberOfExitPaths        1
End

ClientUpdate          AnimatedParticleSysBoneClientUpdate ModuleTag_reallyimportant
End

Behavior  WeaponSetUpgrade ModuleTag_RocketPods01
TriggeredBy  Upgrade_ComancheRocketPods
End

Behavior  ModelConditionUpgrade ModuleTag_RocketPods02
ConditionFlag  USER_1
TriggeredBy    Upgrade_ComancheRocketPods
End

Behavior  CommandSetUpgrade ModuleTag_RocketPods03
CommandSet    AmericaVehicleLittleBirdCommandSetUpgraded
TriggeredBy   Upgrade_ComancheRocketPods
End

Geometry  BOX
GeometryMajorRadius  11.0
GeometryMinorRadius  5.0
GeometryHeight  20.0
GeometryIsSmall  No
Shadow  SHADOW_VOLUME
ShadowSizeX  89  ; minimum elevation angle above horizon. Used to limit shadow length

End

Object LittleBirdRubbleHull

; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model         AVAH6_D1
End
End

; ***DESIGN parameters ***
DisplayName       OBJECT:ComancheHull

; *** ENGINEERING Parameters ***
KindOf  IMMOBILE NO_COLLIDE HULK

Behavior  PhysicsBehavior ModuleTag_02
Mass            25.0
AllowBouncing   Yes
End

Behavior  LifetimeUpdate ModuleTag_03
MinLifetime     3000   ; min lifetime in msec
MaxLifetime     3000   ; max lifetime in msec
End

Behavior  SlowDeathBehavior ModuleTag_05
SinkDelay         3000
SinkRate          4     ; in Dist/Sec
DestructionDelay  10000
End


End

Object LittleBirdRocketProjectile

; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
; @todo -- need real art here
Model  UVRockBug_m
ParticleSysBone  None RocketPodMissileLenzflare
ParticleSysBone  None RocketPodMissileFlame
ParticleSysBone  None RealMissileExhaust
End
ConditionState  JAMMED
ParticleSysBone  None SparksMedium
End
End

; ***DESIGN parameters ***
DisplayName       OBJECT:Prop
EditorSorting      SYSTEM
VisionRange  0.0
ArmorSet
Conditions       None
Armor            ProjectileArmor
DamageFX         None
End

; *** ENGINEERING Parameters ***
KindOf  PROJECTILE SMALL_MISSILE
Body  ActiveBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0

; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
; A projectile is not disabled, but instead loses target and scatters
SubdualDamageCap  200
SubdualDamageHealRate  100000
SubdualDamageHealAmount  50
End

; ---- begin Projectile death behaviors
Behavior  InstantDeathBehavior DeathModuleTag_01
DeathTypes  NONE +DETONATED
; we detonated normally.
; no FX, just quiet destroy ourselves
End
Behavior  InstantDeathBehavior DeathModuleTag_02
DeathTypes  NONE +LASERED
; shot down by laser.
FX          FX_GenericMissileDisintegrate
OCL         OCL_GenericMissileDisintegrate
End
Behavior  InstantDeathBehavior DeathModuleTag_03
DeathTypes  ALL -LASERED -DETONATED
; shot down by nonlaser.
FX          FX_GenericMissileDeath
End
; ---- end Projectile death behaviors

Behavior  PhysicsBehavior ModuleTag_06
Mass  1
End

Behavior  DumbProjectileBehavior ModuleTag_096
DetonateCallsKill  Yes
FirstHeight  -20
SecondHeight  -45
FirstPercentIndent  30%
SecondPercentIndent  70%
FlightPathAdjustDistPerSecond    100 ; Can allow a max speed this can attempt to follow a target. Units are their velocity we can tag.
End

Behavior  LifetimeUpdate ModuleTag_Life01
MinLifetime  5000   ; min lifetime in msec
MaxLifetime  5000   ; max lifetime in msec
End

Geometry  Sphere
GeometryIsSmall  Yes
GeometryMajorRadius  2.0

End