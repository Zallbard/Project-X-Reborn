Object AmericaVehicleChaparral

; *** ART Parameters ***
SelectPortrait         = SAChaparral
ButtonImage            = SAChaparral

Draw = W3DTankDraw ModuleTag_01

OkToChangeModelColor = Yes
ProjectileBoneFeedbackEnabledSlots = SECONDARY

DefaultConditionState
Model              = AVChap
Turret             = TURRET
TurretPitch        = TURRETEL
WeaponLaunchBone   = SECONDARY WeaponA
End

ConditionState       = REALLYDAMAGED
Model              = AVChap_D
End
ConditionState       = RUBBLE
Model              = AVChap_D
End

TrackMarks           = EXTnkTrack.tga
TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

End

Draw = W3DModelDraw ModuleTag_DroneAntenna01

OkToChangeModelColor = Yes

DefaultConditionState
Model = AVChap_H
Turret = TURRET
End

End

; ***DESIGN parameters ***
DisplayName            = OBJECT:Chaparral
Side                   = America
EditorSorting          = VEHICLE
TransportSlotCount     = 3

WeaponSet
Conditions           = None
Weapon               = SECONDARY ChaparralMissileWeapon
End

ArmorSet
Conditions           = None
Armor                = HeavyAntiAirArmor
DamageFX             = TankDamageFX
End

BuildCost              = 1500
BuildTime              = 12.0          ;in seconds
VisionRange            = 400
ShroudClearingRange    = 300

Prerequisites
Object = AmericaWarFactory
Object = AmericaStrategyCenter
End

ExperienceValue        = 100 100 200 400 ;Experience point value at each level
ExperienceRequired     = 0 200 300 600 ;Experience points needed to gain each level
IsTrainable            = Yes  ;Can gain experience
CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
CommandSet             = AmericaTankChaparralCommandSet

; *** AUDIO Parameters ***
VoiceSelect           = ChaparralVoiceSelect
VoiceMove             = ChaparralVoiceMove
VoiceGuard            = ChaparralVoiceMove
VoiceAttack           = ChaparralVoiceAttack
VoiceAttackAir        = ChaparralVoiceAttack
SoundMoveStart        = ChaparralTankMoveStart
SoundMoveStartDamaged = ChaparralTankMoveStart
UnitSpecificSounds
; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
VoiceCreate         = ChaparralVoiceCreate
VoiceEnter          = ChaparralVoiceMove
SoundEject          = PilotSoundEject
VoiceEject          = PilotVoiceEject
VoiceCrush          = ChaparralVoiceMove
End

; *** ENGINEERING Parameters ***
RadarPriority          = UNIT
KindOf                 = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE

Body                   = ActiveBody ModuleTag_02
MaxHealth       = 400
InitialHealth   = 400

; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
SubdualDamageCap = 960
SubdualDamageHealRate = 500
SubdualDamageHealAmount = 50
End

Behavior = AIUpdateInterface ModuleTag_03
Turret
TurretTurnRate        = 180
TurretPitchRate       = 180
AllowsPitch           = Yes
ControlledWeaponSlots = SECONDARY
NaturalTurretPitch    = 10
MinPhysicalPitch      = 25
MinIdleScanAngle      = 15
MaxIdleScanAngle      = 90
MinIdleScanInterval   = 5000
MaxIdleScanInterval   = 10000
End
AutoAcquireEnemiesWhenIdle = Yes
End
Locomotor            = SET_NORMAL ChaparralLocomotor
Behavior = PhysicsBehavior ModuleTag_04
Mass                 = 50.0
End

Behavior = ObjectCreationUpgrade ModuleTag_05
UpgradeObject = OCL_AmericanBattleDrone
TriggeredBy   = Upgrade_AmericaBattleDrone
ConflictsWith = Upgrade_AmericaScoutDrone
End

Behavior = ObjectCreationUpgrade ModuleTag_06
UpgradeObject = OCL_AmericanScoutDrone
TriggeredBy   = Upgrade_AmericaScoutDrone
ConflictsWith = Upgrade_AmericaBattleDrone
End

Behavior = WeaponBonusUpgrade ModuleTag_TargeteerDroneBonus01
TriggeredBy   = Upgrade_AmericaScoutDrone
ConflictsWith = Upgrade_AmericaBattleDrone
End

Behavior = ProductionUpdate ModuleTag_07
MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
End

Behavior = ExperienceScalarUpgrade ModuleTag_08
TriggeredBy   = Upgrade_AmericaAdvancedTraining
AddXPScalar   = 1.0 ;Increases experience gained by an additional 100%
End

; Turret fly off death
Behavior = SlowDeathBehavior ModuleTag_10
DeathTypes = ALL -CRUSHED -SPLATTED
ProbabilityModifier  = 50
DestructionDelay  = 500
DestructionDelayVariance  = 100
FX  = INITIAL  FX_GenericTankDeathEffect
FX  = FINAL    FX_GenericTankDeathExplosion
OCL = FINAL    OCL_ChaparralDeathEffect
End

; Catch fire, and explode death
Behavior = SlowDeathBehavior ModuleTag_11
DeathTypes = ALL -CRUSHED -SPLATTED
ProbabilityModifier  = 50
DestructionDelay  = 2000
DestructionDelayVariance  = 300
FX  = INITIAL  FX_CrusaderCatchFire
OCL = FINAL    OCL_GenericTankDeathEffect
FX  = FINAL    FX_GenericTankDeathExplosion
End

Behavior                 = TransitionDamageFX ModuleTag_12
ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
End

Behavior = DestroyDie ModuleTag_13
DeathTypes = NONE +CRUSHED +SPLATTED
End

; A crushing defeat
Behavior = FXListDie ModuleTag_14
DeathTypes = NONE +CRUSHED +SPLATTED
DeathFX = FX_CarCrush
End

Behavior = CreateObjectDie ModuleTag_15
DeathTypes = NONE +CRUSHED +SPLATTED
CreationList = OCL_CrusaderTank_CrushEffect
End

Behavior                    = CreateCrateDie ModuleTag_CratesChange
CrateData             = SalvageCrateData
End

Behavior = EjectPilotDie ModuleTag_17
GroundCreationList = OCL_EjectVehiclePilotOnGround
AirCreationList = OCL_EjectVehiclePilotViaParachute
ExemptStatus = HIJACKED
VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
End

Behavior = FlammableUpdate ModuleTag_21
AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
AflameDamageAmount = 3       ; taking this much damage...
AflameDamageDelay = 500       ; this often.
End

Behavior = StealthUpdate ModuleTag_GPSStealth01
StealthDelay                = 2000 ; msec
StealthForbiddenConditions  = FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
InnateStealth               = Yes
RequiredStatus              = REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
OrderIdleEnemiesToAttackMeUponReveal  = Yes
End

Behavior = EjectPilotDie ModuleTag_HijackerEmerge01
DeathTypes = ALL -CRUSHED -SPLATTED
RequiredStatus = HIJACKED
VeterancyLevels =  ALL
GroundCreationList = OCL_HijackerEmerge
AirCreationList = OCL_HijackerEmergeViaParachute
End

Behavior = FXListDie ModuleTag_HijackerEmerge02
RequiredStatus = HIJACKED
DeathTypes = ALL -CRUSHED -SPLATTED
DeathFX = FX_HijackerEmerge
End

Geometry               = BOX
GeometryMajorRadius    = 15.0
GeometryMinorRadius    = 10.0
GeometryHeight         = 10.0
GeometryIsSmall        = Yes
Shadow = SHADOW_VOLUME
ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

Object DeadChaparralHulk

; *** ART Parameters ***
Draw = W3DModelDraw ModuleTag_01
ConditionState = NONE
Model = AVChap_D1
End
End

; ***DESIGN parameters ***
EditorSorting   = DEBRIS

; *** ENGINEERING Parameters ***
KindOf =  NO_COLLIDE HULK

Behavior = PhysicsBehavior ModuleTag_03
Mass = 100.0
AllowBouncing = Yes
KillWhenRestingOnGround = Yes
End
Behavior = LifetimeUpdate ModuleTag_04
MinLifetime = 3000   ; min lifetime in msec
MaxLifetime = 3000   ; max lifetime in msec
End

Behavior = SlowDeathBehavior ModuleTag_05
SinkDelay         = 1500
SinkRate          = 2     ; in Dist/Sec
DestructionDelay  = 4000
End
End

Object ChaparralMissile

; *** ART Parameters ***
Draw = W3DModelDraw ModuleTag_01
OkToChangeModelColor = Yes
DefaultConditionState
Model = AVChap_M
End
ConditionState = JAMMED
ParticleSysBone = None SparksMedium
End
End

; ***DESIGN parameters ***
DisplayName      = OBJECT:TomahawkMissile
EditorSorting   = SYSTEM
VisionRange = 0.0

ArmorSet
Conditions      = None
Armor           = BallisticMissileArmor
DamageFX        = None
End

; *** ENGINEERING Parameters ***
KindOf = PROJECTILE BALLISTIC_MISSILE
Body = ActiveBody ModuleTag_02
MaxHealth       = 200.0
InitialHealth   = 200.0

; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
; A projectile is not disabled, but instead loses target and scatters
SubdualDamageCap = 400
SubdualDamageHealRate = 100000
SubdualDamageHealAmount = 50
End

; ---- begin Projectile death behaviors
Behavior = InstantDeathBehavior DeathModuleTag_01
DeathTypes = NONE +DETONATED
; we detonated normally.
FX          = WeaponFX_ChaparralMissileDetonation
End
Behavior = InstantDeathBehavior DeathModuleTag_02
DeathTypes = NONE +LASERED
; shot down by laser.
FX         = FX_GenericMissileDisintegrate
OCL        = OCL_GenericMissileDisintegrate
End
Behavior = FireWeaponWhenDeadBehavior ModuleTag_LASERED
DeathWeapon = S300GrumbleMissileWeapon
DeathTypes  = NONE +LASERED
StartsActive = Yes
End
Behavior = InstantDeathBehavior DeathModuleTag_03
DeathTypes = ALL -LASERED -DETONATED
; shot down by nonlaser.
FX         = FX_GenericMissileDeath
End
; ---- end Projectile death behaviors

Behavior = PhysicsBehavior ModuleTag_06
Mass = 1
End
Behavior = MissileAIUpdate ModuleTag_07
TryToFollowTarget = Yes
FuelLifetime = 0
IgnitionDelay = 0
InitialVelocity = 150                ; in dist/sec
DistanceToTargetBeforeDiving = 50
End
Locomotor = SET_NORMAL ChaparralMissileLocomotor


Geometry = Cylinder ; Since collision extents can't tilt, this is a little fake
GeometryMajorRadius = 8.0
GeometryHeight = 4.0
GeometryIsSmall = Yes

Shadow = SHADOW_DECAL
End