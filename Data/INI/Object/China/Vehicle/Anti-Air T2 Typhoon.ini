Object ChinaVehicleTyphoon
; Typhoon, Stormcaller, Tor-M1, Pantsor, S-300
SelectPortrait = SNTyphoonAA
ButtonImage = SNTyphoonAA

Draw = W3DTruckDraw ModuleTag_01
OkToChangeModelColor = Yes
ParticlesAttachedToAnimatedBones = Yes
ProjectileBoneFeedbackEnabledSlots = SECONDARY TERTIARY
; normal
DefaultConditionState
Model = NVTyphoon_A
Animation = NVTyphoon_A.NVTyphoon_A
AnimationMode = MANUAL
Turret = Turret01
;TurretArtAngle = 180
WeaponLaunchBone = SECONDARY WEAPONA
WeaponFireFXBone = SECONDARY WEAPONAFX
WeaponLaunchBone = TERTIARY WEAPONA
WeaponFireFXBone = TERTIARY WEAPONAFX
End
ConditionState = REALLYDAMAGED RUBBLE
Model = NVTyphoon_AD
Animation = NVTyphoon_AD.NVTyphoon_AD
AnimationMode = Manual
End
; Unpacking
ConditionState = UNPACKING
Model = NVTyphoon_A
Animation = NVTyphoon_A.NVTyphoon_A
AnimationMode = ONCE
AnimationSpeedFactorRange = 2.0 2.0
End
ConditionState = UNPACKING REALLYDAMAGED
Model = NVTyphoon_AD
Animation = NVTyphoon_AD.NVTyphoon_AD
AnimationMode = ONCE
AnimationSpeedFactorRange = 2.0 2.0
End
; Packing
ConditionState = PACKING
Model = NVTyphoon_A
Animation = NVTyphoon_A.NVTyphoon_A
AnimationMode = ONCE_BACKWARDS
Flags = START_FRAME_LAST
AnimationSpeedFactorRange = 2.0 2.0
End
ConditionState = PACKING REALLYDAMAGED
Model = NVTyphoon_AD
Animation = NVTyphoon_AD.NVTyphoon_AD
AnimationMode = ONCE_BACKWARDS
Flags = START_FRAME_LAST
AnimationSpeedFactorRange = 2.0 2.0
End
; Deployed
ConditionState = DEPLOYED
Model = NVTyphoon_X
Animation = NVTyphoon_X.NVTyphoon_X
AnimationMode = LOOP
End
AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A
ConditionState = DEPLOYED REALLYDAMAGED RUBBLE
Model = NVTyphoon_XD
Animation = NVTyphoon_XD.NVTyphoon_XD
AnimationMode = LOOP
End
AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
; -----------------------------------------
CabRotationMultiplier = 1.1
TrailerRotationMultiplier = 0.75
CabBone = CAB
TrailerBone = TRAILER
RotationDamping = 0.80
LeftFrontTireBone = TireL01
RightFrontTireBone = TireR01
MidRightMidTireBone = TireR02
MidLeftMidTireBone = TireL02
MidLeftRearTireBone = TireL03
MidRightRearTireBone = TireR03
LeftRearTireBone = TireL04
RightRearTireBone = TireR04
TireRotationMultiplier = 0.2     ; this * speed = rotation.
TrackMarks = EXTireTrack.tga
Dust = RocketBuggyDust
;PowerslideRotationAddition  = 2.5
; DirtSpray               = RocketBuggyDirtSpray
End
; ***DESIGN parameters ***
DisplayName = OBJECT:TyphoonAA
Side = China
EditorSorting = VEHICLE
TransportSlotCount = 3
ArmorSet
Conditions = None
Armor HeavyAntiAirArmor
DamageFX = TankDamageFX
End
WeaponSet
Conditions = None
Weapon = PRIMARY TyphoonDeployDummyWeapon
Weapon = SECONDARY TyphoonAntiAirMissileWeapon
;Weapon = TERTIARY TyphoonEMPMissileWeapon
AutoChooseSources = PRIMARY NONE
;AutoChooseSources = TERTIARY NONE
ShareWeaponReloadTime = Yes
End
BuildCost = 2000
BuildTime = 25.0     ; in seconds
VisionRange = 400
ShroudClearingRange = 500
Prerequisites
Object ChinaPropagandaCenter 
Object ChinaWarFactory
Object ChinaResearchLab
End
ExperienceValue = 100 100 200 400     ; Experience point value at each level
ExperienceRequired = 0 200 300 600     ; Experience points needed to gain each level
IsTrainable = Yes     ; Can gain experience
CrusherLevel = 2     ; What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
CrushableLevel = 2     ; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
CommandSet = ChinaVehicleTwinFangCommandSet 

; *** AUDIO Parameters ***
VoiceSelect TornadoVoiceSelect
VoiceMove TornadoVoiceMove
VoiceGuard TornadoVoiceMove
VoiceAttack TornadoVoiceAttack
SoundMoveStart TroopCrawlerMoveStart
SoundMoveStartDamaged TroopCrawlerMoveStart
UnitSpecificSounds

VoiceCreate TornadoVoiceCreate
TurretMoveStart NoSound
TurretMoveLoop TurretMoveLoop
VoiceCrush TornadoVoiceMove
VoiceEnter TornadoVoiceMove
Deploy NukeCannonDeploy
Undeploy NukeCannonUnDeploy
End

; *** ENGINEERING Parameters ***
RadarPriority = UNIT
KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE     ; CANNOT_RETALIATE
Body = ActiveBody ModuleTag_430
MaxHealth = 260
InitialHealth = 260
; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
SubdualDamageCap = 580
SubdualDamageHealRate = 400
SubdualDamageHealAmount = 50
End

Behavior = StealthDetectorUpdate ModuleTag_StealthDetect
DetectionRate 1000
DetectionRange 450
CanDetectWhileGarrisoned = No     ; Garrisoned means being in a structure that you units can shoot out of.
CanDetectWhileContained = No     ; Contained means being in a transport or tunnel network.
ExtraRequiredKindOf = AIRCRAFT     ; we can only detect MINES, not other stealthed things
End

Behavior = DeployStyleAIUpdate ModuleTag_431 ;AIUpdateInterface ModuleTag_431
Turret
TurretTurnRate        = 150
;TurretPitchRate = 360
FiresWhileTurning = Yes
;AllowsPitch = Yes
;FirePitch = 89
;TurretPitchRate       = 0
ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
MinIdleScanInterval = 250     ; in milliseconds
MaxIdleScanInterval = 250     ; in milliseconds
MinIdleScanAngle = 0     ; in degrees off the natural turret angle
MaxIdleScanAngle = 360     ; in degrees off the natural turret angle
NaturalTurretAngle = 180
InitiallyDisabled = Yes
End
TurretsFunctionOnlyWhenDeployed = Yes
MoodAttackCheckRate = 100
AutoAcquireEnemiesWhenIdle = Yes
PackTime = 833 ;1666
UnpackTime = 833 ;1666
TurretsFunctionOnlyWhenDeployed = Yes
TurretsMustCenterBeforePacking = Yes
;ManualDeployAnimations = Yes
End
Behavior = CommandButtonHuntUpdate ModuleTag_Hunt     ; allows use of command button hunt script with this unit.
End

Locomotor = SET_NORMAL ChinaVehicleTyphoonLocomotor
Behavior = PhysicsBehavior ModuleTag_432
Mass = 50.0
End

;Behavior = ObjectCreationUpgrade ModuleTag_Drone01
;UpgradeObject = OCL_ChinaPropagandaDrone
;TriggeredBy   = Upgrade_AmericaBattleDrone
;ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
;End
;Behavior = ObjectCreationUpgrade  ModuleTag_Drone02
;UpgradeObject = OCL_ChinaSpyDrone
;TriggeredBy   = Upgrade_AmericaScoutDrone
;ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
;End
;Behavior = ObjectCreationUpgrade  ModuleTag_Drone03
;UpgradeObject = OCL_ChinaFireDrone
;TriggeredBy   = Upgrade_AmericaHellfireDrone
;ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
;End

Behavior = ProductionUpdate ModuleTag_10
; MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
MaxQueueEntries = 1     ; Propaganda model is hacked to not show up.
End

; Explode death
Behavior = SlowDeathBehavior ModuleTag_433
DeathTypes = ALL -CRUSHED -SPLATTED
ProbabilityModifier = 50
DestructionDelay = 1000
DestructionDelayVariance = 100
FX = INITIAL FX_GenericTankDeathEffect
OCL = FINAL OCL_TyphoonDeathEffect
FX = FINAL FX_GenericTankDeathExplosion
End
Behavior = TransitionDamageFX ModuleTag_434
ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
End
Behavior = DestroyDie ModuleTag_435
DeathTypes = NONE +CRUSHED +SPLATTED
End
; A crushing defeat
Behavior = FXListDie ModuleTag_436
DeathTypes = NONE +CRUSHED +SPLATTED
DeathFX = FX_CarCrush
End
Behavior = CreateObjectDie ModuleTag_437
DeathTypes = NONE +CRUSHED +SPLATTED
CreationList = OCL_MicrowaveTankDeath_CrushEffect
End
Behavior = CreateCrateDie ModuleTag_438
CrateData = SalvageCrateDataChinaTier1
; CrateData            = EliteTankCrateData
; CrateData            = HeroicTankCrateData
End
Behavior = FlammableUpdate ModuleTag_446
AflameDuration = 5000     ; If I catch fire, I'll burn for this long...
AflameDamageAmount = 3     ; taking this much damage...
AflameDamageDelay = 500     ; this often.
End

;Propaganda Spotlight
Behavior            OCLSpecialPower ModuleTag_PropagandaSpotlight01
SpecialPowerTemplate  SuperweaponPropagandaSpotlight
OCL                   SUPERWEAPON_ChinaPropagandaSpotlight
UpgradeOCL            SCIENCE_Nationalism SUPERWEAPON_ChinaNationalismPropagandaSpotlight
UpgradeOCL            SCIENCE_Patriotism  SUPERWEAPON_ChinaPatriotismPropagandaSpotlight
CreateLocation        USE_OWNER_OBJECT
End

Behavior  GrantScienceUpgrade ModuleTag_PropagandaSpotlight02
TriggeredBy   Upgrade_Nationalism
GrantScience  SCIENCE_Nationalism
End

Behavior  GrantScienceUpgrade ModuleTag_PropagandaSpotlight03
TriggeredBy   Upgrade_Fanaticism
GrantScience  SCIENCE_Patriotism
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

Geometry = BOX
GeometryMajorRadius = 32.0
GeometryMinorRadius = 10.0
GeometryHeight = 17.0
GeometryIsSmall = No
Shadow = SHADOW_VOLUME
ShadowSizeX = 45     ; minimum elevation angle above horizon. Used to limit shadow length
End

Object TyphoonAAMissile
; *** ART Parameters ***
Draw = W3DModelDraw ModuleTag_271
OkToChangeModelColor = Yes
DefaultConditionState
Model = NVTyphoonSAM
Animation = NVTyphoonSAM.NVTyphoonSAM
ParticleSysBone   NONE MissileTrailFlare
AnimationMode = ONCE
End
AliasConditionState = REALLYDAMAGED
ConditionState = JAMMED
ParticleSysBone = None SparksMedium
End
AliasConditionState = REALLYDAMAGED JAMMED
End
; ***DESIGN parameters ***
DisplayName = OBJECT:SCUDMissile
EditorSorting = SYSTEM
VisionRange = 0.0
ArmorSet
Conditions = None
; *Be careful with this type, use in conjunction with KindOf = BALLISTIC_MISSILE to restrict targeting
; *to select weapons, because ballistic missile armor is weak! Weapons capable of targeting must have
; *AntiBallisticMissile = Yes set in the Weapon.ini.
Armor = ProjectileArmor
DamageFX = None
End
; *** ENGINEERING Parameters ***
KindOf = CAN_CAST_REFLECTIONS PROJECTILE SMALL_MISSILE
Body = ActiveBody ModuleTag_272
MaxHealth = 200.0
InitialHealth = 200.0
; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
; A projectile is not disabled, but instead loses target and scatters
SubdualDamageCap = 400
SubdualDamageHealRate = 100000
SubdualDamageHealAmount = 50
End
; ---- begin Projectile death behaviors
Behavior = InstantDeathBehavior DeathModuleTag_273
DeathTypes = NONE +DETONATED
; we detonated normally.
; no FX, just quiet destroy ourselves
End
Behavior = InstantDeathBehavior DeathModuleTag_274
DeathTypes = NONE +LASERED
; shot down by laser.
FX = FX_GenericMissileDisintegrate
OCL = OCL_GenericMissileDisintegrate
End
Behavior = InstantDeathBehavior DeathModuleTag_275
DeathTypes = ALL -LASERED -DETONATED
; shot down by nonlaser.
FX = FX_GenericMissileDeath
End
; ---- end Projectile death behaviors
Behavior = PhysicsBehavior ModuleTag_276
Mass = 1
End
Behavior = MissileAIUpdate ModuleTag_277
TryToFollowTarget = Yes
FuelLifetime = 15000
IgnitionDelay = 200 ;400
IgnitionFX = FX_TyphoonMissileIgnition
InitialVelocity = 250 ;150     ; in dist/sec
DistanceToTravelBeforeTurning = 20
DistanceToTargetForLock = 100
End
Locomotor = SET_NORMAL SAMLocomotorFast

Geometry = Cylinder     ; Since collision extents can't tilt, this is a little fake
GeometryMajorRadius = 3.5
GeometryHeight = 3.5
GeometryIsSmall = Yes
Shadow = SHADOW_DECAL
End

Object DeadTyphoonCabHulk
; *** ART Parameters ***
Draw = W3DModelDraw ModuleTag_01
DefaultConditionState
Model = NVTyphoon_D1
End
End
; ***DESIGN parameters ***
EditorSorting = DEBRIS
; *** ENGINEERING Parameters ***
KindOf = NO_COLLIDE HULK
Behavior = PhysicsBehavior ModuleTag_03
Mass = 80.0
AllowBouncing = Yes
KillWhenRestingOnGround = Yes
End
Behavior = LifetimeUpdate ModuleTag_04
MinLifetime = 1400     ; min lifetime in msec
MaxLifetime = 1600     ; max lifetime in msec
End
Behavior = SlowDeathBehavior ModuleTag_05
SinkDelay = 1700
SinkRate = 2     ; in Dist/Sec
DestructionDelay = 8000
End
End

Object DeadTyphoonTrailerHulk
; *** ART Parameters ***
Draw = W3DModelDraw ModuleTag_01
DefaultConditionState
Model = NVTyphoon_D4
End
End
; ***DESIGN parameters ***
EditorSorting = DEBRIS
; *** ENGINEERING Parameters ***
KindOf = NO_COLLIDE HULK
Behavior = PhysicsBehavior ModuleTag_03
Mass = 100.0
AllowBouncing = Yes
KillWhenRestingOnGround = Yes
End
Behavior = LifetimeUpdate ModuleTag_04
MinLifetime = 1500     ; min lifetime in msec
MaxLifetime = 1700     ; max lifetime in msec
End
Behavior = SlowDeathBehavior ModuleTag_05
SinkDelay = 1800
SinkRate = 2     ; in Dist/Sec
DestructionDelay = 8000
End
End