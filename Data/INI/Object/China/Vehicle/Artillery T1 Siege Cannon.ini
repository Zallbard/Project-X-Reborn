Object ChinaVehicleSiegeCannon

; *** ART Parameters ***
SelectPortrait         = SNChinaSiegeCannon
ButtonImage            = SNChinaSiegeCannon

Draw                    = W3DOverlordTankDraw ModuleTag_01
OkToChangeModelColor  = Yes
ExtraPublicBone       = CHASSIS

ConditionState        = NONE
Model               = NVSgCann
HideSubObject       = Upgrade01 Upgrade02
Turret              = Turret
TurretPitch         = TurretEL
AltTurret           = Turret02
WeaponFireFXBone    = PRIMARY MuzzleFX
WeaponRecoilBone    = PRIMARY Barrel
WeaponMuzzleFlash   = PRIMARY MuzzleFX
WeaponLaunchBone    = PRIMARY MuzzleFX
WeaponMuzzleFlash   = SECONDARY MuzzleFX02
End

ConditionState        = REALLYDAMAGED
Model               = NVSgCann_D
HideSubObject       = Upgrade01 Upgrade02
Turret              = Turret
TurretPitch         = TurretEL
AltTurret           = Turret02
WeaponFireFXBone    = PRIMARY MuzzleFX
WeaponRecoilBone    = PRIMARY Barrel
WeaponMuzzleFlash   = PRIMARY MuzzleFX
WeaponLaunchBone    = PRIMARY MuzzleFX
WeaponMuzzleFlash   = SECONDARY MuzzleFX02
End

ConditionState = RUBBLE
Model               = NVSgCann_D
HideSubObject       = Upgrade01 Upgrade02
Turret              = Turret
TurretPitch         = TurretEL
AltTurret           = Turret02
WeaponFireFXBone    = PRIMARY MuzzleFX
WeaponRecoilBone    = PRIMARY Barrel
WeaponMuzzleFlash   = PRIMARY MuzzleFX
WeaponLaunchBone    = PRIMARY MuzzleFX
WeaponMuzzleFlash   = SECONDARY MuzzleFX02
End

ConditionState        = WEAPONSET_PLAYER_UPGRADE
Model               = NVSgCann
HideSubObject       = Upgrade01 HOUSECOLOR04
ShowSubObject       = Upgrade02
Turret              = Turret
TurretPitch         = TurretEL
AltTurret           = Turret02
WeaponFireFXBone    = PRIMARY MuzzleFX02
WeaponRecoilBone    = PRIMARY Barrel
WeaponMuzzleFlash   = PRIMARY MuzzleFX02
WeaponLaunchBone    = PRIMARY MuzzleFX02
WeaponMuzzleFlash   = SECONDARY MuzzleFX
End

ConditionState        = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
Model               = NVSgCann_D
HideSubObject       = Upgrade01 HOUSECOLOR04
ShowSubObject       = Upgrade02
Turret              = Turret
TurretPitch         = TurretEL
AltTurret           = Turret02
WeaponFireFXBone    = PRIMARY MuzzleFX02
WeaponRecoilBone    = PRIMARY Barrel
WeaponMuzzleFlash   = PRIMARY MuzzleFX02
WeaponLaunchBone    = PRIMARY MuzzleFX02
WeaponMuzzleFlash   = SECONDARY MuzzleFX
End

ConditionState        = WEAPONSET_PLAYER_UPGRADE RUBBLE
Model               = NVSgCann_D
HideSubObject       = Upgrade01 HOUSECOLOR04
ShowSubObject       = Upgrade02
Turret              = Turret
TurretPitch         = TurretEL
AltTurret           = Turret02
WeaponFireFXBone    = PRIMARY MuzzleFX02
WeaponRecoilBone    = PRIMARY Barrel
WeaponMuzzleFlash   = PRIMARY MuzzleFX02
WeaponLaunchBone    = PRIMARY MuzzleFX02
WeaponMuzzleFlash   = SECONDARY MuzzleFX
End

TrackMarks           = EXTnkTrack.tga
TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
End

Draw                    = W3DModelDraw ModuleTag_Lights01
ConditionState        = NONE
Model               = NVSgCann_L
End
End


; ***DESIGN parameters ***
DisplayName        = OBJECT:SiegeCannon
Side               = China
EditorSorting      = VEHICLE
TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions       = None
Weapon           = PRIMARY SiegeCannonGun
End

ArmorSet
Conditions      = None
Armor           = BikeLogicTruckArmor
DamageFX        = TankDamageFX
End
BuildCost          = 1000 ;900
BuildTime          = 15.0          ;in seconds
VisionRange        150
ShroudClearingRange 150
Prerequisites
Object            ChinaWarFactory
Object            ChinaPropagandaCenter
End

ExperienceValue = 50 50 100 150    ;Experience point value at each level
ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
IsTrainable = Yes             ;Can gain experience
CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
CommandSet  ChinaVehicleInfernoCannonCommandSet

; *** AUDIO Parameters ***
VoiceSelect       = SiegeCannonVoiceSelect
VoiceMove         = SiegeCannonVoiceMove
VoiceGuard        = SiegeCannonVoiceMove
VoiceAttack       = SiegeCannonVoiceAttack
SoundMoveStart    = InfernoCannonMoveStart
SoundMoveStartDamaged = InfernoCannonMoveStart
UnitSpecificSounds
; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
VoiceCreate     = SiegeCannonVoiceCreate
TurretMoveStart = NoSound
TurretMoveLoop  = NoSound
VoiceCrush          = SiegeCannonVoiceMove
VoiceEnter         = SiegeCannonVoiceMove
End


; *** ENGINEERING Parameters ***
RadarPriority     = UNIT
KindOf            = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE

Body              = ActiveBody ModuleTag_02
MaxHealth       = 195.0
InitialHealth   = 195.0

; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
SubdualDamageCap = 240
SubdualDamageHealRate = 500
SubdualDamageHealAmount = 50
End

;Behavior = VeterancyGainCreate ModuleTag_03
;StartingLevel = VETERAN
;ScienceRequired = SCIENCE_Nuke_ArtilleryTraining
;End

Behavior = AIUpdateInterface ModuleTag_04
Turret
TurretTurnRate = 120
TurretPitchRate = 100
AllowsPitch = Yes
FirePitch = 40
ControlledWeaponSlots = PRIMARY
End
AltTurret
TurretTurnRate = 180
MinIdleScanInterval   = 250
MaxIdleScanInterval   = 250
MinIdleScanAngle      = 0
MaxIdleScanAngle      = 360
ControlledWeaponSlots = SECONDARY
End
AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
End
Locomotor = SET_NORMAL SiegeCannonLocomotor
Locomotor = SET_NORMAL_UPGRADED SiegeCannonFussionLocomotor

Behavior = PhysicsBehavior ModuleTag_05
Mass = 50.0
End

; A crushing defeat
Behavior               = FXListDie ModuleTag_06
DeathTypes = NONE +CRUSHED +SPLATTED
DeathFX         = FX_CarCrush
End
Behavior               = CreateObjectDie ModuleTag_07
DeathTypes = NONE +CRUSHED +SPLATTED
CreationList    = OCL_CrusaderTank_CrushEffect
End
Behavior = SlowDeathBehavior ModuleTag_08
DeathTypes = ALL -CRUSHED -SPLATTED
ProbabilityModifier = 50
DestructionDelay = 2000
DestructionDelayVariance = 300
FX  = INITIAL  FX_CrusaderCatchFire
FX  = FINAL    FX_GenericTankDeathExplosion
OCL = FINAL    OCL_SiegeCannonDeathEffect
End

Behavior                 = TransitionDamageFX ModuleTag_09
ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
ReallyDamagedFXList1 = Loc: X:-7 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
End

Behavior         = CreateCrateDie ModuleTag_10
CrateData SalvageCrateDataChinaTier1
;CrateData = EliteTankCrateData
;CrateData = HeroicTankCrateData
End

;Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
;DeathWeapon   = Nuke_NuclearTankDeathWeapon
;StartsActive  = Yes
;ConflictsWith = Upgrade_ChinaIsotopeStability
;End

;Behavior = LocomotorSetUpgrade ModuleTag_13
;TriggeredBy = Nuke_Upgrade_ChinaFusionReactors
;End

;Behavior = WeaponBonusUpgrade ModuleTag_15
;TriggeredBy =  Nuke_Upgrade_ChinaWGUraniumShells
;End

Behavior = FlammableUpdate ModuleTag_21
AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
AflameDamageAmount = 3       ; taking this much damage...
AflameDamageDelay = 500       ; this often.
End

Behavior = DestroyDie ModuleTag_22
DeathTypes = NONE +CRUSHED +SPLATTED
End

;Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgrade07
;TriggeredBy = Nuke_Upgrade_ChinaWGUraniumShells
;End

Behavior = OverlordContain ModuleTag_FusionReactorAddon01
Slots                   = 1
DamagePercentToUnits    = 100%
AllowInsideKindOf       = PORTABLE_STRUCTURE
PassengersAllowedToFire = No
End

;Behavior = ObjectCreationUpgrade ModuleTag_FusionReactorAddon02
;UpgradeObject = OCL_SiegeCannonFusionReactorAddons
;TriggeredBy = Nuke_Upgrade_ChinaFusionReactors
;End

Behavior = EjectPilotDie ModuleTag_HijackerEmerge01
DeathTypes = ALL -CRUSHED -SPLATTED
RequiredStatus = HIJACKED
VeterancyLevels =  ALL
GroundCreationList = OCL_HijackerEmerge
AirCreationList = OCL_HijackerEmergeViaParachute
End

Behavior = FXListDie ModuleTag_HijackerEmerge02
RequiredStatus = HIJACKED
DeathTypes = ALL -CRUSHED -SPLATTED
DeathFX = FX_HijackerEmerge
End

;Propaganda Spotlight
Behavior            OCLSpecialPower ModuleTag_PropagandaSpotlight01
SpecialPowerTemplate  SuperweaponPropagandaSpotlight
OCL                   SUPERWEAPON_ChinaPropagandaSpotlight
UpgradeOCL            SCIENCE_Nationalism SUPERWEAPON_ChinaNationalismPropagandaSpotlight
UpgradeOCL            SCIENCE_Patriotism  SUPERWEAPON_ChinaPatriotismPropagandaSpotlight
CreateLocation        USE_OWNER_OBJECT
End

Behavior  GrantScienceUpgrade ModuleTag_PropagandaSpotlight02
TriggeredBy   Upgrade_Nationalism
GrantScience  SCIENCE_Nationalism
End

Behavior  GrantScienceUpgrade ModuleTag_PropagandaSpotlight03
TriggeredBy   Upgrade_Fanaticism
GrantScience  SCIENCE_Patriotism
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

Behavior  HordeUpdate ModuleTag_Horde01
RubOffRadius  150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
UpdateRate  1000     ; how often to recheck horde status (msec)
Radius  75           ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
KindOf  VEHICLE      ; what KindOf's must match to count towards horde-ness
AlliesOnly  Yes      ; do we only count allies towards horde status?
Count  5             ; how many units must be within Radius to grant us horde-ness
Action  HORDE        ; when horde-ing, grant us the HORDE bonus
End

Behavior  StealthUpdate ModuleTag_GPSStealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
InnateStealth                Yes
RequiredStatus               REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Geometry            = BOX
GeometryMajorRadius = 15.0
GeometryMinorRadius = 10.0
GeometryHeight      = 15.0
GeometryIsSmall     = Yes
Shadow              = SHADOW_VOLUME
ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

Object SiegeCannonShell

; *** ART Parameters ***
Draw = W3DModelDraw ModuleTag_01
ConditionState = NONE
Model = AVTankShel
ParticleSysBone = None ArtilleryBarrageTrail
End
End

; ***DESIGN parameters ***
DisplayName       = OBJECT:TankShell
EditorSorting     = SYSTEM
ArmorSet
Armor = ProjectileArmor
End
VisionRange = 0.0


; *** AUDIO Parameters ***
SoundAmbient = NukeCannonIncomingWhistle

; *** ENGINEERING Parameters ***
KindOf = PROJECTILE
Body = ActiveBody ModuleTag_02
MaxHealth       = 100.0
InitialHealth   = 100.0
End

Behavior = DestroyDie ModuleTag_03
;nothing
End

Behavior = DumbProjectileBehavior ModuleTag_04
; To tweak a Bezier path, please see GS
FirstHeight = 50  ; Height of Bezier control points above highest intervening terrain
SecondHeight = 150
FirstPercentIndent = 30% ; Percentage of shot distance control points are placed
SecondPercentIndent = 70%
FlightPathAdjustDistPerSecond   = 0 ; Can allow a max speed this can attempt to follow a target. Units are their velocity we can tag.
End

Behavior = PhysicsBehavior ModuleTag_05
Mass = 0.01   ; we can't have a zero mass, but we want it pretty tiny...
End

;  Behavior = WeaponBonusUpgrade ModuleTag_06
;    TriggeredBy = Nuke_Upgrade_ChinaWGUraniumShells
;  End

;  Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
;    DeathWeapon   = SiegeCannonGun_Upgraded
;    StartsActive  = No
;   TriggeredBy   = Upgrade_ChinaSSNRWarhead
;  End

Geometry = Sphere
GeometryIsSmall = Yes
GeometryMajorRadius = 1.0

End


Object SiegeCannonHulk

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = NVSgCann_D1
    End
  End

  ; ***DESIGN parameters ***
  EditorSorting   = DEBRIS

  ; *** ENGINEERING Parameters ***
  KindOf =  NO_COLLIDE HULK

  Behavior = PhysicsBehavior ModuleTag_03
    Mass = 100.0
    AllowBouncing = Yes
    KillWhenRestingOnGround = Yes
  End
  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 1500   ; min lifetime in msec
    MaxLifetime = 1600   ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    SinkDelay         = 1500
    SinkRate          = 2     ; in Dist/Sec
    DestructionDelay  = 8000
  End
End