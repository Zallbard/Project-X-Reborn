
;------------------------------------------------------------------------------
;**************************** Cinematic-Only unit ****************************
Object CINE_ChinaInfantryParadeRedGuard

; Unit added per John Lee's request. - GB

  ; *** ART Parameters ***
  Draw  W3DModelDraw ModuleTag_01
    OkToChangeModelColor  Yes

    ; ------- Standing-Around Animations
 
    DefaultConditionState
      Model                NICNSC_SKN
      IdleAnimation        NICNSC_SKL.NICNSC_STA 0 35
      IdleAnimation        NICNSC_SKL.NICNSC_IDA
      IdleAnimation        NICNSC_SKL.NICNSC_IDB
      AnimationMode        ONCE
      WeaponFireFXBone     PRIMARY Muzzle
      WeaponMuzzleFlash    PRIMARY MuzzleFX
      TransitionKey        TRANS_Stand
    End

    ConditionState  REALLYDAMAGED
      IdleAnimation        NICNSC_SKL.NICNSC_STB
      AnimationMode        ONCE
      TransitionKey        TRANS_Stand
    End

    ; ------- Machine Gun Animations

    ConditionState  FIRING_A 
      Animation          NICNSC_SKL.NICNSC_ATA
      AnimationMode      LOOP
      TransitionKey      TRANS_Firing
    End
    AliasConditionState  BETWEEN_FIRING_SHOTS_A
    AliasConditionState  RELOADING_A

    ConditionState  FIRING_A REALLYDAMAGED
      Animation          NICNSC_SKL.NICNSC_ATC
      AnimationMode      LOOP
      TransitionKey      TRANS_FiringDamaged
    End
    AliasConditionState  BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState  RELOADING_A REALLYDAMAGED


    ; ------- Firing-related Transitions

    TransitionState  TRANS_Firing TRANS_FiringDamaged
      Animation        NICNSC_SKL.NICNSC_AA2AC
      AnimationMode    ONCE
    End

    TransitionState  TRANS_Stand TRANS_Firing
      Animation        NICNSC_SKL.NICNSC_SA2AA
      AnimationMode    ONCE
      AnimationSpeedFactorRange  40 40
    End

    TransitionState  TRANS_Firing TRANS_Stand
      Animation        NICNSC_SKL.NICNSC_AA2SA
      AnimationMode    ONCE
      AnimationSpeedFactorRange  4 4
    End

    TransitionState  TRANS_Stand TRANS_FiringDamaged
      Animation        NICNSC_SKL.NICNSC_ATCST
      AnimationMode    ONCE
      AnimationSpeedFactorRange  40 40
    End

    TransitionState  TRANS_FiringDamaged TRANS_Stand
      Animation        NICNSC_SKL.NICNSC_ATCED
      AnimationMode    ONCE
       
    End

    ; ------- Bayonet Animations

    ConditionState  PREATTACK_C 
      Animation  NICNSC_SKL.NICNSC_ATB1
      AnimationMode    ONCE
      TransitionKey    TRANS_Stab
    End
    AliasConditionState  PREATTACK_C MOVING
    AliasConditionState  PREATTACK_C FIRING_C
    AliasConditionState  PREATTACK_C BETWEEN_FIRING_SHOTS_C

    ConditionState  FIRING_C
      Animation          NICNSC_SKL.NICNSC_ATB2
      AnimationMode      ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible  TRANS_Stab
    End
    AliasConditionState  BETWEEN_FIRING_SHOTS_C
    AliasConditionState  RELOADING_C

    ; ------- Parachuting Animations

    ConditionState  FREEFALL
      Animation        NICNSC_SKL.NICNSC_POP
      AnimationMode    MANUAL
      Flags            START_FRAME_FIRST
      TransitionKey    TRANS_Falling
    End
    AliasConditionState  FREEFALL REALLYDAMAGED
    AliasConditionState  FREEFALL DYING

    ConditionState  PARACHUTING
      Animation        NICNSC_SKL.NICNSC_PHG
      AnimationMode    LOOP
      Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey    TRANS_Chute
    End
    AliasConditionState  PARACHUTING REALLYDAMAGED
    AliasConditionState  PARACHUTING DYING

    TransitionState  TRANS_Falling TRANS_Chute
      Animation        NICNSC_SKL.NICNSC_POP
      AnimationMode    ONCE
      Flags            PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState  TRANS_Chute TRANS_Stand
      Animation        NICNSC_SKL.NICNSC_PTD
      AnimationMode    ONCE
    End

    ; ------- Movement Animations

    ConditionState  MOVING
      Animation          NICNSC_SKL.NICNSC_MAR 12
      AnimationMode      LOOP
      Flags              RANDOMSTART
      TransitionKey      None
    End
    AliasConditionState  MOVING FIRING_A
    AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState  MOVING RELOADING_A
    AliasConditionState  MOVING FIRING_B
    AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B
    AliasConditionState  MOVING RELOADING_B
    AliasConditionState  MOVING FIRING_C
    AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_C
    AliasConditionState  MOVING RELOADING_C

    ConditionState  MOVING REALLYDAMAGED
      Animation          NICNSC_SKL.NICNSC_RNB
      AnimationMode      LOOP
      Flags              RANDOMSTART
      TransitionKey      None
    End
    AliasConditionState  MOVING FIRING_A REALLYDAMAGED
    AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState  MOVING RELOADING_A REALLYDAMAGED
    AliasConditionState  MOVING FIRING_B REALLYDAMAGED
    AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED
    AliasConditionState  MOVING RELOADING_B REALLYDAMAGED
    AliasConditionState  MOVING FIRING_C REALLYDAMAGED
    AliasConditionState  MOVING BETWEEN_FIRING_SHOTS_C REALLYDAMAGED
    AliasConditionState  MOVING RELOADING_C REALLYDAMAGED

    ; ------- Bldg-capture

    ConditionState  UNPACKING
      Animation          NICNSC_SKL.NICNSC_FDP1
      AnimationMode      ONCE
    End
    AliasConditionState  UNPACKING REALLYDAMAGED

    ConditionState  RAISING_FLAG
      Animation          NICNSC_SKL.NICNSC_FDP2
      AnimationMode      ONCE
      TransitionKey      TRANS_Raising
    End
    AliasConditionState  RAISING_FLAG REALLYDAMAGED

    ConditionState  PACKING
      Animation          NICNSC_SKL.NICNSC_FDP1
      AnimationMode      ONCE_BACKWARDS
      Flags              START_FRAME_LAST
      TransitionKey      TRANS_Packing
    End
    AliasConditionState  PACKING REALLYDAMAGED

    TransitionState  TRANS_Raising TRANS_Packing
      Animation        NICNSC_SKL.NICNSC_FDP2
      AnimationMode    ONCE_BACKWARDS
      Flags            START_FRAME_LAST
    End

    ; ------- Misc Animations

    ConditionState       DYING
      Animation          NICNSC_SKL.NICNSC_DTA
      Animation          NICNSC_SKL.NICNSC_DTB
      AnimationMode      ONCE
      TransitionKey      TRANS_Dying
    End

    TransitionState      TRANS_Dying TRANS_Flailing
      Animation          NICNSC_SKL.NICNSC_ATDE1
      AnimationMode      ONCE
    End

    ConditionState       DYING EXPLODED_FLAILING
      Animation          NICNSC_SKL.NICNSC_ATDE2
      AnimationMode      LOOP
      TransitionKey      TRANS_Flailing
    End

    ConditionState       DYING EXPLODED_BOUNCING
      Animation          NICNSC_SKL.NICNSC_ATDE3
      AnimationMode      ONCE
      TransitionKey      None
    End

    ConditionState  SPECIAL_CHEERING
      Animation          NICNSC_SKL.NICNSC_CHA
      AnimationMode      LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName          OBJECT:Redguard
  Side                 China
  EditorSorting        INFANTRY
  TransportSlotCount   1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions  None 
    Weapon  PRIMARY RedguardMachineGun
    Weapon  SECONDARY None
    Weapon  TERTIARY RedguardBayonet
    AutoChooseSources  TERTIARY None
  End
  ArmorSet
    Conditions       None
    Armor            HumanArmor
    DamageFX         InfantryDamageFX
  End
  VisionRange  100
  ShroudClearingRange  200
  Prerequisites
    Object  ChinaBarracks
  End
  BuildCost      225
  BuildTime      10.0          ;in seconds      

  ExperienceValue  5 5 10 20   ;Experience point value at each level
  ExperienceRequired  0 20 40 80  ;Experience points needed to gain each level
  IsTrainable  Yes             ;Can gain experience
  CrushableLevel          0  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
  CommandSet     ChinaInfantryRedguardCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect  RedGuardVoiceSelect
  VoiceMove  RedGuardVoiceMove
  VoiceAttack  RedGuardVoiceAttack
  VoiceGroupSelect  BattleCrySound

  ; *** ENGINEERING Parameters ***
  RadarPriority  UNIT
  KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE PARACHUTABLE

  Body  ActiveBody ModuleTag_02
    MaxHealth        90.0
    InitialHealth    90.0
  End

  Behavior  AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle  Yes
  End

  Locomotor  SET_NORMAL CINE_ParadeRedguardLocomotor

  Behavior  PhysicsBehavior ModuleTag_06
    Mass  5.0
  End

  Behavior  SquishCollide ModuleTag_09
    ;nothing
  End

; --- begin Death modules ---
  Behavior  SlowDeathBehavior ModuleTag_Death01
    DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7 -EXTRA_8
    SinkDelay            3000
    SinkRate             0.5     ; in Dist/Sec
    DestructionDelay     8000
    FX                   INITIAL FX_RedGuardDie
  End
  Behavior  SlowDeathBehavior ModuleTag_Death02
    DeathTypes           NONE +CRUSHED +SPLATTED
    SinkDelay            3000
    SinkRate             0.5     ; in Dist/Sec
    DestructionDelay     8000
    FX                   INITIAL FX_GIDieCrushed
  End
  Behavior  SlowDeathBehavior ModuleTag_Death03
    DeathTypes           NONE +EXPLODED
    SinkDelay            3000
    SinkRate             0.5     ; in Dist/Sec
    DestructionDelay     8000
    FX                   INITIAL FX_RedGuardDie
    FlingForce           8
    FlingForceVariance   3
    FlingPitch           60
    FlingPitchVariance   10
  End
  Behavior  SlowDeathBehavior ModuleTag_Death04
    DeathTypes           NONE +BURNED
    DestructionDelay     0
    FX                   INITIAL FX_DieByFireChina
    OCL                  INITIAL OCL_FlamingInfantry
  End
  Behavior  SlowDeathBehavior ModuleTag_Death05
    DeathTypes           NONE +POISONED
    DestructionDelay     0
    FX                   INITIAL FX_DieByToxinChina
    OCL                  INITIAL OCL_ToxicInfantry
  End
  Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes           NONE +POISONED_BETA
    DestructionDelay     0
    FX                   INITIAL FX_DieByToxinChina
    OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior  SlowDeathBehavior ModuleTag_Death07
    DeathTypes           NONE +POISONED_GAMMA
    DestructionDelay     0
    FX                   INITIAL FX_DieByFireChina
    OCL                  INITIAL OCL_TeslaDeathInfantry
    FX                   FINAL   FX_IfantryTeslaDie
  End
  Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
    DeathTypes           NONE +EXTRA_2
    DestructionDelay     0
    FX                   INITIAL FX_DieByFireChina
    OCL                  INITIAL OCL_MicrowavedInfantry 
  End
  Behavior  SlowDeathBehavior ModuleTag_Death09
    DeathTypes           NONE +EXTRA_3
    DestructionDelay     0
    FX                   INITIAL FX_DieByFireChina
    FX                   FINAL   FX_IfantryTeslaDie
    OCL                  INITIAL OCL_TeslaDeathInfantry
  End
  Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
    DeathTypes           NONE +EXTRA_4
    SinkDelay            3000
    SinkRate             0.5     ; in Dist/Sec
    DestructionDelay     8000
    OCL                  INITIAL OCL_BrutalBloodyDeathBits
    FX                   INITIAL FX_InfantryGoreExplosion
  End
  Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
    DeathTypes           NONE +EXTRA_5
    ProbabilityModifier  30
    DestructionDelay     0
    OCL                  INITIAL OCL_BloodyGoreExplosion
    FX                   FINAL   FX_InfantryGoreExplosion
  End
  Behavior  SlowDeathBehavior ModuleTag_Death0323
    DeathTypes           NONE +EXTRA_5
    ProbabilityModifier  70
    SinkDelay            3000
    SinkRate             0.5     ; in Dist/Sec
    DestructionDelay     8000
    FX                   INITIAL FX_RedGuardDie
    OCL                  INITIAL OCL_BrutalBloodyDeathBits
    FlingForce           8
    FlingForceVariance   3
    FlingPitch           60
    FlingPitchVariance   10
  End

; --- end Death modules ---
 
  Behavior  PoisonedBehavior ModuleTag_14
    PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration  3000       ; ... for this long after last hit by poison damage
  End

  Behavior  SpecialAbility ModuleTag_15
    SpecialPowerTemplate  SpecialAbilityRedGuardCaptureBuilding
    UpdateModuleStartsAttack  Yes
    InitiateSound          RedGuardVoiceCapture
  End
  Behavior  SpecialAbilityUpdate ModuleTag_16
    SpecialPowerTemplate  SpecialAbilityRedGuardCaptureBuilding
    StartAbilityRange  5.0
    UnpackTime             3000  ; (changing this will scale anim speed)
    PreparationTime        10000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime               2000  ; (changing this will scale anim speed)
    DoCaptureFX            Yes
  End

  Geometry  CYLINDER
  GeometryMajorRadius  10.0
  GeometryMinorRadius  10.0
  GeometryHeight  12.0
  GeometryIsSmall  Yes
  Shadow  SHADOW_DECAL
  ShadowSizeX  14;
  ShadowSizeY  14;
  ShadowTexture  ShadowI;
  BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
;************************ Cinematic-only unit *********************************
Object CINE_ChinaAmbassador

    ; *** ART Parameters ***
  Draw  W3DModelDraw ModuleTag_01
    OkToChangeModelColor  Yes

    DefaultConditionState
      Model  NIAMBSDR_SKN
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_STA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_IDA
      IdleAnimation  NIAMBSDR_SKL.NIAMBSDR_IDB
      AnimationMode  ONCE
      TransitionKey  TRANS_Stand
    End
        
    ConditionState  MOVING
      Animation  NIAMBSDR_SKL.NIAMBSDR_RNA ;***was using WKA but it doesn't exist so I changed it to kill the assert -- Kris 
      AnimationMode  LOOP
      Flags  RANDOMSTART
    End

    ConditionState  MOVING PANICKING
      Animation  NIAMBSDR_SKL.NIAMBSDR_RNA 
      AnimationMode  LOOP
      Flags  RANDOMSTART
    End

    ConditionState  DYING
      Animation  NIAMBSDR_SKL.NIAMBSDR_DTA
      Animation  NIAMBSDR_SKL.NIAMBSDR_DTB
      AnimationMode  ONCE
      TransitionKey  TRANS_Dying
    End

    ;TransitionState  TRANS_Dying TRANS_Flailing
    ;  Animation  NIAMBSDR_SKL.NIAMBSDR_ADTD1
    ;  AnimationMode  ONCE
    ;End

    ;ConditionState  DYING EXPLODED_FLAILING
    ;  Animation  NIAMBSDR_SKL.NIAMBSDR_ADTD2
    ;  AnimationMode  LOOP
    ;  TransitionKey  TRANS_Flailing
    ;End

    ;ConditionState  DYING EXPLODED_BOUNCING
    ;  Animation  NIAMBSDR_SKL.NIAMBSDR_ADTD3
    ;  AnimationMode  ONCE
    ;  TransitionKey  None
    ;End
  End

  ; ***DESIGN parameters ***
  Buildable            No
  DisplayName          OBJECT:Ambassador
  Side                 China
  EditorSorting        INFANTRY
  TransportSlotCount   1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    ; no weapons
  End
  ArmorSet
    Conditions       None
    Armor            HumanArmor
    DamageFX         InfantryDamageFX
  End
  VisionRange  150
  ShroudClearingRange  150

  ExperienceValue  50 100 150 400    ;Experience point value at each level
  ExperienceRequired  0 150 450 900  ;Experience points needed to gain each level
  IsTrainable  Yes             ;Can gain experience

  ; *** AUDIO Parameters ***

  ; *** ENGINEERING Parameters ***
  RadarPriority  UNIT
  KindOf  PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body  ActiveBody ModuleTag_02
    MaxHealth        50.0
    InitialHealth    50.0
  End

  Behavior  AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle  Yes
  End
  Locomotor  SET_NORMAL CINE_BasicHumanLocomotor
  Behavior  PhysicsBehavior ModuleTag_04
    Mass  5.0
  End
  Behavior  SlowDeathBehavior ModuleTag_05
    SinkDelay  3000
    SinkRate  0.5     ; in Dist/Sec
    DestructionDelay  8000
  End
 
  Behavior  SquishCollide ModuleTag_06
    ;nothing
  End

  Behavior  FXListDie ModuleTag_07
    DeathTypes  ALL -CRUSHED -SPLATTED
    DeathFX  FX_RedGuardDie
  End
  Behavior  FXListDie ModuleTag_08
    DeathTypes  NONE +CRUSHED +SPLATTED
    DeathFX  FX_GIDieCrushed
  End

  Behavior  PoisonedBehavior ModuleTag_09
    PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration  3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry  CYLINDER
  GeometryMajorRadius  10.0
  GeometryMinorRadius  10.0
  GeometryHeight  12.0
  GeometryIsSmall  Yes
  Shadow  SHADOW_DECAL
  ShadowSizeX  14
  ShadowSizeY  14
  ShadowTexture  ShadowI
  BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object CINE_ChinaBunker

  ; *** ART Parameters ***
  SelectPortrait          SNBunker_L
  ButtonImage             SNBunker
  Draw                    W3DModelDraw ModuleTag_01
    OkToChangeModelColor  Yes
   
   
    ;day
    ConditionState        NONE
      Model               NBBunker
      HideSubObject       SANDBAGS
    End
    AliasConditionState   NIGHT
    
    ConditionState        DAMAGED
      Model               NBBunker_D
      HideSubObject       SANDBAGS
      ParticleSysBone     Fire01  SmolderingFire
      ParticleSysBone     Smoke01 SmolderingSmoke
      ParticleSysBone     Fire01  SmolderingFlameCore
      ParticleSysBone     Fire02  SmolderingFire
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Fire02  SmolderingFlameCore
    End
    AliasConditionState   DAMAGED NIGHT
    
    ConditionState        REALLYDAMAGED RUBBLE
      Model               NBBunker_E
      HideSubObject       SANDBAGS
      ParticleSysBone     Fire01 SmolderingFire
      ParticleSysBone     Fire01 SmolderingFlameCore
      ParticleSysBone     Fire02 SmolderingFire
      ParticleSysBone     Fire02 SmolderingFlameCore
      ParticleSysBone     Fire03 SmolderingFire
      ParticleSysBone     Fire03 SmolderingFlameCore
      ParticleSysBone     Fire04 SmolderingFire
      ParticleSysBone     Fire04 SmolderingFlameCore
      ParticleSysBone     Fire05 SmolderingFire
      ParticleSysBone     Fire05 SmolderingFlameCore
      ParticleSysBone     Smoke01  SmolderingSmoke
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Smoke03 SmolderingSmoke
      ParticleSysBone     Smoke04 SmolderingSmoke
      ParticleSysBone     Smoke05 SmolderingSmoke
    End
    AliasConditionState   REALLYDAMAGED RUBBLE NIGHT

    
    ConditionState        GARRISONED
      Model               NBBunker
      ShowSubObject       SANDBAGS
    End
    AliasConditionState   NIGHT GARRISONED
    
    ConditionState        DAMAGED GARRISONED
      Model               NBBunker_D
      ShowSubObject       SANDBAGS
      ParticleSysBone     Fire01  SmolderingFire
      ParticleSysBone     Smoke01 SmolderingSmoke
      ParticleSysBone     Fire01  SmolderingFlameCore
      ParticleSysBone     Fire02  SmolderingFire
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Fire02  SmolderingFlameCore
    End
    AliasConditionState   DAMAGED NIGHT GARRISONED
    
    ConditionState        REALLYDAMAGED RUBBLE GARRISONED
      Model               NBBunker_E
      ShowSubObject       SANDBAGS
      ParticleSysBone     Fire01 SmolderingFire
      ParticleSysBone     Fire01 SmolderingFlameCore
      ParticleSysBone     Fire02 SmolderingFire
      ParticleSysBone     Fire02 SmolderingFlameCore
      ParticleSysBone     Fire03 SmolderingFire
      ParticleSysBone     Fire03 SmolderingFlameCore
      ParticleSysBone     Fire04 SmolderingFire
      ParticleSysBone     Fire04 SmolderingFlameCore
      ParticleSysBone     Fire05 SmolderingFire
      ParticleSysBone     Fire05 SmolderingFlameCore
      ParticleSysBone     Smoke01  SmolderingSmoke
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Smoke03 SmolderingSmoke
      ParticleSysBone     Smoke04 SmolderingSmoke
      ParticleSysBone     Smoke05 SmolderingSmoke
    End
    AliasConditionState   REALLYDAMAGED RUBBLE NIGHT GARRISONED
    
    
    
    ConditionState        SNOW
      Model               NBBunker_S
      HideSubObject       SANDBAGS
    End
    AliasConditionState   NIGHT SNOW
    
    ConditionState        DAMAGED SNOW
      Model               NBBunker_SD
      HideSubObject       SANDBAGS
      ParticleSysBone     Fire01  SmolderingFire
      ParticleSysBone     Smoke01 SmolderingSmoke
      ParticleSysBone     Fire01  SmolderingFlameCore
      ParticleSysBone     Fire02  SmolderingFire
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Fire02  SmolderingFlameCore
    End
    AliasConditionState   DAMAGED NIGHT SNOW
    
    ConditionState        REALLYDAMAGED RUBBLE SNOW
      Model               NBBunker_SE
      HideSubObject       SANDBAGS
      ParticleSysBone     Fire01 SmolderingFire
      ParticleSysBone     Fire01 SmolderingFlameCore
      ParticleSysBone     Fire02 SmolderingFire
      ParticleSysBone     Fire02 SmolderingFlameCore
      ParticleSysBone     Fire03 SmolderingFire
      ParticleSysBone     Fire03 SmolderingFlameCore
      ParticleSysBone     Fire04 SmolderingFire
      ParticleSysBone     Fire04 SmolderingFlameCore
      ParticleSysBone     Fire05 SmolderingFire
      ParticleSysBone     Fire05 SmolderingFlameCore
      ParticleSysBone     Smoke01  SmolderingSmoke
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Smoke03 SmolderingSmoke
      ParticleSysBone     Smoke04 SmolderingSmoke
      ParticleSysBone     Smoke05 SmolderingSmoke
    End
    AliasConditionState   REALLYDAMAGED RUBBLE NIGHT SNOW
    
    
    ConditionState        SNOW GARRISONED
      Model               NBBunker_S
      ShowSubObject       SANDBAGS
    End
    AliasConditionState   NIGHT SNOW GARRISONED
    
    ConditionState        DAMAGED SNOW GARRISONED
      Model               NBBunker_SD
      ShowSubObject       SANDBAGS
      ParticleSysBone     Fire01  SmolderingFire
      ParticleSysBone     Smoke01 SmolderingSmoke
      ParticleSysBone     Fire01  SmolderingFlameCore
      ParticleSysBone     Fire02  SmolderingFire
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Fire02  SmolderingFlameCore
    End
    AliasConditionState   DAMAGED NIGHT SNOW GARRISONED
    
    ConditionState        REALLYDAMAGED RUBBLE SNOW GARRISONED
      Model               NBBunker_SE
      ShowSubObject       SANDBAGS
      ParticleSysBone     Fire01 SmolderingFire
      ParticleSysBone     Fire01 SmolderingFlameCore
      ParticleSysBone     Fire02 SmolderingFire
      ParticleSysBone     Fire02 SmolderingFlameCore
      ParticleSysBone     Fire03 SmolderingFire
      ParticleSysBone     Fire03 SmolderingFlameCore
      ParticleSysBone     Fire04 SmolderingFire
      ParticleSysBone     Fire04 SmolderingFlameCore
      ParticleSysBone     Fire05 SmolderingFire
      ParticleSysBone     Fire05 SmolderingFlameCore
      ParticleSysBone     Smoke01  SmolderingSmoke
      ParticleSysBone     Smoke02 SmolderingSmoke
      ParticleSysBone     Smoke03 SmolderingSmoke
      ParticleSysBone     Smoke04 SmolderingSmoke
      ParticleSysBone     Smoke05 SmolderingSmoke
    End
    AliasConditionState   REALLYDAMAGED RUBBLE NIGHT SNOW GARRISONED
    

    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model               NBBunker
      HideSubObject       SANDBAGS
      Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    
    ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model               NBBunker_D
      HideSubObject       SANDBAGS
      Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    
    ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model               NBBunker_E
      HideSubObject       SANDBAGS
      Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED

    ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model               NBBunker_S
      HideSubObject       SANDBAGS
      Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
   AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model               NBBunker_SD
      HideSubObject       SANDBAGS
      Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    
    ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model               NBBunker_SE
      HideSubObject       SANDBAGS
      Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED


    ConditionState        AWAITING_CONSTRUCTION 
      Model               NONE
    End
    AliasConditionState   AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState   AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState   AWAITING_CONSTRUCTION NIGHT
    AliasConditionState   AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState   AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState   AWAITING_CONSTRUCTION SNOW
    AliasConditionState   AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState   AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState   SOLD 
    AliasConditionState   SOLD DAMAGED
    AliasConditionState   SOLD REALLYDAMAGED
    AliasConditionState   SOLD NIGHT
    AliasConditionState   SOLD NIGHT DAMAGED
    AliasConditionState   SOLD NIGHT REALLYDAMAGED
    AliasConditionState   SOLD SNOW
    AliasConditionState   SOLD SNOW DAMAGED
    AliasConditionState   SOLD SNOW REALLYDAMAGED
    AliasConditionState   SOLD NIGHT SNOW
    AliasConditionState   SOLD NIGHT SNOW DAMAGED
    AliasConditionState   SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState   SOLD GARRISONED
    AliasConditionState   SOLD DAMAGED GARRISONED
    AliasConditionState   SOLD REALLYDAMAGED GARRISONED
    AliasConditionState   SOLD NIGHT GARRISONED
    AliasConditionState   SOLD NIGHT DAMAGED GARRISONED
    AliasConditionState   SOLD NIGHT REALLYDAMAGED GARRISONED
    AliasConditionState   SOLD SNOW GARRISONED
    AliasConditionState   SOLD SNOW DAMAGED GARRISONED
    AliasConditionState   SOLD SNOW REALLYDAMAGED GARRISONED
    AliasConditionState   SOLD NIGHT SNOW GARRISONED
    AliasConditionState   SOLD NIGHT SNOW DAMAGED GARRISONED
    AliasConditionState   SOLD NIGHT SNOW REALLYDAMAGED GARRISONED
    ;**************************************************************************************************************************

    
  End  
    
  ; ------------ construction-zone fence -----------------
  Draw  W3DModelDraw ModuleTag_02
  AnimationsRequirePower  No
    DefaultConditionState
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     NIGHT
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     SNOW
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     SNOW NIGHT
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A4
      Animation        NBBunker_A4.NBBunker_A4
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_DAY
    End
    ConditionState     NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A4N
      Animation        NBBunker_A4N.NBBunker_A4N
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_NIGHT
    End
    ConditionState     SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A4S
      Animation        NBBunker_A4S.NBBunker_A4S
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_SNOW
    End
    ConditionState     SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A4SN
      Animation        NBBunker_A4SN.NBBunker_A4SN
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_SNOWNIGHT
    End
    TransitionState    DOWN_DEFAULT UP_DAY
      Model            NBBunker_A4
      Animation        NBBunker_A4.NBBunker_A4
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_NIGHT
      Model            NBBunker_A4N
      Animation        NBBunker_A4N.NBBunker_A4N
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_SNOW
      Model            NBBunker_A4S
      Animation        NBBunker_A4S.NBBunker_A4S
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_SNOWNIGHT
      Model            NBBunker_A4SN
      Animation        NBBunker_A4SN.NBBunker_A4SN
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    UP_DAY DOWN_DEFAULT
      Model            NBBunker_A4
      Animation        NBBunker_A4.NBBunker_A4
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_NIGHT DOWN_DEFAULT
      Model            NBBunker_A4N
      Animation        NBBunker_A4N.NBBunker_A4N
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_SNOW DOWN_DEFAULT
      Model            NBBunker_A4S
      Animation        NBBunker_A4S.NBBunker_A4S
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_SNOWNIGHT DOWN_DEFAULT
      Model            NBBunker_A4SN
      Animation        NBBunker_A4SN.NBBunker_A4SN
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw  W3DModelDraw ModuleTag_03
  AnimationsRequirePower  No
    MinLODRequired  MEDIUM
    DefaultConditionState
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     NIGHT
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     SNOW
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     SNOW NIGHT
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     PARTIALLY_CONSTRUCTED
      Model            NBBunker_A6
      Animation        NBBunker_A6.NBBunker_A6
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_DAY
      ParticleSysBone  Smoke01 BuildUpSmokeChina
      ParticleSysBone  Smoke02 BuildUpSmokeChina
      ParticleSysBone  Smoke03 BuildUpSmokeChina
      ParticleSysBone  Smoke04 BuildUpSmokeChina
    End
    ConditionState     NIGHT PARTIALLY_CONSTRUCTED
      Model            NBBunker_A6N
      Animation        NBBunker_A6N.NBBunker_A6N
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_NIGHT
      ParticleSysBone  Smoke01 BuildUpSmokeChina
      ParticleSysBone  Smoke02 BuildUpSmokeChina
      ParticleSysBone  Smoke03 BuildUpSmokeChina
      ParticleSysBone  Smoke04 BuildUpSmokeChina
    End
    ConditionState     SNOW PARTIALLY_CONSTRUCTED
      Model            NBBunker_A6S
      Animation        NBBunker_A6S.NBBunker_A6S
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_SNOW
      ParticleSysBone  Smoke01 BuildUpSnowSmoke
      ParticleSysBone  Smoke02 BuildUpSnowSmoke
      ParticleSysBone  Smoke03 BuildUpSnowSmoke
      ParticleSysBone  Smoke04 BuildUpSnowSmoke
    End
    ConditionState     SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model            NBBunker_A6SN
      Animation        NBBunker_A6SN.NBBunker_A6SN
      AnimationMode    MANUAL
      Flags            START_FRAME_LAST
      TransitionKey    UP_SNOWNIGHT
      ParticleSysBone  Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone  Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone  Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone  Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState    DOWN_DEFAULT UP_DAY
     Model             NBBunker_A6
      Animation        NBBunker_A6.NBBunker_A6
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_NIGHT
     Model             NBBunker_A6N
      Animation        NBBunker_A6N.NBBunker_A6N
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_SNOW
     Model             NBBunker_A6S
      Animation        NBBunker_A6S.NBBunker_A6S
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_SNOWNIGHT
     Model             NBBunker_A6SN
      Animation        NBBunker_A6SN.NBBunker_A6SN
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    UP_DAY DOWN_DEFAULT
      Model            NBBunker_A6
      Animation        NBBunker_A6.NBBunker_A6
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_NIGHT DOWN_DEFAULT
      Model            NBBunker_A6N
      Animation        NBBunker_A6N.NBBunker_A6N
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_SNOW DOWN_DEFAULT
      Model            NBBunker_A6S
      Animation        NBBunker_A6S.NBBunker_A6S
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_SNOWNIGHT DOWN_DEFAULT
      Model            NBBunker_A6SN
      Animation        NBBunker_A6SN.NBBunker_A6SN
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw  W3DModelDraw ModuleTag_04
  AnimationsRequirePower  No
    DefaultConditionState
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     NIGHT
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     SNOW
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     SNOW NIGHT
      Model            None
      TransitionKey    DOWN_DEFAULT
    End
    ConditionState     SOLD
      Model            NONE
    End

    ConditionState   ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A5
      Animation        NBBunker_A5.NBBunker_A5
      AnimationMode    LOOP
      TransitionKey   UP_DAY
    End

    ConditionState   NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A5N
      Animation        NBBunker_A5N.NBBunker_A5N
      AnimationMode    LOOP
      TransitionKey   UP_NIGHT
    End
    ConditionState   SNOW ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A5S
      Animation        NBBunker_A5S.NBBunker_A5S
      AnimationMode    LOOP
      TransitionKey   UP_SNOW
    End
    ConditionState   SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model            NBBunker_A5SN
      Animation        NBBunker_A5SN.NBBunker_A5SN
      AnimationMode    LOOP
      TransitionKey   UP_SNOWNIGHT
    End
    TransitionState    DOWN_DEFAULT UP_DAY
      Model             NBBunker_AB
      Animation        NBBunker_AB.NBBunker_AB
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End

    TransitionState    DOWN_DEFAULT UP_NIGHT
      Model             NBBunker_ABN
      Animation        NBBunker_ABN.NBBunker_ABN
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_SNOW
      Model             NBBunker_ABS
      Animation        NBBunker_ABS.NBBunker_ABS
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    DOWN_DEFAULT UP_SNOWNIGHT
      Model             NBBunker_ABSN
      Animation        NBBunker_ABSN.NBBunker_ABSN
      AnimationMode    ONCE
      AnimationSpeedFactorRange  1.0 1.0
      Flags            START_FRAME_FIRST
    End
    TransitionState    UP_DAY DOWN_DEFAULT
      Model             NBBunker_AB
      Animation        NBBunker_AB.NBBunker_AB
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_NIGHT DOWN_DEFAULT
      Model             NBBunker_ABN
      Animation        NBBunker_ABN.NBBunker_ABN
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_SNOW DOWN_DEFAULT
      Model             NBBunker_ABS
      Animation        NBBunker_ABS.NBBunker_ABS
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
    TransitionState    UP_SNOWNIGHT DOWN_DEFAULT
      Model             NBBunker_ABSN
      Animation        NBBunker_ABSN.NBBunker_ABSN
      AnimationMode    ONCE_BACKWARDS
      AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
      Flags            START_FRAME_LAST
    End
  End
  
  Draw  W3DModelDraw ModuleTag_FirePointBones
    OkToChangeModelColor  Yes
    DefaultConditionState
      Model  NBBnkrFBns
    End
  End
  
  PlacementViewAngle      -135

  ; ***DESIGN parameters ***
  DisplayName       OBJECT:Bunker
  Side  China
  EditorSorting      STRUCTURE
  
  Prerequisites
    Object             ChinaPropagandaCenter
  End
  
  BuildCost          500
  BuildTime          10.0           ; in seconds
  EnergyProduction   0
  VisionRange        360.0           ; Shroud clearing distance AND targeting range
  ShroudClearingRange  360
  ArmorSet
    Conditions       None
    Armor            DefenceBunkerArmor
    DamageFX         StructureDamageFXNoShake
  End
  CommandSet        ChinaBunkerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect        BunkerSelect
  SoundOnDamaged         BuildingDamagedStateLight
  SoundOnReallyDamaged   BuildingDestroy

  UnitSpecificSounds
    UnderConstruction      UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf             PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE SCORE FS_BASE_DEFENSE GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE
  Body               StructureBody ModuleTag_05
    MaxHealth        1400.0
    InitialHealth    1400.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap  1500
    SubdualDamageHealRate  500
    SubdualDamageHealAmount  100

  End
;  Behavior                FXListDie ModuleTag_07
;    DeathFX          FX_SmallStructureDeath
;  End

  ExperienceValue      20 20 20 20  ; Experience point value at each level

  Behavior  GarrisonContain ModuleTag_08
    ContainMax                     5
    ImmuneToClearBuildingAttacks   Yes
  End

  Behavior  GenerateMinefieldBehavior     ModuleTag_09
    TriggeredBy            Upgrade_ChinaMines
    MineName               ChinaStandardMine
    SmartBorder            Yes
    AlwaysCircular         Yes
  End

  Behavior  ProductionUpdate ModuleTag_10
    ; nothing, but is required if we have any Object-level Upgrades!
  End

  Behavior  FlammableUpdate ModuleTag_12
    AflameDuration  5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount  5       ; taking this much damage...
    AflameDamageDelay  500       ; this often.
  End
  
  Behavior              CreateObjectDie ModuleTag_13
    CreationList   OCL_LargeStructureDebris
  End
  Behavior              FXListDie ModuleTag_14
    DeathFX        FX_StructureSmallDeath
  End
  Behavior  DestroyDie ModuleTag_06
    ;nothing
  End

  Behavior  TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1        Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1  Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2  Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3  Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry             BOX
  GeometryMajorRadius  16.0
  GeometryMinorRadius  16.0
  GeometryHeight       20.0
  GeometryIsSmall      No
  Shadow               SHADOW_VOLUME
  BuildCompletion      PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object CINE_ChinaVehicleTroopCrawler

  ; *** ART Parameters ***
  SelectPortrait          SNTransport_L
  ButtonImage             SNTransport
  
  UpgradeCameo1  Upgrade_Nationalism
  UpgradeCameo2  Upgrade_ChinaSubliminalMessaging
  UpgradeCameo3  Upgrade_ChinaCrawlerRecon
  ;UpgradeCameo4  NONE
  ;UpgradeCameo5  NONE
  
  Draw  W3DTruckDraw ModuleTag_01
    OkToChangeModelColor  Yes
    ParticlesAttachedToAnimatedBones  Yes
    
    ConditionState  NONE
      Model  NVTCrawler
      Animation  NVTCrawler.NVTCrawler
      AnimationMode  LOOP
      HideSubObject  FLAGB01 ;sage is a retard so if you hide this flag it also hides everything else for reasons unknown
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER REDLIGHT01  ;so instead of hiding specific objects we will tell it what it should show instead
    End
    
    ConditionState  REALLYDAMAGED
      Model  NVTCrawler_D
      Animation  NVTCrawler_D.NVTCrawler_D
      AnimationMode  LOOP
      HideSubObject  FLAGB01 ;sage is a retard so if you hide this flag it also hides everything else for reasons unknown
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER REDLIGHT01  ;so instead of hiding specific objects we will tell it what it should show instead
    End
    AliasConditionState  RUBBLE
    
    ;Upgraded with Subliminal
    
    ConditionState  USER_2
      Model  NVTCrawler
      Animation  NVTCrawler.NVTCrawler
      AnimationMode  LOOP
      HideSubObject  FLAGB01 ;sage is a retard so if you hide this flag it also hides everything else for reasons unknown
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER REDLIGHT01  ;so instead of hiding specific objects we will tell it what it should show instead
      ParticleSysBone  FXBONE01 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE02 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE03 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE04 PropagandaSubliminalBroadcast
    End
    
    ConditionState  USER_2 REALLYDAMAGED
      Model  NVTCrawler_D
      Animation  NVTCrawler_D.NVTCrawler_D
      AnimationMode  LOOP
      HideSubObject  FLAGB01 ;sage is a retard so if you hide this flag it also hides everything else for reasons unknown
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER REDLIGHT01  ;so instead of hiding specific objects we will tell it what it should show instead
      ParticleSysBone  FXBONE01 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE02 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE03 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE04 PropagandaSubliminalBroadcast
    End
    AliasConditionState  USER_2 RUBBLE
    
    ;Upgraded with recon kit
    
    ConditionState  USER_1
      Model  NVTCrawler
      Animation  NVTCrawler.NVTCrawler
      AnimationMode  LOOP
      HideSubObject  FLAGB01
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER TURRET RCNARMR01 RCNARMR02 RCNARMR03 RCNARMR04 RCNARMR05 RCNARMR06 RCNARMR07 RCNARMR08 RCNARMR09 RCNARMR10
      Turret  Turret
      WeaponFireFXBone  SECONDARY WeaponA
      WeaponLaunchBone  SECONDARY WeaponA
    End
    
    ConditionState  REALLYDAMAGED USER_1
      Model  NVTCrawler_D
      Animation  NVTCrawler_D.NVTCrawler_D
      AnimationMode  LOOP
      HideSubObject  FLAGB01
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER TURRET RCNARMR01 RCNARMR02 RCNARMR03 RCNARMR04 RCNARMR05 RCNARMR06 RCNARMR07 RCNARMR08 RCNARMR09 RCNARMR10
      Turret  Turret
      WeaponFireFXBone  SECONDARY WeaponA
      WeaponLaunchBone  SECONDARY WeaponA
    End
    AliasConditionState  USER_1 RUBBLE
    
    ;Upgraded with Subliminal and recon kit
    
    ConditionState  USER_1 USER_2
      Model  NVTCrawler
      Animation  NVTCrawler.NVTCrawler
      AnimationMode  LOOP
      HideSubObject  FLAGB01
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER TURRET RCNARMR01 RCNARMR02 RCNARMR03 RCNARMR04 RCNARMR05 RCNARMR06 RCNARMR07 RCNARMR08 RCNARMR09 RCNARMR10
      Turret  Turret
      WeaponFireFXBone  SECONDARY WeaponA
      WeaponLaunchBone  SECONDARY WeaponA
      ParticleSysBone  FXBONE01 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE02 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE03 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE04 PropagandaSubliminalBroadcast
    End
    
    ConditionState  REALLYDAMAGED USER_1 USER_2
      Model  NVTCrawler_D
      Animation  NVTCrawler_D.NVTCrawler_D
      AnimationMode  LOOP
      HideSubObject  FLAGB01
      ShowSubObject  CHASSIS WHEEL01 WHEEL02 WHEEL03 WHEEL04 WHEEL05 WHEEL06 WHEEL07 WHEEL08 SPEAKER TURRET RCNARMR01 RCNARMR02 RCNARMR03 RCNARMR04 RCNARMR05 RCNARMR06 RCNARMR07 RCNARMR08 RCNARMR09 RCNARMR10
      Turret  Turret
      WeaponFireFXBone  SECONDARY WeaponA
      WeaponLaunchBone  SECONDARY WeaponA
      ParticleSysBone  FXBONE01 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE02 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE03 PropagandaSubliminalBroadcast
      ParticleSysBone  FXBONE04 PropagandaSubliminalBroadcast
    End
    AliasConditionState  USER_1 USER_2 RUBBLE
    
    TrackMarks  EXTireTrack.tga

    Dust  RocketBuggyDust
    DirtSpray  RocketBuggyDirtSpray

    LeftFrontTireBone      DUMMWHL01
    RightFrontTireBone     DUMMWHL08
    LeftRearTireBone       DUMMWHL03
    RightRearTireBone      DUMMWHL05
    MidLeftFrontTireBone   DUMMWHL02
    MidRightFrontTireBone  DUMMWHL07
    MidLeftRearTireBone    DUMMWHL04
    MidRightRearTireBone   DUMMWHL06

    TireRotationMultiplier       0.2   ; this * speed  rotation.
    PowerslideRotationAddition   0   ; This vehicle doesn't powerslide.

  End

  Draw  W3DModelDraw ModuleMod_OverWater
  
    DefaultConditionState
      Model  NVTCrawler
      HideSubObject  FLAGB01
    End
    AliasConditionState   MOVING
    
    ConditionState        OVER_WATER
      ParticleSysBone     WATERFX01 AmphibWaveRest
      ParticleSysBone     WATERFX02 AmphibWaveRest
    End   
    
    ConditionState        OVER_WATER MOVING
      ParticleSysBone     WATERFX01 AmphibWave
      ParticleSysBone     WATERFX02 AmphibWave
    End
    
  End

  Draw  W3DModelDraw ModuleMod_Night
  
    DefaultConditionState
      Model  NVTCrawler_N
    End
    
  End

  ; ***DESIGN parameters ***
  DisplayName       OBJECT:TroopCrawler
  Side  China
  EditorSorting    VEHICLE
  TransportSlotCount  8                 ;Just enough to fit into a Chinook.
  
  WeaponSet
    Conditions  None 
    Weapon             PRIMARY  SupportVehicleDummyWeapon
    Weapon             TERTIARY SupportVehicleDummyWeapon
    AutoChooseSources  TERTIARY NONE
  End

  WeaponSet
    Conditions  PLAYER_UPGRADE
    Weapon             PRIMARY   SupportVehicleDummyWeapon
    AutoChooseSources  PRIMARY   NONE
    Weapon             SECONDARY TroopCrawlerLongRangeScannerWeapon
    AutoChooseSources  SECONDARY NONE
    Weapon             TERTIARY  SupportVehicleDummyWeapon
    AutoChooseSources  TERTIARY  NONE
  End
  
  ArmorSet
    Conditions       None
    Armor            TankArmor
    DamageFX         TankDamageFX
  End
  
  ArmorSet
    Conditions       PLAYER_UPGRADE
    Armor            TroopCrawlerReconArmor
    DamageFX         TankDamageFX
  End
  
  BuildCost        700
  BuildTime        7.0           ;in seconds    
  VisionRange      200           ;Needs to see farther and match it's weapon range -- else troop crawlers will get slaughtered against tanks!
  ShroudClearingRange  200
  
  Prerequisites
    Object  ChinaWarFactory
  End
  
  ExperienceValue     50 50 100 150  ;Experience point value at each level
  
  CrusherLevel            2  ;What can I crush?: 1  infantry, 2  trees, 3  vehicles
  CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
  CommandSet  ChinaTroopCrawlerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect  TroopCrawlerVoiceSelect
  VoiceMove  TroopCrawlerVoiceMove
  VoiceGuard  TroopCrawlerVoiceMove
  VoiceAttack  TroopCrawlerVoiceAttack
  SoundMoveStart  TroopCrawlerMoveStart
  SoundMoveStartDamaged  TroopCrawlerMoveStart
  SoundEnter  HumveeEnter
  SoundExit  HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode  SomeNameSomewhereInLookupINIs
    VoiceCreate      TroopCrawlerVoiceCreate
    TurretMoveStart  NoSound
    TurretMoveLoop  TurretMoveLoop
    TruckLandingSound  NoSound ;RocketBuggyLand
    TruckPowerslideSound  NoSound ;RocketBuggyPowerslide
    VoiceCrush  TroopCrawlerVoiceCrush
    VoiceUnload    TroopCrawlerVoiceUnload
    VoiceEnter  TroopCrawlerVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority  UNIT
  KindOf  PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE CANNOT_RETALIATE
  
  Body  ActiveBody ModuleTag_02
    MaxHealth        300.0
    InitialHealth    300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap  480
    SubdualDamageHealRate  500
    SubdualDamageHealAmount  50
  End

  Behavior  StealthDetectorUpdate ModuleTag_StealthDetect01
    DetectionRate              100   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange             130   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf        MINE
    ExtraForbiddenKindOf       UNATTACKABLE
  End
  
  Behavior  StealthDetectorUpdate ModuleTag_StealthDetect02
    DetectionRate              100   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange             130   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf        DEMOTRAP
    ExtraForbiddenKindOf       UNATTACKABLE
  End
  
  Behavior  StealthDetectorUpdate ModuleTag_StealthDetect03
    DetectionRate              900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange             250   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf        VEHICLE
    ExtraForbiddenKindOf       UNATTACKABLE
    PingSound                  IRPing
    LoudPingSound              IRPingLoud
    IRBrightParticleSysName    IRDetectSonarBright
    IRGridParticleSysName      IRDetectGrid
    IRParticleSysBone          IRFX
  End
  
  Behavior  StealthDetectorUpdate ModuleTag_StealthDetect04
    DetectionRate              900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange             250   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf        OBSTACLE
    ExtraForbiddenKindOf       UNATTACKABLE
    PingSound                  IRPing
    LoudPingSound              IRPingLoud
    IRBrightParticleSysName    IRDetectSonarBright
    IRGridParticleSysName      IRDetectGrid
    IRParticleSysBone          IRFX
  End
  
  Behavior  StealthDetectorUpdate ModuleTag_StealthDetect05
    DetectionRate              900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange             250   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf        STRUCTURE
    ExtraForbiddenKindOf       DEMOTRAP;UNATTACKABLE
    PingSound                  IRPing
    LoudPingSound              IRPingLoud
    IRBrightParticleSysName    IRDetectSonarBright
    IRGridParticleSysName      IRDetectGrid
    IRParticleSysBone          IRFX
  End
  
  Behavior  StealthDetectorUpdate ModuleTag_StealthDetect06
    DetectionRate              900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange             250   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned   No    ; Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained    No    ; Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf        FS_BASE_DEFENSE
    ExtraForbiddenKindOf       UNATTACKABLE
    PingSound                  IRPing
    LoudPingSound              IRPingLoud
    IRBrightParticleSysName    IRDetectSonarBright
    IRGridParticleSysName      IRDetectGrid
    IRParticleSysBone          IRFX
  End
  
  Behavior  TransportAIUpdate ModuleTag_NewAI
    Turret
      ControlledWeaponSlots  SECONDARY
      TurretTurnRate       160
      FiresWhileTurning    Yes
      NaturalTurretPitch   20        ; this keeps it aimed half way between land and sky
      MinIdleScanInterval  250     ; in milliseconds
      MaxIdleScanInterval  250     ; in milliseconds
      MinIdleScanAngle     0       ; in degrees off the natural turret angle
      MaxIdleScanAngle     360     ; in degrees off the natural turret angle
    End
  End  
  Locomotor  SET_NORMAL TroopCrawlerLocomotor TroopCrawlerWaterLocomotor
  
  Behavior  PhysicsBehavior ModuleTag_05
    Mass  50.0
  End
  
  Behavior  TransportContain ModuleTag_06
    Slots                  8
    ;InitialPayload         ChinaInfantryRedguard 4
    ScatterNearbyOnExit    No
    HealthRegen%PerSec     10
    DamagePercentToUnits   10%
    AllowInsideKindOf      INFANTRY
    ExitDelay              250
    NumberOfExitPaths      3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit     Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End
  
  Behavior  WeaponSetUpgrade ModuleTag_ReconUpgrade01
    TriggeredBy    Upgrade_ChinaCrawlerRecon
  End
  
  Behavior  ModelConditionUpgrade ModuleTag_ReconUpgrade02
    ConditionFlag  USER_1
    TriggeredBy    Upgrade_ChinaCrawlerRecon
  End
  
  Behavior  MaxHealthUpgrade ModuleTag_ReconUpgrade03
    TriggeredBy    Upgrade_ChinaCrawlerRecon
    AddMaxHealth   135.0
    ChangeType     ADD_CURRENT_HEALTH_TOO
  End
  
  Behavior  CommandSetUpgrade ModuleTag_ReconUpgrade04
    TriggeredBy    Upgrade_ChinaCrawlerRecon
    CommandSet     ChinaTroopCrawlerUpgradedCommandSet
  End

  Behavior                 ArmorUpgrade ModuleTag_ReconUpgrade05
    TriggeredBy            Upgrade_ChinaCrawlerRecon
  End
  
  Behavior  ProductionUpdate ModuleTag_ShowDetectionRange01
    MaxQueueEntries  1; So you can't build multiple upgrades in the same frame
  End  

  Behavior  ObjectCreationUpgrade ModuleTag_ShowDetectionRange02
    UpgradeObject  OCL_GenericStealthDetectionRangeIndicatorTimer
    TriggeredBy    Upgrade_GLAWorkerFakeCommandSet
  End

  Behavior  FireWeaponWhenDamagedBehavior ModuleTag_DetectionRange03
    StartsActive   No
    TriggeredBy    Upgrade_GLAWorkerFakeCommandSet
    DamageTypes    ALL
    DamageAmount   0    ;Effectively all the time when set to zero which we want in this case
    ContinuousWeaponPristine       TroopCrawlerDetecionRangeIndicatorDecalWeapon
    ContinuousWeaponDamaged        TroopCrawlerDetecionRangeIndicatorDecalWeapon
    ContinuousWeaponReallyDamaged  TroopCrawlerDetecionRangeIndicatorDecalWeapon
  End
  
  Behavior  SlowDeathBehavior ModuleTag_07
    DeathTypes  ALL -CRUSHED -SPLATTED
    DestructionDelay  1
    FX   FINAL    FX_SupplyTruckExplosionOneFinal
    OCL  FINAL    OCL_FinalTroopCrawlerDebris
  End

  Behavior                  TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1  Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1  Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior  DestroyDie ModuleTag_09
    DeathTypes  NONE +CRUSHED +SPLATTED
  End

  Behavior  FXListDie ModuleTag_10
    DeathTypes  NONE +CRUSHED +SPLATTED
    DeathFX  FX_CarCrush
  End

  ; A crushing defeat
  Behavior  FXListDie ModuleTag_11
    DeathTypes  NONE +CRUSHED +SPLATTED
    DeathFX  FX_CarCrush
  End

  Behavior  CreateCrateDie ModuleTag_12
    CrateData  SalvageCrateData
    ;CrateData  EliteTankCrateData
    ;CrateData  HeroicTankCrateData
  End

  Behavior  FlammableUpdate ModuleTag_21
    AflameDuration  5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount  3       ; taking this much damage...
    AflameDamageDelay  500       ; this often.
  End
  
  Behavior  StealthUpdate ModuleTag_GPSStealth01
    StealthDelay                 2000 ; msec
    StealthForbiddenConditions   FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
    InnateStealth                Yes
    RequiredStatus               REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
    OrderIdleEnemiesToAttackMeUponReveal   Yes
  End

  Behavior  EjectPilotDie ModuleTag_HijackerEmerge01
    DeathTypes  ALL -CRUSHED -SPLATTED
    RequiredStatus  HIJACKED
    VeterancyLevels   ALL
    GroundCreationList  OCL_HijackerEmerge
    AirCreationList  OCL_HijackerEmergeViaParachute
  End
  
  Behavior  FXListDie ModuleTag_HijackerEmerge02
    RequiredStatus  HIJACKED
    DeathTypes  ALL -CRUSHED -SPLATTED
    DeathFX  FX_HijackerEmerge
  End
  
  Behavior         PropagandaTowerBehavior ModuleTag_Propaganda01
    Radius                 150.0
    DelayBetweenUpdates    2000 ; in milliseconds
    HealPercentEachSecond  1%   ; get this % of max health every second 
    PulseFX                FX_CrawlerPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    AffectsSelf            Yes
    UpgradeRequired        Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond  2%   ; get this % of max health every second 
    UpgradedPulseFX        FX_CrawlerPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End
  
  Behavior  ModelConditionUpgrade ModuleTag_Propaganda02
    ConditionFlag  USER_2
    TriggeredBy    Upgrade_ChinaSubliminalMessaging
  End
  
  Behavior  FireWeaponUpdate ModuleTag_SpeakerDecal01
    Weapon  SpeakerTowerPropagandaDecalWeapon
  End

  Behavior  HordeUpdate ModuleTag_Horde01
    RubOffRadius  150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate  1000     ; how often to recheck horde status (msec)
    Radius  75           ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf  VEHICLE      ; what KindOf's must match to count towards horde-ness
    AlliesOnly  Yes      ; do we only count allies towards horde status? 
    Count  5             ; how many units must be within Radius to grant us horde-ness
    Action  HORDE        ; when horde-ing, grant us the HORDE bonus
  End
  
  ;This module ensures that emerging infantry from a destroyed transport have a very short time where they cannot be targeted
  Behavior  FireWeaponWhenDeadBehavior ModuleTag_InvulWhenDestroye01
    DeathWeapon    InfantryEmergingFromTransportInvulnerabilityObjectTriggerWeapon
    StartsActive   Yes
  End

  Geometry  BOX
  GeometryMajorRadius  20.0
  GeometryMinorRadius  10.0
  GeometryHeight  13.0     
  GeometryIsSmall  No
  Shadow  SHADOW_VOLUME
  ShadowSizeX  45  ; minimum elevation angle above horizon. Used to limit shadow length    

End