Object ChinaWarFactory

; *** ART Parameters ***
SelectPortrait          SNWarFact_L
ButtonImage             SNWarFact

; ------------ the main factory itself -----------------
Draw                 W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
; day
DefaultConditionState
Model            NBWarFact
End
ConditionState     DAMAGED
Model            NBWarFact_D
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
End
ConditionState     REALLYDAMAGED RUBBLE
Model            NBWarFact_E
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Smoke06 SmolderingSmoke
ParticleSysBone  Smoke07 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
ParticleSysBone  Fire03  SmolderingFire
ParticleSysBone  Fire03  SmolderingFlameCore
End

ConditionState     SNOW
Model            NBWarFact_S
HideSubObject    RAILINGS_AND_GR
End
ConditionState  DAMAGED SNOW
Model            NBWarFact_DS
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
End
ConditionState  REALLYDAMAGED RUBBLE SNOW
Model            NBWarFact_ES
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Smoke06 SmolderingSmoke
ParticleSysBone  Smoke07 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
ParticleSysBone  Fire03  SmolderingFire
ParticleSysBone  Fire03  SmolderingFlameCore
End


; night **********************************************
ConditionState   NIGHT
Model            NBWarFact_N
End
ConditionState     DAMAGED NIGHT
Model            NBWarFact_DN
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
End
ConditionState     REALLYDAMAGED RUBBLE NIGHT
Model            NBWarFact_EN
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Smoke06 SmolderingSmoke
ParticleSysBone  Smoke07 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
ParticleSysBone  Fire03  SmolderingFire
ParticleSysBone  Fire03  SmolderingFlameCore
End

; night   SNOW
ConditionState  NIGHT SNOW
Model            NBWarFact_NS
HideSubObject    BASKET04
End
ConditionState  DAMAGED NIGHT SNOW
Model            NBWarFact_DNS
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
End
ConditionState  REALLYDAMAGED RUBBLE NIGHT SNOW
Model            NBWarFact_ENS
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone  Smoke03 SmolderingSmoke
ParticleSysBone  Smoke04 SmolderingSmoke
ParticleSysBone  Smoke05 SmolderingSmoke
ParticleSysBone  Smoke06 SmolderingSmoke
ParticleSysBone  Smoke07 SmolderingSmoke
ParticleSysBone  Fire01  SmolderingFire
ParticleSysBone  Fire01  SmolderingFlameCore
ParticleSysBone  Fire02  SmolderingFire
ParticleSysBone  Fire02  SmolderingFlameCore
ParticleSysBone  Fire03  SmolderingFire
ParticleSysBone  Fire03  SmolderingFlameCore
End


;**************************************************************************************************************************
;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
;for this draw module
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model               NBWarFact
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
Model               NBWarFact_D
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
Model               NBWarFact_E
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
Model               NBWarFact_N
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
Model               NBWarFact_DN
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
Model               NBWarFact_EN
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
Model               NBWarFact_S
HideSubObject       RAILINGS_AND_GR
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
Model               NBWarFact_DS
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
Model               NBWarFact_ES
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
Model               NBWarFact_NS
HideSubObject       BASKET04
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
Model               NBWarFact_DNS
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
Model               NBWarFact_ENS
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End

ConditionState        AWAITING_CONSTRUCTION
Model               NONE
End
AliasConditionState   AWAITING_CONSTRUCTION DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT
AliasConditionState   AWAITING_CONSTRUCTION NIGHT DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW
AliasConditionState   AWAITING_CONSTRUCTION SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
AliasConditionState   SOLD
AliasConditionState   SOLD DAMAGED
AliasConditionState   SOLD REALLYDAMAGED
AliasConditionState   SOLD NIGHT
AliasConditionState   SOLD NIGHT DAMAGED
AliasConditionState   SOLD NIGHT REALLYDAMAGED
AliasConditionState   SOLD SNOW
AliasConditionState   SOLD SNOW DAMAGED
AliasConditionState   SOLD SNOW REALLYDAMAGED
AliasConditionState   SOLD NIGHT SNOW
AliasConditionState   SOLD NIGHT SNOW DAMAGED
AliasConditionState   SOLD NIGHT SNOW REALLYDAMAGED
;**************************************************************************************************************************


End

Draw                 W3DModelDraw ModuleTag_SnowRailings01

DefaultConditionState
Model            NONE
End
AliasConditionState  DAMAGED
AliasConditionState  REALLYDAMAGED RUBBLE
AliasConditionState  AWAITING_CONSTRUCTION
AliasConditionState  AWAITING_CONSTRUCTION DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION REALLYDAMAGED
AliasConditionState  AWAITING_CONSTRUCTION NIGHT
AliasConditionState  AWAITING_CONSTRUCTION NIGHT DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
AliasConditionState  AWAITING_CONSTRUCTION SNOW
AliasConditionState  AWAITING_CONSTRUCTION SNOW DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
AliasConditionState  AWAITING_CONSTRUCTION NIGHT SNOW
AliasConditionState  AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
AliasConditionState  SOLD
AliasConditionState  SOLD DAMAGED
AliasConditionState  SOLD REALLYDAMAGED
AliasConditionState  SOLD NIGHT
AliasConditionState  SOLD NIGHT DAMAGED
AliasConditionState  SOLD NIGHT REALLYDAMAGED
AliasConditionState  SOLD SNOW
AliasConditionState  SOLD SNOW DAMAGED
AliasConditionState  SOLD SNOW REALLYDAMAGED
AliasConditionState  SOLD NIGHT SNOW
AliasConditionState  SOLD NIGHT SNOW DAMAGED
AliasConditionState  SOLD NIGHT SNOW REALLYDAMAGED
AliasConditionState  DAMAGED SNOW
AliasConditionState  REALLYDAMAGED RUBBLE SNOW
AliasConditionState  NIGHT
AliasConditionState  DAMAGED NIGHT
AliasConditionState  REALLYDAMAGED RUBBLE NIGHT
AliasConditionState  NIGHT SNOW
AliasConditionState  DAMAGED NIGHT SNOW
AliasConditionState  REALLYDAMAGED RUBBLE NIGHT SNOW
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
AliasConditionState  AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

ConditionState     SNOW
Model            NBWarFact_S_R
End

ConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
Model          NBWarFact_S_R
Flags          ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End

End

Draw                 W3DModelDraw ModuleTag_FactorySmoke01

ConditionState     NONE
Model            NBWfSmk
ParticleSysBone  Smoke01 CoalPowerplantChimneySmoke
End
AliasConditionState  SNOW
AliasConditionState  NIGHT
AliasConditionState  NIGHT SNOW

ConditionState     DAMAGED
Model            NBWfSmk_D
ParticleSysBone  Smoke01 CoalPowerplantChimneySmoke
End
AliasConditionState  DAMAGED SNOW
AliasConditionState  DAMAGED NIGHT
AliasConditionState  DAMAGED NIGHT SNOW

ConditionState     REALLYDAMAGED RUBBLE
Model            NBWfSmk_E
ParticleSysBone  Smoke01 CoalPowerplantChimneySmoke
End
AliasConditionState  REALLYDAMAGED RUBBLE SNOW
AliasConditionState  REALLYDAMAGED RUBBLE NIGHT
AliasConditionState  REALLYDAMAGED RUBBLE NIGHT SNOW


;**************************************************************************************************************************
ConditionState        AWAITING_CONSTRUCTION
Model               NONE
End
AliasConditionState   AWAITING_CONSTRUCTION DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT
AliasConditionState   AWAITING_CONSTRUCTION NIGHT DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW
AliasConditionState   AWAITING_CONSTRUCTION SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
AliasConditionState   SOLD
AliasConditionState   SOLD DAMAGED
AliasConditionState   SOLD REALLYDAMAGED
AliasConditionState   SOLD NIGHT
AliasConditionState   SOLD NIGHT DAMAGED
AliasConditionState   SOLD NIGHT REALLYDAMAGED
AliasConditionState   SOLD SNOW
AliasConditionState   SOLD SNOW DAMAGED
AliasConditionState   SOLD SNOW REALLYDAMAGED
AliasConditionState   SOLD NIGHT SNOW
AliasConditionState   SOLD NIGHT SNOW DAMAGED
AliasConditionState   SOLD NIGHT SNOW REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
;**************************************************************************************************************************

End

; ------------------ the construction crane ------------
Draw                    W3DModelDraw ModuleTag_02
OkToChangeModelColor  Yes
ConditionState        None
Model               NBWarFact_A1
Animation           NBWarFact_A1.NBWarFact_A1
AnimationMode       LOOP
WaitForStateToFinishIfPossible  TransitionFinishBeforeSwitch
End
ConditionState        DAMAGED
Model               NBWarFact_A1D
Animation           NBWarFact_A1D.NBWarFact_A1D
AnimationMode       LOOP
WaitForStateToFinishIfPossible  TransitionFinishBeforeSwitch
End
ConditionState        REALLYDAMAGED RUBBLE
Model               NBWarFact_A1E
Animation           NBWarFact_A1E.NBWarFact_A1E
AnimationMode       LOOP
WaitForStateToFinishIfPossible  TransitionFinishBeforeSwitch
End
ConditionState        ACTIVELY_CONSTRUCTING
Model               NBWarFact_A2
Animation           NBWarFact_A2.NBWarFact_A2
AnimationMode       ONCE
TransitionKey       TransitionFinishBeforeSwitch
End
ConditionState        ACTIVELY_CONSTRUCTING DAMAGED
Model               NBWarFact_A2D
Animation           NBWarFact_A2D.NBWarFact_A2D
AnimationMode       ONCE
TransitionKey       TransitionFinishBeforeSwitch
End
ConditionState        ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
Model               NBWarFact_A2E
Animation           NBWarFact_A2E.NBWarFact_A2E
AnimationMode       ONCE
TransitionKey       TransitionFinishBeforeSwitch
End
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model               NBWarFact_A1
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
ConditionState        SOLD DAMAGED REALLYDAMAGED RUBBLE
Model               NONE
End
End


; ------------ construction-zone fence -----------------
Draw                 W3DModelDraw ModuleTag_03
AnimationsRequirePower  No
DefaultConditionState
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     NIGHT
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     SNOW
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     SNOW NIGHT
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A4
Animation        NBWarFact_A4.NBWarFact_A4
AnimationMode    MANUAL
Flags            START_FRAME_LAST
TransitionKey    UP_DAY
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone   Fire01 SmolderingFire
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone   Fire02 SmolderingFire
End
ConditionState     NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A4N
Animation        NBWarFact_A4N.NBWarFact_A4N
AnimationMode    MANUAL
Flags            START_FRAME_LAST
TransitionKey    UP_NIGHT
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone   Fire01 SmolderingFire
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone   Fire02 SmolderingFire
End
ConditionState     SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A4S
Animation        NBWarFact_A4S.NBWarFact_A4S
AnimationMode    MANUAL
Flags            START_FRAME_LAST
TransitionKey    UP_SNOW
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone   Fire01 SmolderingFire
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone   Fire02 SmolderingFire
End
ConditionState     SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A4SN
Animation        NBWarFact_A4SN.NBWarFact_A4SN
AnimationMode    MANUAL
Flags            START_FRAME_LAST
TransitionKey    UP_SNOWNIGHT
ParticleSysBone  Smoke01 SmolderingSmoke
ParticleSysBone   Fire01 SmolderingFire
ParticleSysBone  Smoke02 SmolderingSmoke
ParticleSysBone   Fire02 SmolderingFire
End
TransitionState    DOWN_DEFAULT UP_DAY
Model            NBWarFact_A4
Animation        NBWarFact_A4.NBWarFact_A4
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End
TransitionState    DOWN_DEFAULT UP_NIGHT
Model            NBWarFact_A4N
Animation        NBWarFact_A4N.NBWarFact_A4N
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End
TransitionState    DOWN_DEFAULT UP_SNOW
Model            NBWarFact_A4S
Animation        NBWarFact_A4S.NBWarFact_A4S
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End
TransitionState    DOWN_DEFAULT UP_SNOWNIGHT
Model            NBWarFact_A4SN
Animation        NBWarFact_A4SN.NBWarFact_A4SN
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End
TransitionState    UP_DAY DOWN_DEFAULT
Model            NBWarFact_A4
Animation        NBWarFact_A4.NBWarFact_A4
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
TransitionState    UP_NIGHT DOWN_DEFAULT
Model            NBWarFact_A4N
Animation        NBWarFact_A4N.NBWarFact_A4N
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
TransitionState    UP_SNOW DOWN_DEFAULT
Model            NBWarFact_A4S
Animation        NBWarFact_A4S.NBWarFact_A4S
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
TransitionState    UP_SNOWNIGHT DOWN_DEFAULT
Model            NBWarFact_A4SN
Animation        NBWarFact_A4SN.NBWarFact_A4SN
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
End

; ------------ under-construction scaffolding -----------------
Draw                  W3DModelDraw ModuleTag_04
AnimationsRequirePower  No
MinLODRequired  MEDIUM
DefaultConditionState
Model             None
TransitionKey  DOWN_DEFAULT
End
ConditionState      NIGHT
Model             None
TransitionKey  DOWN_DEFAULT
End
ConditionState      SNOW
Model             None
TransitionKey  DOWN_DEFAULT
End
ConditionState      SNOW NIGHT
Model             None
TransitionKey  DOWN_DEFAULT
End
ConditionState      PARTIALLY_CONSTRUCTED
Model             NBWarFact_A6
Animation         NBWarFact_A6.NBWarFact_A6
AnimationMode     MANUAL
Flags             START_FRAME_LAST
TransitionKey  UP_DAY
ParticleSysBone   Dust01 BuildingDustChina
ParticleSysBone   Smoke01 BuildUpSmokeChina
ParticleSysBone   Smoke02 BuildUpSmokeChina
ParticleSysBone   Smoke03 BuildUpSmokeChina
ParticleSysBone   Smoke04 BuildUpSmokeChina
ParticleSysBone   Smoke05 BuildUpSmokeChina
End
ConditionState      NIGHT PARTIALLY_CONSTRUCTED
Model             NBWarFact_A6N
Animation         NBWarFact_A6N.NBWarFact_A6N
AnimationMode     MANUAL
Flags             START_FRAME_LAST
TransitionKey  UP_NIGHT
ParticleSysBone   Dust01 BuildingDustChina
ParticleSysBone   Smoke01 BuildUpSmokeChina
ParticleSysBone   Smoke02 BuildUpSmokeChina
ParticleSysBone   Smoke03 BuildUpSmokeChina
ParticleSysBone   Smoke04 BuildUpSmokeChina
ParticleSysBone   Smoke05 BuildUpSmokeChina
End
ConditionState      SNOW PARTIALLY_CONSTRUCTED
Model             NBWarFact_A6S
Animation         NBWarFact_A6S.NBWarFact_A6S
AnimationMode     MANUAL
Flags             START_FRAME_LAST
TransitionKey  UP_SNOW
ParticleSysBone   Dust01 BuildingSnowDust
ParticleSysBone   Smoke01 BuildUpSnowSmoke
ParticleSysBone   Smoke02 BuildUpSnowSmoke
ParticleSysBone   Smoke03 BuildUpSnowSmoke
ParticleSysBone   Smoke04 BuildUpSnowSmoke
ParticleSysBone   Smoke05 BuildUpSnowSmoke
End
ConditionState      SNOW NIGHT PARTIALLY_CONSTRUCTED
Model             NBWarFact_A6SN
Animation         NBWarFact_A6SN.NBWarFact_A6SN
AnimationMode     MANUAL
Flags             START_FRAME_LAST
TransitionKey  UP_SNOWNIGHT
ParticleSysBone   Dust01 BuildingNightSnowDust
ParticleSysBone   Smoke01 BuildUpNightSnowSmoke
ParticleSysBone   Smoke02 BuildUpNightSnowSmoke
ParticleSysBone   Smoke03 BuildUpNightSnowSmoke
ParticleSysBone   Smoke04 BuildUpNightSnowSmoke
ParticleSysBone   Smoke05 BuildUpNightSnowSmoke
End
TransitionState     DOWN_DEFAULT UP_DAY
Model              NBWarFact_A6
Animation         NBWarFact_A6.NBWarFact_A6
AnimationMode     ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags             START_FRAME_FIRST
End
TransitionState     DOWN_DEFAULT UP_NIGHT
Model              NBWarFact_A6N
Animation         NBWarFact_A6N.NBWarFact_A6N
AnimationMode     ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags             START_FRAME_FIRST
End
TransitionState     DOWN_DEFAULT UP_SNOW
Model              NBWarFact_A6S
Animation         NBWarFact_A6S.NBWarFact_A6S
AnimationMode     ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags             START_FRAME_FIRST
End
TransitionState     DOWN_DEFAULT UP_SNOWNIGHT
Model              NBWarFact_A6SN
Animation         NBWarFact_A6SN.NBWarFact_A6SN
AnimationMode     ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags             START_FRAME_FIRST
End
TransitionState     UP_DAY DOWN_DEFAULT
Model             NBWarFact_A6
Animation         NBWarFact_A6.NBWarFact_A6
AnimationMode     ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags             START_FRAME_LAST
End
TransitionState     UP_NIGHT DOWN_DEFAULT
Model             NBWarFact_A6N
Animation         NBWarFact_A6N.NBWarFact_A6N
AnimationMode     ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags             START_FRAME_LAST
End
TransitionState     UP_SNOW DOWN_DEFAULT
Model             NBWarFact_A6S
Animation         NBWarFact_A6S.NBWarFact_A6S
AnimationMode     ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags             START_FRAME_LAST
End
TransitionState     UP_SNOWNIGHT DOWN_DEFAULT
Model             NBWarFact_A6SN
Animation         NBWarFact_A6SN.NBWarFact_A6SN
AnimationMode     ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags             START_FRAME_LAST
End
End

; ------------------ the construction conveyor belt ------------
Draw  W3DModelDraw ModuleTag_05
OkToChangeModelColor  Yes
DefaultConditionState
Model            NBWarFact_A7
Animation        NBWarFact_A7.NBWarFact_A7
AnimationMode    LOOP
End
AliasConditionState  NIGHT
AliasConditionState  SNOW
AliasConditionState  SNOW NIGHT
AliasConditionState  NIGHT DAMAGED
AliasConditionState  SNOW DAMAGED
AliasConditionState  SNOW NIGHT DAMAGED
AliasConditionState  NIGHT REALLYDAMAGED RUBBLE
AliasConditionState  SNOW REALLYDAMAGED RUBBLE
AliasConditionState  SNOW NIGHT REALLYDAMAGED RUBBLE

;**************************************************************************************************************************
;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
;for this draw module
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model               NBWarFact_A7
Animation           NBWarFact_A7.NBWarFact_A7
AnimationMode       LOOP
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW

ConditionState        AWAITING_CONSTRUCTION
Model               NONE
End
AliasConditionState   AWAITING_CONSTRUCTION DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT
AliasConditionState   AWAITING_CONSTRUCTION NIGHT DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW
AliasConditionState   AWAITING_CONSTRUCTION SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
AliasConditionState   SOLD DAMAGED
AliasConditionState   SOLD REALLYDAMAGED
AliasConditionState   SOLD NIGHT
AliasConditionState   SOLD NIGHT DAMAGED
AliasConditionState   SOLD NIGHT REALLYDAMAGED
AliasConditionState   SOLD SNOW
AliasConditionState   SOLD SNOW DAMAGED
AliasConditionState   SOLD SNOW REALLYDAMAGED
AliasConditionState   SOLD NIGHT SNOW
AliasConditionState   SOLD NIGHT SNOW DAMAGED
AliasConditionState   SOLD NIGHT SNOW REALLYDAMAGED
;**************************************************************************************************************************
End

; ----------------- the factory door -------------------
Draw  W3DModelDraw ModuleTag_06
DefaultConditionState
Model            NBWarFact_A8
Animation        NBWarFact_A8.NBWarFact_A8
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
End
AliasConditionState  NIGHT
AliasConditionState  SNOW
AliasConditionState  NIGHT SNOW

ConditionState     DAMAGED
Model            NBWarFact_A8D
Animation        NBWarFact_A8D.NBWarFact_A8D
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
End
AliasConditionState  NIGHT DAMAGED
AliasConditionState  SNOW DAMAGED
AliasConditionState  NIGHT SNOW DAMAGED

ConditionState     REALLYDAMAGED RUBBLE
Model            NBWarFact_A8E
Animation        NBWarFact_A8E.NBWarFact_A8E
AnimationMode    MANUAL
Flags            START_FRAME_FIRST
End
AliasConditionState  NIGHT REALLYDAMAGED RUBBLE
AliasConditionState  SNOW REALLYDAMAGED RUBBLE
AliasConditionState  NIGHT SNOW REALLYDAMAGED RUBBLE

ConditionState     DOOR_1_OPENING
Model            NBWarFact_A8
Animation        NBWarFact_A8.NBWarFact_A8
AnimationMode    ONCE
Flags            START_FRAME_FIRST
End
AliasConditionState  NIGHT DOOR_1_OPENING
AliasConditionState  SNOW DOOR_1_OPENING
AliasConditionState  NIGHT SNOW DOOR_1_OPENING


ConditionState     DOOR_1_OPENING DAMAGED
Model            NBWarFact_A8D
Animation        NBWarFact_A8D.NBWarFact_A8D
AnimationMode    ONCE
Flags            START_FRAME_FIRST
End
AliasConditionState  NIGHT DOOR_1_OPENING DAMAGED
AliasConditionState  SNOW DOOR_1_OPENING DAMAGED
AliasConditionState  NIGHT SNOW DOOR_1_OPENING DAMAGED

ConditionState     DOOR_1_OPENING REALLYDAMAGED RUBBLE
Model            NBWarFact_A8E
Animation        NBWarFact_A8E.NBWarFact_A8E
AnimationMode    ONCE
Flags            START_FRAME_FIRST
End
AliasConditionState  NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
AliasConditionState  SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
AliasConditionState  NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE

ConditionState     DOOR_1_CLOSING
Model            NBWarFact_A8
Animation        NBWarFact_A8.NBWarFact_A8
AnimationMode    ONCE_BACKWARDS
Flags            START_FRAME_LAST
End
AliasConditionState  NIGHT DOOR_1_CLOSING
AliasConditionState  SNOW DOOR_1_CLOSING
AliasConditionState  NIGHT SNOW DOOR_1_CLOSING


ConditionState     DOOR_1_CLOSING DAMAGED
Model            NBWarFact_A8D
Animation        NBWarFact_A8D.NBWarFact_A8D
AnimationMode    ONCE_BACKWARDS
Flags            START_FRAME_LAST
End
AliasConditionState  NIGHT DOOR_1_CLOSING DAMAGED
AliasConditionState  SNOW DOOR_1_CLOSING DAMAGED
AliasConditionState  NIGHT SNOW DOOR_1_CLOSING DAMAGED

ConditionState     DOOR_1_CLOSING REALLYDAMAGED RUBBLE
Model            NBWarFact_A8E
Animation        NBWarFact_A8E.NBWarFact_A8E
AnimationMode    ONCE_BACKWARDS
Flags            START_FRAME_LAST
End
AliasConditionState  NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
AliasConditionState  SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
AliasConditionState  NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE

ConditionState     DOOR_1_WAITING_OPEN
Model            NBWarFact_A8
Animation        NBWarFact_A8.NBWarFact_A8
AnimationMode    MANUAL
Flags            START_FRAME_LAST
End
AliasConditionState  NIGHT DOOR_1_WAITING_OPEN
AliasConditionState  SNOW DOOR_1_WAITING_OPEN
AliasConditionState  NIGHT SNOW DOOR_1_WAITING_OPEN


ConditionState     DOOR_1_WAITING_OPEN DAMAGED
Model            NBWarFact_A8D
Animation        NBWarFact_A8D.NBWarFact_A8D
AnimationMode    MANUAL
Flags            START_FRAME_LAST
End
AliasConditionState  NIGHT DOOR_1_WAITING_OPEN DAMAGED
AliasConditionState  SNOW DOOR_1_WAITING_OPEN DAMAGED
AliasConditionState  NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED

ConditionState     DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
Model            NBWarFact_A8E
Animation        NBWarFact_A8E.NBWarFact_A8E
AnimationMode    MANUAL
Flags            START_FRAME_LAST
End
AliasConditionState  NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
AliasConditionState  SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
AliasConditionState  NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE


;**************************************************************************************************************************
;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
;for this draw module
ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
Model               NBWarFact_A8
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW

ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
Model               NBWarFact_A8D
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED

ConditionState        AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
Model               NBWarFact_A8E
Flags               ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
End
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED



ConditionState        AWAITING_CONSTRUCTION
Model               NONE
End
AliasConditionState   AWAITING_CONSTRUCTION DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT
AliasConditionState   AWAITING_CONSTRUCTION NIGHT DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW
AliasConditionState   AWAITING_CONSTRUCTION SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
AliasConditionState   AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
AliasConditionState   SOLD
AliasConditionState   SOLD DAMAGED
AliasConditionState   SOLD REALLYDAMAGED
AliasConditionState   SOLD NIGHT
AliasConditionState   SOLD NIGHT DAMAGED
AliasConditionState   SOLD NIGHT REALLYDAMAGED
AliasConditionState   SOLD SNOW
AliasConditionState   SOLD SNOW DAMAGED
AliasConditionState   SOLD SNOW REALLYDAMAGED
AliasConditionState   SOLD NIGHT SNOW
AliasConditionState   SOLD NIGHT SNOW DAMAGED
AliasConditionState   SOLD NIGHT SNOW REALLYDAMAGED
;**************************************************************************************************************************


End

; ------------ being-constructed crane -----------------
Draw  W3DModelDraw ModuleTag_07
AnimationsRequirePower  No
DefaultConditionState
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     NIGHT
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     SNOW
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     SNOW NIGHT
Model            None
TransitionKey    DOWN_DEFAULT
End
ConditionState     SOLD
Model            NONE
End

ConditionState   ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A5
Animation        NBWarFact_A5.NBWarFact_A5
AnimationMode    LOOP
TransitionKey   UP_DAY
End

ConditionState   NIGHT ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A5N
Animation        NBWarFact_A5N.NBWarFact_A5N
AnimationMode    LOOP
TransitionKey   UP_NIGHT
End

ConditionState   SNOW ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A5S
Animation        NBWarFact_A5S.NBWarFact_A5S
AnimationMode    LOOP
TransitionKey   UP_SNOW
End
ConditionState   SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
Model            NBWarFact_A5SN
Animation        NBWarFact_A5SN.NBWarFact_A5SN
AnimationMode    LOOP
TransitionKey   UP_SNOWNIGHT
End
TransitionState    DOWN_DEFAULT UP_DAY
Model             NBWarFact_AB
Animation        NBWarFact_AB.NBWarFact_AB
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End

TransitionState    DOWN_DEFAULT UP_NIGHT
Model             NBWarFact_ABN
Animation        NBWarFact_ABN.NBWarFact_ABN
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End
TransitionState    DOWN_DEFAULT UP_SNOW
Model             NBWarFact_ABS
Animation        NBWarFact_ABS.NBWarFact_ABS
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End
TransitionState    DOWN_DEFAULT UP_SNOWNIGHT
Model             NBWarFact_ABSN
Animation        NBWarFact_ABSN.NBWarFact_ABSN
AnimationMode    ONCE
AnimationSpeedFactorRange  1.0 1.0
Flags            START_FRAME_FIRST
End
TransitionState    UP_DAY DOWN_DEFAULT
Model             NBWarFact_AB
Animation        NBWarFact_AB.NBWarFact_AB
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
TransitionState    UP_NIGHT DOWN_DEFAULT
Model             NBWarFact_ABN
Animation        NBWarFact_ABN.NBWarFact_ABN
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
TransitionState    UP_SNOW DOWN_DEFAULT
Model             NBWarFact_ABS
Animation        NBWarFact_ABS.NBWarFact_ABS
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
TransitionState    UP_SNOWNIGHT DOWN_DEFAULT
Model             NBWarFact_ABSN
Animation        NBWarFact_ABSN.NBWarFact_ABSN
AnimationMode    ONCE_BACKWARDS
AnimationSpeedFactorRange  2.0 2.0   ; play teardown animations more quickly
Flags            START_FRAME_LAST
End
End

PlacementViewAngle  -135

; ***DESIGN parameters ***
DisplayName       OBJECT:WarFactory
Side              China
EditorSorting     STRUCTURE
Prerequisites
Object ChinaPowerPlant ChinaPowerPlantII
Object ChinaSupplyCenter
End
BuildCost         2000
BuildTime         15.0           ; in seconds
EnergyProduction  -15
CommandSet        ChinaWarFactoryCommandSet
VisionRange       200.0           ; Shroud clearing distance
ShroudClearingRange  200
ArmorSet
Conditions       None
Armor            StructureArmor
DamageFX         StructureDamageFXNoShake
End
ExperienceValue      200 200 200 200  ; Experience point value at each level

; *** AUDIO Parameters ***
VoiceSelect  WarFactoryChinaSelect
SoundOnDamaged         BuildingDamagedStateLight
SoundOnReallyDamaged   BuildingDestroy

UnitSpecificSounds
UnderConstruction      UnderConstructionLoop
End

; *** ENGINEERING Parameters ***
RadarPriority    STRUCTURE
KindOf           PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_WARFACTORY POWERED
Body             StructureBody ModuleTag_08
MaxHealth        4000.0
InitialHealth    4000.0

; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
SubdualDamageCap  2200
SubdualDamageHealRate  500
SubdualDamageHealAmount  100
End

Behavior  ProductionUpdate ModuleTag_12
QuantityModifier              ChinaTankHopper 2

;Optimized Production Vehicles
QuantityModifier              ChinaTankBattleMaster_Optimized    2
QuantityModifier              ChinaVehicleTroopCrawler_Optimized 2
QuantityModifier              ChinaTankGattling_Optimized        2
QuantityModifier              ChinaTankHopper_Optimized          4

NumDoorAnimations             1
DoorOpeningTime               4000  ;in mSeconds
DoorWaitOpenTime              2000  ;in mSeconds
DoorCloseTime                 4500  ;in mSeconds
ConstructionCompleteDuration  1500  ;in mSeconds
End
Behavior  QueueProductionExitUpdate ModuleTag_11
UnitCreatePoint    X:  0.0  Y:-27.0   Z:0.0
NaturalRallyPoint  X: 57.0  Y:-27.0   Z:0.0    ; NaturalRallyPointX must always match GeometryMajorRadius! -ML
ExitDelay  500                                 ; Mainly for the multiple produced Hopper Tanks.  Make them come out one at a time.
End
Behavior  RepairDockUpdate ModuleTag_14
TimeForFullHeal    8000   ;(in milliseconds)
NumberApproachPositions  5
End

Behavior  FlammableUpdate ModuleTag_16
AflameDuration  5000         ; If I catch fire, I'll burn for this long...
AflameDamageAmount  5       ; taking this much damage...
AflameDamageDelay  500       ; this often.
End

Behavior  GenerateMinefieldBehavior     ModuleTag_22
TriggeredBy            Upgrade_400_10
MineName               ChinaStandardMine
SmartBorder            Yes
AlwaysCircular         Yes
End

Behavior  TransitionDamageFX ModuleTag_23
;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
DamagedParticleSystem1        Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
;---------------------------------------------------------------------------------------
ReallyDamagedParticleSystem1  Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
ReallyDamagedParticleSystem2  Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
ReallyDamagedParticleSystem3  Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
End

Behavior                   StructureCollapseUpdate ModuleTag_Collapse01
MinCollapseDelay         600
MaxCollapseDelay         1600
CollapseDamping          0.0
MaxShudder               0.8
MinBurstDelay            250
MaxBurstDelay            700
BigBurstFrequency        4
OCL                      INITIAL   OCL_StructureCollapseInitial
OCL                      DELAY     OCL_StructureCollapseDelay
OCL                      FINAL     OCL_StructureCollapseFinal
FXList                   INITIAL   FX_StructureCollapseInitial
FXList                   DELAY     FX_StructureCollapseDelay
FXList                   BURST     FX_StructureCollapseBurst
FXList                   FINAL     FX_StructureCollapseFinal
End

Behavior                         SlowDeathBehavior ModuleTag_Collapse02
ExemptStatus                   UNDER_CONSTRUCTION
DeathTypes                     ALL
DestructionDelay               2000
End

Behavior  InstantDeathBehavior ModuleTag_Collapse03
RequiredStatus  UNDER_CONSTRUCTION
OCL             OCL_LargeStructureDebris
FX              FX_LargeStructureDeath
End

;This upgraded is used to make alot of ingame effects work properly
;DO NOT REMOVE!
Behavior  GrantUpgradeCreate ModuleTag_AlwaysGrantedUpgrade01
UpgradeToGrant      Upgrade_CostReduction
End

Behavior  CommandSetUpgrade ModuleTag_OptimizedProduction01
TriggeredBy      Upgrade_GLAWorkerFakeCommandSet
CommandSet       ChinaWarFactoryCommandSetUpgraded
RemovesUpgrades  Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
End

Behavior  CommandSetUpgrade ModuleTag_OptimizedProduction02
TriggeredBy      Upgrade_GLAWorkerRealCommandSet
CommandSet       ChinaWarFactoryCommandSet
RemovesUpgrades  Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
End

Behavior  StealthUpdate ModuleTag_GPSStealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
InnateStealth                Yes
RequiredStatus               REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior   CommandSetUpgrade ModuleTag_CommandSet_Nuke01
TriggeredBy Upgrade_Doctrine01
CommandSet ChinaWarFactoryCommandSet_Nuke
End

Geometry             BOX
GeometryMajorRadius  57.0
GeometryMinorRadius  61.0
GeometryHeight       30.0
GeometryIsSmall      No
FactoryExitWidth     25
Shadow           SHADOW_VOLUME
BuildCompletion  PLACED_BY_PLAYER

End