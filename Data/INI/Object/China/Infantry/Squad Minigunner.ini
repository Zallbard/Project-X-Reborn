Object ChinaInfantryMinigunner
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SNMiniGunner_L
ButtonImage             SNMiniGunner

Draw  W3DModelDraw ModuleTag_01

OkToChangeModelColor  Yes

DefaultConditionState
Model              NIMngnr_SKN
IdleAnimation      AISTNG_SKL.AISTNG_STB 0 5
IdleAnimation      AISTNG_SKL.AISTNG_STC
AnimationMode      ONCE
TransitionKey      TRANS_Stand
HideSubObject      Tripod01
End

End

BuildCost  500
BuildTime  6.0

Prerequisites
Object  ChinaBarracks
Object  ChinaWarFactory
End

Side  China
EditorSorting  INFANTRY
BuildVariations  ChinaInfantryMinigunner_Var1

KindOf  PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY OBSTACLE NO_GARRISON REJECT_UNMANNED SCORE ATTACK_NEEDS_LINE_OF_SIGHT CANNOT_RETALIATE

End


;------------------------------------------------------------------------------
Object ChinaInfantryMinigunner_Var1
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SNMiniGunner_L
ButtonImage             SNMiniGunner

UpgradeCameo1  Upgrade_Nationalism
UpgradeCameo2  Upgrade_ChinaChainGuns
;UpgradeCameo3  NONE
;UpgradeCameo4  NONE
;UpgradeCameo5  NONE

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

;Normal state
ConditionState
Model              NIMngnr_SKN
IdleAnimation      AISTNG_SKL.AISTNG_STB 0 5
IdleAnimation      AISTNG_SKL.AISTNG_STC
AnimationMode      ONCE
TransitionKey      TRANS_Stand
HideSubObject      Tripod01
End

TransitionState      TRANS_Moving TRANS_Stand
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_DR2
AnimationMode      ONCE
Turret             AISTNG_MAINRT
Flags              START_FRAME_LAST
HideSubObject      Tripod01
End

ConditionState       MOVING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_RNA
AnimationMode      LOOP
Flags              RANDOMSTART
TransitionKey      TRANS_Moving
ParticleSysBone    None InfantryDustTrails
HideSubObject      Tripod01
End
AliasConditionState  MOVING ATTACKING

TransitionState      TRANS_Stand TRANS_Moving
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_DR2
AnimationMode      ONCE
Turret             AISTNG_MAINRT
HideSubObject      Tripod01
AnimationSpeedFactorRange  1.5 1.8
End

TransitionState      TRANS_Packing TRANS_Moving
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_DR2
AnimationMode      ONCE
Turret             AISTNG_MAINRT
HideSubObject      Tripod01
AnimationSpeedFactorRange  1.5 1.8
End

;Deploy animation
ConditionState       UNPACKING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_MDP
AnimationMode      ONCE
TransitionKey      TRANS_Unpacking
HideSubObject      Tripod02
ShowSubObject      Tripod01
End
AliasConditionState  UNPACKING BETWEEN_FIRING_SHOTS_A
AliasConditionState  UNPACKING BETWEEN_FIRING_SHOTS_B
AliasConditionState  UNPACKING BETWEEN_FIRING_SHOTS_C
AliasConditionState  UNPACKING MOVING
AliasConditionState  UNPACKING ATTACKING
AliasConditionState  UNPACKING ATTACKING MOVING

;Deployed animations
ConditionState       DEPLOYED
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_GID
AnimationMode      LOOP
HideSubObject      Tripod01 Tripod02
ShowSubObject      Gun
Flags              RANDOMSTART
TransitionKey      TRANS_Deployed
Turret             AISTNG_MAINRT
End

ConditionState  DEPLOYED MOVING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_RNA
AnimationMode      LOOP
Flags              RANDOMSTART
HideSubObject      Tripod02
ShowSubObject      Tripod01
TransitionKey      TRANS_Deployed_Moving
ParticleSysBone    None InfantryDustTrails
Turret             AISTNG_MAINRT
End
AliasConditionState  DEPLOYED MOVING ATTACKING

TransitionState      TRANS_Deployed_Moving TRANS_Deployed
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_MDP
AnimationMode      ONCE_BACKWARDS
HideSubObject      Tripod02
ShowSubObject      Tripod01
AnimationSpeedFactorRange  2.5 2.5
End

TransitionState  TRANS_Deployed_Moving TRANS_Firing
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_MDP
AnimationMode      ONCE
HideSubObject      Tripod02
ShowSubObject      Tripod01
AnimationSpeedFactorRange  2.5 2.5
End

ConditionState  DEPLOYED ATTACKING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_ATA3
AnimationMode      LOOP
TransitionKey      TRANS_Firing
Turret             AISTNG_MAINRT
HideSubObject      Tripod01 Tripod02
ShowSubObject      Gun
AnimationSpeedFactorRange  1.5 2.0
End

;Packup animation
ConditionState       PACKING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_MDP
AnimationMode      ONCE_BACKWARDS
Turret             TURRET
HideSubObject      Tripod02
ShowSubObject      Tripod01
TransitionKey      TRANS_Packing
End

;Deployed Death animations
ConditionState       DEPLOYED DYING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_GDA
Animation          AISTNG_SKL.AISTNG_GDB
AnimationMode      ONCE
TransitionKey      TRANS_Dying
HideSubObject      Tripod01
AnimationSpeedFactorRange  0.9 1.25
End

;Regulair Death animations
ConditionState       DYING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_DTE
AnimationMode      ONCE
HideSubObject      Tripod01
TransitionKey      TRANS_Dying
End

ConditionState       MOVING DYING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_DTD
AnimationMode      ONCE
HideSubObject      Tripod01
TransitionKey      TRANS_Dying
End

TransitionState      TRANS_Dying TRANS_Flailing
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_ADTF1
AnimationMode      ONCE
End

ConditionState       DYING EXPLODED_FLAILING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_ADTF2
AnimationMode      LOOP
TransitionKey      TRANS_Flailing
End

ConditionState       DYING EXPLODED_BOUNCING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_ADTF3
AnimationMode      ONCE
TransitionKey      None
End

;Parachute animations
ConditionState       FREEFALL
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_PFL
AnimationMode      LOOP
HideSubObject      Tripod01
TransitionKey      TRANS_Falling
End
AliasConditionState  FREEFALL DYING

ConditionState       PARACHUTING
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_PHG
AnimationMode      LOOP
HideSubObject      Tripod01
Flags              PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey      TRANS_Chute
End
AliasConditionState  PARACHUTING DYING

TransitionState      TRANS_Falling TRANS_Chute
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_POP
AnimationMode      ONCE
HideSubObject      Tripod01
End

TransitionState      TRANS_Chute TRANS_Stand
Model              NIMngnr_SKN
Animation          AISTNG_SKL.AISTNG_PTD
AnimationMode      ONCE
HideSubObject      Tripod01
End

End

Draw  W3DModelDraw ModuleTag_Bones

DefaultConditionState
Model              NIMngnr_SKN_B
Turret             Turret
HideSubObject      Tripod01 MuzzleFX01
WeaponFireFXBone   PRIMARY Muzzle
WeaponLaunchBone   PRIMARY Muzzle
End
AliasConditionState  UNPACKING
AliasConditionState  UNPACKING BETWEEN_FIRING_SHOTS_A
AliasConditionState  UNPACKING BETWEEN_FIRING_SHOTS_B
AliasConditionState  UNPACKING BETWEEN_FIRING_SHOTS_C
AliasConditionState  UNPACKING MOVING
AliasConditionState  UNPACKING ATTACKING
AliasConditionState  UNPACKING ATTACKING MOVING
AliasConditionState  DEPLOYED MOVING
AliasConditionState  DEPLOYED MOVING ATTACKING
AliasConditionState  PACKING
AliasConditionState  PACKING BETWEEN_FIRING_SHOTS_A
AliasConditionState  PACKING BETWEEN_FIRING_SHOTS_B
AliasConditionState  PACKING BETWEEN_FIRING_SHOTS_C
AliasConditionState  ATTACKING PACKING
AliasConditionState  ATTACKING PACKING BETWEEN_FIRING_SHOTS_A
AliasConditionState  ATTACKING PACKING BETWEEN_FIRING_SHOTS_B
AliasConditionState  ATTACKING PACKING BETWEEN_FIRING_SHOTS_C

ConditionState  DEPLOYED FIRING_A
Model              NIMngnr_SKN_B
Turret             Turret
ShowSubObject      Tripod01 MuzzleFX01
End
AliasConditionState  DEPLOYED FIRING_B
AliasConditionState  DEPLOYED ATTACKING FIRING_A
AliasConditionState  DEPLOYED ATTACKING FIRING_B

ConditionState  DEPLOYED
ShowSubObject  Tripod01
End
AliasConditionState  DEPLOYED RELOADING_A
AliasConditionState  DEPLOYED BETWEEN_FIRING_SHOTS_A
AliasConditionState  DEPLOYED RELOADING_B
AliasConditionState  DEPLOYED BETWEEN_FIRING_SHOTS_B
AliasConditionState  DEPLOYED RELOADING_C
AliasConditionState  DEPLOYED BETWEEN_FIRING_SHOTS_C
AliasConditionState  DEPLOYED FIRING_C
AliasConditionState  DEPLOYED ATTACKING FIRING_C
End


; ***DESIGN parameters ***
DisplayName       OBJECT:MiniGunner
Side  China
EditorSorting  SYSTEM
TransportSlotCount  0                ;how many "slots" we take in a transport (0 == not transportable)

WeaponSet
Conditions  NONE
Weapon             PRIMARY  MinigunnerGattlingGun
Weapon             TERTIARY GrenadierDummyDeployWeapon
AutoChooseSources  TERTIARY NONE
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon             PRIMARY  MinigunnerGattlingGunUpgraded
Weapon             TERTIARY GrenadierDummyDeployWeapon
AutoChooseSources  TERTIARY NONE
End

ArmorSet
Conditions       None
Armor            WeaponTeamHumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  320
ShroudClearingRange  220

Prerequisites
Object   ChinaBarracks
Object   ChinaWarFactory
End

BuildCost  500
BuildTime  6.0          ;in seconds

ExperienceValue     60 80  100 120  ;Experience point value at each level
ExperienceRequired  0  200 400 600  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

CommandSet       ChinaInfantryMinigunnerCommandSet

; *** AUDIO Parameters ***
VoiceSelect        MinigunnerTeamVoiceSelect
VoiceAttack        MinigunnerTeamVoiceAttack
VoiceFear          MinigunnerTeamVoiceFear
VoiceMove          MinigunnerTeamVoiceMove
VoiceGuard         MinigunnerTeamVoiceMove

UnitSpecificSounds
VoiceGarrison        MinigunnerTeamVoiceMove
VoiceEnter           MinigunnerTeamVoiceMove
VoiceGetHealed       MinigunnerTeamVoiceMove
VoiceFlameLocation   MinigunnerTeamVoiceMove
VoiceCreate          MinigunnerTeamVoiceCreate
Deploy               MinigunnerTeamDeploy
Undeploy             MinigunnerTeamPackup
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY OBSTACLE NO_GARRISON REJECT_UNMANNED SCORE ATTACK_NEEDS_LINE_OF_SIGHT CANNOT_RETALIATE

Body  HiveStructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0

PropagateDamageTypesToSlavesWhenExisting  ALL -STATUS +SURRENDER

End

Behavior  DeployStyleAIUpdate ModuleTag_03

Turret
TurretTurnRate         360
RecenterTime           99999999999
ControlledWeaponSlots  PRIMARY SECONDARY TERTIARY
InitiallyDisabled      Yes
End

PackTime  1980
UnpackTime  1980
TurretsFunctionOnlyWhenDeployed  Yes
TurretsMustCenterBeforePacking  Yes
ManualDeployAnimations  Yes
AutoAcquireEnemiesWhenIdle  Yes
MoodAttackCheckRate  33

End
Locomotor  SET_NORMAL NukeneerLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

Behavior             SpawnBehavior ModuleTag_SpawnTeam01
SpawnNumber            2
SpawnReplaceDelay      500
SpawnTemplateName      ChinaInfantryMinigunnerTeamMember01
SpawnTemplateName      ChinaInfantryMinigunnerTeamMember02
InitialBurst           0
OneShot                Yes
ExitByBudding          Yes
SpawnedRequireSpawner  Yes
AggregateHealth        No
SlavesHaveFreeWill     No
End

Behavior  QueueProductionExitUpdate ModuleTag_SpawnTeam02
UnitCreatePoint    X:0.0  Y:0.0  Z:0.0
NaturalRallyPoint  X:0.0  Y:0.0  Z:0.0
ExitDelay      500
InitialBurst   0
End

Behavior  WeaponBonusUpgrade ModuleTag_222
TriggeredBy  Upgrade_ChinaChainGuns
End

Behavior  WeaponSetUpgrade ModuleTag_139
TriggeredBy  Upgrade_ChinaChainGuns
End

Behavior  HordeUpdate ModuleTag_Horde01
UpdateRate  2000    ; how often to recheck horde status (msec)
RubOffRadius  60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
Radius  30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
KindOf  INFANTRY    ; what KindOf's must match to count towards horde-ness
AlliesOnly  Yes     ; do we only count allies towards horde status?
ExactMatch  No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
Count  5            ; how many units must be within Radius to grant us horde-ness
Action  HORDE       ; when horde-ing, grant us the HORDE bonus
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_MinigunnerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDie
OCL                  INITIAL OCL_ChinaExplodedDeathMiniGunner
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByFire
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByFire
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_ChinaExplodedDeathMiniGunner
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MinigunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MinigunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

;  Behavior  FireWeaponCollide ModuleTag_DeployMarkerDecal01
;    CollideWeapon   InfantryDeployedDecalWeapon
;    RequiredStatus  DEPLOYED
;  End

;  Behavior  FireWeaponUpdate ModuleTag_DeployMarkerDecal02
;    Weapon  GenericCollisionDummyWeapon
;  End

Behavior  PoisonedBehavior ModuleTag_12
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Geometry  CYLINDER
GeometryMajorRadius  10.0
GeometryMinorRadius  10.0
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI_2;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object ChinaInfantryMinigunnerTeamMember01
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SNMiniGunner_L
ButtonImage             SNMiniGunner

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

DefaultConditionState
Model  NIMngnr_SKN_D
IdleAnimation              AISTNG_SKL.AISTNG_STA 0 10
IdleAnimation              AISTNG_SKL.AISTNG_IDA
AnimationMode              ONCE
AnimationSpeedFactorRange  0.8 1.2
TransitionKey              TRANS_Stand
WeaponMuzzleFlash  PRIMARY MuzzleFX
End
AliasConditionState  REALLYDAMAGED

TransitionState              TRANS_Stand TRANS_Moving
Model                      NIMngnr_SKN_C
Animation                  AISTNG_SKL.AISTNG_DR1
AnimationMode              ONCE
AnimationSpeedFactorRange  5.0 5.0
End

TransitionState              TRANS_Moving TRANS_Stand
Model                      NIMngnr_SKN_C
Animation                  AISTNG_SKL.AISTNG_MTM
AnimationMode              ONCE
End

ConditionState     MOVING
Model                      NIMngnr_SKN_C
Animation        AISTNG_SKL.AISTNG_RNA
AnimationMode    LOOP
Flags            RANDOMSTART
TransitionKey    TRANS_Moving
ParticleSysBone  None InfantryDustTrails
End
AliasConditionState          MOVING REALLYDAMAGED

ConditionState               MOVING DYING
Model                      NIMngnr_SKN_C
Animation                  AISTNG_SKL.AISTNG_DTC
AnimationSpeedFactorRange  0.9 1.25
AnimationMode              ONCE
TransitionKey              TRANS_Dying
End

ConditionState               DYING
Model                      NIMngnr_SKN_C
Animation                  AISTNG_SKL.AISTNG_DTA
Animation                  AISTNG_SKL.AISTNG_DTB
AnimationSpeedFactorRange  0.9 1.25
AnimationMode              ONCE
TransitionKey              TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_ADTF1
AnimationMode  ONCE
End

ConditionState   DYING EXPLODED_FLAILING
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_ADTF2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState   DYING EXPLODED_BOUNCING
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_ADTF3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState   FREEFALL
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End

AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState   PARACHUTING
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_PHG
AnimationMode  LOOP
Flags          PRISTINE_BONE_POS_IN_FINAL_FRAME
TransitionKey  TRANS_Chute
End

AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING

TransitionState  TRANS_Falling TRANS_Chute
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_POP
AnimationMode  ONCE
End

TransitionState  TRANS_Chute TRANS_Stand
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_PTD
AnimationMode  ONCE
End

ConditionState   SPECIAL_CHEERING
Model                      NIMngnr_SKN_C
Animation      AISTNG_SKL.AISTNG_CHA
AnimationMode  ONCE
End

End


;**** DESIGN parameters ***
Side  China
EditorSorting  SYSTEM
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)


ArmorSet
Conditions       None
Armor            WeaponTeamHumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220

BuildTime  0.0

IsTrainable  No             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE IGNORED_IN_GUI UNATTACKABLE

Body  ActiveBody BodyTag_01
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
End

Behavior  SlavedUpdate ModuleTag_04
GuardMaxRange  15      ;How far away from master I'm allowed when master is idle (doesn't wander)
StayOnSameLayerAsMaster  Yes
End

Locomotor  SET_NORMAL NukeneerLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

Behavior  HordeUpdate ModuleTag_Horde01
UpdateRate  2000    ; how often to recheck horde status (msec)
RubOffRadius  60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
Radius  30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
KindOf  INFANTRY    ; what KindOf's must match to count towards horde-ness
AlliesOnly  Yes     ; do we only count allies towards horde status?
ExactMatch  No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
Count  5            ; how many units must be within Radius to grant us horde-ness
Action  HORDE       ; when horde-ing, grant us the HORDE bonus
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_MinigunnerTeamMember01DeathObject
FX                   INITIAL FX_MinigunnerDie
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDie
OCL                  INITIAL OCL_ChinaExplodedDeathMiniGunner
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByFire
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByFire
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
DestructionDelay     0
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
OCL                  FINAL   OCL_MinigunnerTeamMember01DeathObject
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_ChinaExplodedDeathMiniGunner
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MinigunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MinigunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  800 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object ChinaInfantryMinigunnerTeamMember01DeathObject
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model                      NIMngnr_SKN_C
Animation                  AISTNG_SKL.AISTNG_DTA
Animation                  AISTNG_SKL.AISTNG_DTB
AnimationSpeedFactorRange  0.9 1.25
AnimationMode              ONCE
TransitionKey              TRANS_Dying
End
AliasConditionState  DYING
End

;**** DESIGN parameters ***
Side  China
EditorSorting  SYSTEM

;**** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE IGNORED_IN_GUI UNATTACKABLE CANNOT_RETALIATE

Body  ActiveBody BodyTag_01
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
End
Locomotor  SET_NORMAL NukeneerLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

Behavior  LifetimeUpdate ModuleTag_05242
MinLifetime  1   ; min lifetime in msec
MaxLifetime  1   ; max lifetime in msec
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
End
; --- end Death modules ---

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object ChinaInfantryMinigunnerTeamMember02
Scale 0.90
; *** ART Parameters ***
SelectPortrait          SNMiniGunner_L
ButtonImage             SNMiniGunner

Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes

;NORMAL STANDING
DefaultConditionState
Model  NIMngnr_SKN_E
IdleAnimation  NIHCKR_SKL.NIHCKR_KI1 0 10
IdleAnimation  NIHCKR_SKL.NIHCKR_KI2
IdleAnimation  NIHCKR_SKL.NIHCKR_KI3
AnimationMode  ONCE
TransitionKey  TRANS_Stand
End
AliasConditionState  REALLYDAMAGED

TransitionState  TRANS_Stand Trans_Moving
Animation  NIHCKR_SKL.NIHCKR_KNL
AnimationMode  ONCE_BACKWARDS
AnimationSpeedFactorRange  3.5 3.5
End

TransitionState  Trans_Moving TRANS_Stand
Animation  NIHCKR_SKL.NIHCKR_KNL
AnimationMode  ONCE
End

ConditionState  MOVING
Animation  NIHCKR_SKL.NIHCKR_RNA 14
AnimationMode  LOOP
Flags  RANDOMSTART
TransitionKey  Trans_Moving
ParticleSysBone    None InfantryDustTrails
End
AliasConditionState  MOVING UNPACKING
AliasConditionState  MOVING UNPACKING REALLYDAMAGED


ConditionState  FREEFALL
Animation  NIHCKR_SKL.NIHCKR_PFL
AnimationMode  LOOP
TransitionKey  TRANS_Falling
End
AliasConditionState  FREEFALL REALLYDAMAGED
AliasConditionState  FREEFALL DYING

ConditionState  PARACHUTING
Animation  NIHCKR_SKL.NIHCKR_PHG
AnimationMode  LOOP
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
TransitionKey  TRANS_Chute
End
AliasConditionState  PARACHUTING REALLYDAMAGED
AliasConditionState  PARACHUTING DYING


ConditionState  DYING
Animation  NIHCKR_SKL.NIHCKR_DTA
Animation  NIHCKR_SKL.NIHCKR_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End

TransitionState  TRANS_Dying TRANS_Flailing
Animation  NIHCKR_SKL.NIHCKR_ADTG1
AnimationMode  ONCE
End

ConditionState  DYING EXPLODED_FLAILING
Animation  NIHCKR_SKL.NIHCKR_ADTG2
AnimationMode  LOOP
TransitionKey  TRANS_Flailing
End

ConditionState  DYING EXPLODED_BOUNCING
Animation  NIHCKR_SKL.NIHCKR_ADTG3
AnimationMode  ONCE
TransitionKey  None
End

ConditionState  SPECIAL_CHEERING
Animation  NIHCKR_SKL.NIHCKR_CHA
AnimationMode  LOOP
End

TransitionState  TRANS_Falling TRANS_Chute
Animation  NIHCKR_SKL.NIHCKR_POP
AnimationMode  ONCE
Flags  PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
End

TransitionState  TRANS_Chute TRANS_Stand
Animation  NIHCKR_SKL.NIHCKR_PTD
AnimationMode  ONCE
End

End

;**** DESIGN parameters ***
Side  China
EditorSorting  SYSTEM
TransportSlotCount  1                 ;how many "slots" we take in a transport (0 == not transportable)


ArmorSet
Conditions       None
Armor            WeaponTeamHumanArmor
DamageFX         InfantryDamageFX
End

VisionRange  220
ShroudClearingRange  220

BuildTime  0.0

IsTrainable  No             ;Can gain experience
CrushableLevel          2  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles

; *** AUDIO Parameters ***
VoiceSelect  NoSound
VoiceMove  NoSound
VoiceAttack  NoSound

;**** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE IGNORED_IN_GUI UNATTACKABLE

Body  ActiveBody BodyTag_01
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
End

Behavior  SlavedUpdate ModuleTag_04
GuardMaxRange  15      ;How far away from master I'm allowed when master is idle (doesn't wander)
StayOnSameLayerAsMaster  Yes
End

Locomotor  SET_NORMAL NukeneerLocomotor

Behavior  PhysicsBehavior BehaviorTag_01
Mass  5.0
End

Behavior  HordeUpdate ModuleTag_Horde01
UpdateRate  2000    ; how often to recheck horde status (msec)
RubOffRadius  60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
Radius  30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
KindOf  INFANTRY    ; what KindOf's must match to count towards horde-ness
AlliesOnly  Yes     ; do we only count allies towards horde status?
ExactMatch  No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
Count  5            ; how many units must be within Radius to grant us horde-ness
Action  HORDE       ; when horde-ing, grant us the HORDE bonus
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA -LASERED -EXTRA_2 -EXTRA_3 -EXTRA_4 -EXTRA_5 -EXTRA_6 -EXTRA_7
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDie
OCL                  INITIAL OCL_MinigunnerTeamMember02DeathObject
End
Behavior  SlowDeathBehavior ModuleTag_Death02
DeathTypes           NONE +CRUSHED +SPLATTED
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
FX                   INITIAL FX_GIDieCrushed
End
Behavior  SlowDeathBehavior ModuleTag_Death03
DeathTypes           NONE +EXPLODED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDie
OCL                  INITIAL OCL_ChinaExplodedDeathMiniGunner
End
Behavior  SlowDeathBehavior ModuleTag_Death04
DeathTypes           NONE +BURNED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByFire
OCL                  INITIAL OCL_FlamingInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death05
DeathTypes           NONE +POISONED
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
DeathTypes           NONE +POISONED_BETA
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
End
Behavior  SlowDeathBehavior ModuleTag_Death07
DeathTypes           NONE +POISONED_GAMMA
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieTesla
OCL                  INITIAL OCL_TeslaDeathInfantry
FX                   FINAL   FX_IfantryTeslaDie
End
Behavior  SlowDeathBehavior ModuleTag_Death08 ;new and shiney microwave death effect
DeathTypes           NONE +EXTRA_2
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByFire
OCL                  INITIAL OCL_MicrowavedInfantry
End
Behavior  SlowDeathBehavior ModuleTag_Death09
DeathTypes           NONE +EXTRA_3
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDieByToxin
OCL                  INITIAL OCL_ViralInfantryDeath
End
Behavior  SlowDeathBehavior ModuleTag_Death045 ;Brutal kill with lots of blood and no death scream
DeathTypes           NONE +EXTRA_4
DestructionDelay     0
OCL                  INITIAL OCL_BrutalBloodyDeathBits
FX                   INITIAL FX_InfantryGoreExplosion
OCL                  FINAL   OCL_MinigunnerTeamMember02DeathObject
End
Behavior  SlowDeathBehavior ModuleTag_036 ;Gore death explosion
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  30
DestructionDelay     0
OCL                  INITIAL OCL_BloodyGoreExplosion
FX                   FINAL   FX_InfantryGoreExplosion
End
Behavior  SlowDeathBehavior ModuleTag_Death0323
DeathTypes           NONE +EXTRA_5
ProbabilityModifier  70
DestructionDelay     0
FX                   INITIAL FX_MinigunnerDie
OCL                  INITIAL OCL_BrutalBloodyDeathBits
OCL                  FINAL OCL_ChinaExplodedDeathMiniGunner
End
Behavior  SlowDeathBehavior ModuleTag_03241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_6
DestructionDelay     0
OCL                  INITIAL OCL_RadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MinigunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_0323241156 ;Radiation Melt
DeathTypes           NONE +EXTRA_7
DestructionDelay     0
OCL                  INITIAL OCL_NeutronRadiationDeathInfantry
FX                   INITIAL FX_GIDieRadiation
FX                   FINAL   FX_MinigunnerDieByToxin
End
Behavior  SlowDeathBehavior ModuleTag_03231 ;Cryogenic Freeze death
DeathTypes           NONE +LASERED
DestructionDelay     0
FX                   INITIAL FX_GIDieCryoFreeze
OCL                  INITIAL OCL_CrygenicDeathInfantry
End
; --- end Death modules ---

Behavior  PoisonedBehavior BehaviorTag_02
PoisonDamageInterval  100  ; Every this many msec I will retake the poison damage dealt me...
PoisonDuration  3000       ; ... for this long after last hit by poison damage
End

Behavior  AutoHealBehavior ModuleTag_SelfHeal
HealingAmount  2.5  ;in health points
HealingDelay  800 ; msec
StartHealingDelay  5000 ;in miliseconds
StartsActive   Yes
End

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object ChinaInfantryMinigunnerTeamMember02DeathObject
Scale 0.90
; *** ART Parameters ***
Draw  W3DModelDraw ModuleTag_01
OkToChangeModelColor  Yes
DefaultConditionState
Model  NIMngnr_SKN_E
Animation  NIHCKR_SKL.NIHCKR_DTA
Animation  NIHCKR_SKL.NIHCKR_DTB
AnimationMode  ONCE
TransitionKey  TRANS_Dying
End
AliasConditionState  DYING
End

;**** DESIGN parameters ***
Side  China
EditorSorting  SYSTEM

;**** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY OBSTACLE IGNORED_IN_GUI UNATTACKABLE CANNOT_RETALIATE

Body  ActiveBody BodyTag_01
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
AutoAcquireEnemiesWhenIdle  Yes
End
Locomotor  SET_NORMAL NukeneerLocomotor

Behavior  PhysicsBehavior ModuleTag_05
Mass  5.0
End

Behavior  LifetimeUpdate ModuleTag_05242
MinLifetime  1   ; min lifetime in msec
MaxLifetime  1   ; max lifetime in msec
End

; --- begin Death modules ---
Behavior  SlowDeathBehavior ModuleTag_Death01
DeathTypes           ALL
SinkDelay            3000
SinkRate             0.5     ; in Dist/Sec
DestructionDelay     8000
End
; --- end Death modules ---

Geometry  CYLINDER
GeometryMajorRadius  4.0 ; very thin
GeometryHeight  12.0
GeometryIsSmall  Yes
Shadow  SHADOW_DECAL
ShadowSizeX  14;
ShadowSizeY  14;
ShadowTexture  ShadowI;
BuildCompletion  APPEARS_AT_RALLY_POINT

End