;------------------------------------------------------------------------------
Object ChinaTankShenlong

; *** ART Parameters ***
SelectPortrait          SNShenlong_L
ButtonImage             SNShenlong

UpgradeCameo1  Upgrade_Nationalism
UpgradeCameo2  Upgrade_ChinaBlackNapalm
UpgradeCameo3  Upgrade_ChinaNuclearTanks
UpgradeCameo4  Upgrade_ChinaIsotopeStability

Draw  W3DOverlordTankDraw ModuleTag_01

OkToChangeModelColor  Yes
ExtraPublicBone  FIREPOINT01
ParticlesAttachedToAnimatedBones  Yes

ConditionState         NONE
Model                NVShen
Animation            NVShen.NVShen
AnimationMode        ONCE
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFire
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFire
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
End

ConditionState         MOVING
Model                NVShen
Animation            NVShen.NVShen
AnimationMode        ONCE_BACKWARDS
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFire
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFire
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
End

ConditionState         REALLYDAMAGED
Model                NVShen_D
Animation            NVShen_D.NVShen_D
AnimationMode        ONCE
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFire
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFire
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
ParticleSysBone      Fire01 FlameTowerBurnerFire
ParticleSysBone      Fire01 SmokeFactionEvenSmall
ParticleSysBone      Fire02 FlameTowerBurnerFire
ParticleSysBone      Fire02 SmokeFactionEvenSmall
ParticleSysBone      Fire03 SmokeFactionEvenSmall
End

ConditionState         REALLYDAMAGED MOVING
Model                NVShen_D
Animation            NVShen_D.NVShen_D
AnimationMode        ONCE_BACKWARDS
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFire
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFire
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
ParticleSysBone      Fire01 FlameTowerBurnerFire
ParticleSysBone      Fire01 SmokeFactionEvenSmall
ParticleSysBone      Fire02 FlameTowerBurnerFire
ParticleSysBone      Fire02 SmokeFactionEvenSmall
ParticleSysBone      Fire03 SmokeFactionEvenSmall
End

ConditionState         USER_2
Model                NVShen
Animation            NVShen.NVShen
AnimationMode        ONCE
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
End

ConditionState         USER_2 MOVING
Model                NVShen
Animation            NVShen.NVShen
AnimationMode        ONCE_BACKWARDS
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
End

ConditionState         USER_2 REALLYDAMAGED
Model                NVShen_D
Animation            NVShen_D.NVShen_D
AnimationMode        ONCE
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
ParticleSysBone      Fire01 FlameTowerBurnerFireUpgraded
ParticleSysBone      Fire01 SmokeFactionEvenSmall
ParticleSysBone      Fire02 FlameTowerBurnerFireUpgraded
ParticleSysBone      Fire02 SmokeFactionEvenSmall
ParticleSysBone      Fire03 SmokeFactionEvenSmall
End

ConditionState         USER_2 REALLYDAMAGED MOVING
Model                NVShen_D
Animation            NVShen_D.NVShen_D
AnimationMode        ONCE_BACKWARDS
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   Muzzle
WeaponLaunchBone     PRIMARY   Muzzle
WeaponFireFXBone     SECONDARY Muzzle
WeaponLaunchBone     SECONDARY Muzzle
WeaponFireFXBone     TERTIARY  Muzzle
WeaponLaunchBone     TERTIARY  Muzzle
ParticleSysBone      FireFx01 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
ParticleSysBone      Fire01 FlameTowerBurnerFireUpgraded
ParticleSysBone      Fire01 SmokeFactionEvenSmall
ParticleSysBone      Fire02 FlameTowerBurnerFireUpgraded
ParticleSysBone      Fire02 SmokeFactionEvenSmall
ParticleSysBone      Fire03 SmokeFactionEvenSmall
End

ConditionState         RUBBLE
Model                NVShen_D
Animation            NVShen_D.NVShen_D
AnimationMode        ONCE
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   None
WeaponLaunchBone     PRIMARY   None
WeaponFireFXBone     SECONDARY None
WeaponLaunchBone     SECONDARY None
WeaponFireFXBone     TERTIARY  None
WeaponLaunchBone     TERTIARY  None
ParticleSysBone      FireFx01 FlameTowerBurnerFire
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFire
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
ParticleSysBone      Fire01 FlameTowerBurnerFire
ParticleSysBone      Fire01 SmokeFactionEvenSmall
ParticleSysBone      Fire02 FlameTowerBurnerFire
ParticleSysBone      Fire02 SmokeFactionEvenSmall
ParticleSysBone      Fire03 FlameTowerBurnerFire
ParticleSysBone      Fire03 SmokeFactionEvenSmall
End

ConditionState         USER_2 RUBBLE
Model                NVShen_D
Animation            NVShen_D.NVShen_D
AnimationMode        ONCE
Flags                MAINTAIN_FRAME_ACROSS_STATES
Turret               Turret01
WeaponFireFXBone     PRIMARY   None
WeaponLaunchBone     PRIMARY   None
WeaponFireFXBone     SECONDARY None
WeaponLaunchBone     SECONDARY None
WeaponFireFXBone     TERTIARY  None
WeaponLaunchBone     TERTIARY  None
ParticleSysBone      FireFx01 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx01 SmokeFactionEvenSmall
ParticleSysBone      FireFx02 FlameTowerBurnerFireUpgraded
ParticleSysBone      FireFx02 SmokeFactionEvenSmall
ParticleSysBone      Fire01 FlameTowerBurnerFireUpgraded
ParticleSysBone      Fire01 SmokeFactionEvenSmall
ParticleSysBone      Fire02 FlameTowerBurnerFireUpgraded
ParticleSysBone      Fire02 SmokeFactionEvenSmall
ParticleSysBone      Fire03 FlameTowerBurnerFireUpgraded
ParticleSysBone      Fire03 SmokeFactionEvenSmall
End


TrackMarks            EXTnkTrack.tga
TreadAnimationRate  2.0;  amount of tread texture to move per second
TreadDriveSpeedFraction  0.3  ; fraction of locomotor speed below which treads stop moving.
TreadPivotSpeedFraction  0.6  ; fraction of locomotor speed below which we allow pivoting.
End

Draw  W3DModelDraw ModuleTag_Upgrades01

OkToChangeModelColor  Yes

DefaultConditionState
Model                NVNOverld_U1
Turret               Turret01
HideSubObject        Upgrade01 Upgrade02
End

ConditionState  REALLYDAMAGED
Model                NVNOverld_U1D
End
AliasConditionState  RUBBLE

;;;With Reactor
ConditionState         USER_1
HideSubObject        Upgrade01
ShowSubObject        Upgrade02
End

ConditionState         USER_1 REALLYDAMAGED
Model                NVNOverld_U1D
HideSubObject        Upgrade01
ShowSubObject        Upgrade02
End
AliasConditionState    USER_1 RUBBLE

End


; ***DESIGN parameters ***
DisplayName          OBJECT:Shenlong
Side                 China
EditorSorting        VEHICLE
TransportSlotCount   5                 ;how many "slots" we take in a transport (0 == not transportable)


;Normal Weaponset
WeaponSet
Conditions  None
Weapon             PRIMARY   ShenlongFlameThrowerWeapon
Weapon             SECONDARY ShenlongFlameThrowerWeapon
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerWeapon
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

;Veteran Weaponset
WeaponSet
Conditions  VETERAN
Weapon             PRIMARY   ShenlongFlameThrowerVeteranWeapon
Weapon             SECONDARY ShenlongFlameThrowerVeteranWeapon
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerVeteranWeapon
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

;Elite Weaponset
WeaponSet
Conditions  ELITE
Weapon             PRIMARY   ShenlongFlameThrowerEliteWeapon
Weapon             SECONDARY ShenlongFlameThrowerEliteWeapon
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerEliteWeapon
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

;Heroic Weaponset
WeaponSet
Conditions  HERO
Weapon             PRIMARY   ShenlongFlameThrowerHeroicWeapon
Weapon             SECONDARY ShenlongFlameThrowerHeroicWeapon
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerHeroicWeapon
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

;Normal Black Napalm Weaponset
WeaponSet
Conditions  PLAYER_UPGRADE
Weapon             PRIMARY   ShenlongFlameThrowerWeaponUpgraded
Weapon             SECONDARY ShenlongFlameThrowerWeaponUpgraded
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerWeaponUpgraded
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

;Normal Veteran Black Napalm Weaponset
WeaponSet
Conditions  PLAYER_UPGRADE VETERAN
Weapon             PRIMARY   ShenlongFlameThrowerVeteranWeaponUpgraded
Weapon             SECONDARY ShenlongFlameThrowerVeteranWeaponUpgraded
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerVeteranWeaponUpgraded
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

;Normal Elite Black Napalm Weaponset
WeaponSet
Conditions  PLAYER_UPGRADE ELITE
Weapon             PRIMARY   ShenlongFlameThrowerEliteWeaponUpgraded
Weapon             SECONDARY ShenlongFlameThrowerEliteWeaponUpgraded
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerEliteWeaponUpgraded
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

;Normal Heroic Black Napalm Weaponset
WeaponSet
Conditions  PLAYER_UPGRADE HERO
Weapon             PRIMARY   ShenlongFlameThrowerHeroicWeaponUpgraded
Weapon             SECONDARY ShenlongFlameThrowerHeroicWeaponUpgraded
AutoChooseSources  SECONDARY NONE
Weapon             TERTIARY  ShenlongFlameThrowerHeroicWeaponUpgraded
AutoChooseSources  TERTIARY  NONE
ShareWeaponReloadTime  Yes
WeaponLockSharedAcrossSets  Yes
End

ArmorSet
Conditions         None
Armor              ShenlongTankArmor
DamageFX           HeavyTankDamageFX
End

BuildCost        1900
BuildTime        22.0          ;in seconds
VisionRange      150
ShroudClearingRange  200

Prerequisites
Object   ChinaWarFactory
Object   ChinaBreederReactor
Science  SCIENCE_ChinaTankOverlord
End

ExperienceValue  200 200 400 600   ;Experience point value at each level
ExperienceRequired  0 400 600 1200  ;Experience points needed to gain each level
IsTrainable  Yes             ;Can gain experience
CrusherLevel            3  ;What can I crush?: 1  infantry, 2  trees, 3  vehicles
CrushableLevel          4  ;What am I?:        0  for infantry, 1  for trees, 2  general vehicles
CommandSet  ChinaTankShenlongCommandSet

; *** AUDIO Parameters ***
VoiceSelect            ShenlongVoiceSelect
SoundMoveStart         OverlordTankMoveStart
SoundMoveStartDamaged  OverlordTankMoveStart
VoiceMove              ShenlongVoiceMove
VoiceGuard             ShenlongVoiceMove
VoiceAttack            ShenlongVoiceAttack

UnitSpecificSounds
; These have the syntax of SomeNameSomewhereInCode  SomeNameSomewhereInLookupINIs
VoiceCreate          ShenlongVoiceCreate
TurretMoveLoop       OverlordTankTurretMoveLoop
VoiceCrush           ShenlongVoiceMove
VoiceEnter           ShenlongVoiceMove
VoiceUnload          ShenlongVoiceUnload
End

; *** ENGINEERING Parameters ***
RadarPriority  UNIT
KindOf  PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE HUGE_VEHICLE SCORE

Body  ActiveBody ModuleTag_02
MaxHealth        1100.0
InitialHealth    1100.0

; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
SubdualDamageCap  2200
SubdualDamageHealRate  500
SubdualDamageHealAmount  50
End

Behavior  TransportAIUpdate ModuleTag_03
Turret
TurretTurnRate         55
MinIdleScanAngle       10
MaxIdleScanAngle       40
MinIdleScanInterval    5000
MaxIdleScanInterval    10000
TurretFireAngleSweep      PRIMARY 8
TurretSweepSpeedModifier  PRIMARY 0.6
TurretFireAngleSweep      SECONDARY 22.5 ;makes it sweep in a cone of 45 degrees
TurretSweepSpeedModifier  SECONDARY 1.0
TurretFireAngleSweep      TERTIARY 45 ;makes it sweep in a cone of 90 degrees
TurretSweepSpeedModifier  TERTIARY 1.0
ControlledWeaponSlots  PRIMARY SECONDARY TERTIARY
End
AutoAcquireEnemiesWhenIdle  Yes
End
Locomotor  SET_NORMAL ShenlongLocomotor
Locomotor  SET_NORMAL_UPGRADED NuclearShenlongLocomotor

Behavior  FireWeaponWhenDeadBehavior ModuleTag_04
DeathWeapon    NuclearTankDeathWeapon
StartsActive   No                        ; turned on by upgrade
TriggeredBy    Upgrade_ChinaNuclearTanks
ConflictsWith  Upgrade_ChinaIsotopeStability
End

Behavior  LocomotorSetUpgrade ModuleTag_05
TriggeredBy  Upgrade_ChinaNuclearTanks
End

;This spawns a crate that only bombtrucks can pickup to gain a nuclear payload
Behavior  CreateCrateDie ModuleTag_NukeCrate01
RequiredStatus  STATUS_RIDER8
CrateData       NuclearTankCrateData
End

;This makes sure that we only drop nuclear upgrade parts after having been upgraded with nuclear engines
Behavior  StatusBitsUpgrade ModuleTag_NukeCrate02
TriggeredBy     Upgrade_ChinaNuclearTanks
StatusToSet     STATUS_RIDER8
End

Behavior  PhysicsBehavior ModuleTag_14
Mass  50.0
End

Behavior  HordeUpdate ModuleTag_Horde01
RubOffRadius  200    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
UpdateRate  1000     ; how often to recheck horde status (msec)
Radius  125          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
KindOf  VEHICLE      ; what KindOf's must match to count towards horde-ness
AlliesOnly  Yes      ; do we only count allies towards horde status?
Count  5             ; how many units must be within Radius to grant us horde-ness
Action  HORDE        ; when horde-ing, grant us the HORDE bonus
End

;Normal Death Explosion
Behavior  SlowDeathBehavior ModuleTag_Death01
ExemptStatus  STATUS_RIDER8
ProbabilityModifier  25
DestructionDelay  1500
DestructionDelayVariance  600
FX   INITIAL  FX_CrusaderCatchFire
OCL  FINAL    OCL_ChinaTankShenlongDebris
FX   FINAL    FX_OverlordExplosionOneFinal
Weapon  FINAL ShenlongDeathExplosionWeapon
End

;Black Napalm Death Explosion
Behavior  SlowDeathBehavior ModuleTag_Death02
RequiredStatus  STATUS_RIDER8
ProbabilityModifier  25
DestructionDelay  1500
DestructionDelayVariance  600
FX   INITIAL  FX_CrusaderCatchFire
OCL  FINAL    OCL_ChinaTankShenlongDebris
FX   FINAL    FX_OverlordExplosionOneFinal
Weapon  FINAL ShenlongDeathExplosionWeaponUpgraded
End

Behavior  CreateCrateDie ModuleTag_17
CrateData  SalvageCrateDataChinaTier2
End

Behavior  TransitionDamageFX ModuleTag_18
ReallyDamagedParticleSystem1  Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
ReallyDamagedFXList1  Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
End

Behavior  FlammableUpdate ModuleTag_21
AflameDuration  5000         ; If I catch fire, I'll burn for this long...
AflameDamageAmount  3       ; taking this much damage...
AflameDamageDelay  500       ; this often.
End

Behavior  ModelConditionUpgrade ModuleTag_NukeReactorVissual01
ConditionFlag  USER_1
TriggeredBy    Upgrade_ChinaNuclearTanks
End

Behavior  ModelConditionUpgrade ModuleTag_BlackNapalmFlames01
ConditionFlag  USER_2
TriggeredBy    Upgrade_ChinaBlackNapalm
End

Behavior  WeaponSetUpgrade ModuleTag_BlackNapalmFlames02
TriggeredBy  Upgrade_ChinaBlackNapalm
End

Behavior  CommandSetUpgrade ModuleTag_BlackNapalmFlames03
CommandSet  ChinaTankShenlongCommandSetUpgraded
TriggeredBy   Upgrade_ChinaBlackNapalm
End

Behavior  StatusBitsUpgrade ModuleTag_BlackNapalmFlames04
TriggeredBy     Upgrade_ChinaBlackNapalm
StatusToSet     STATUS_RIDER8
End

Behavior  StealthUpdate ModuleTag_GPSStealth01
StealthDelay                 2000 ; msec
StealthForbiddenConditions   FIRING_PRIMARY FIRING_SECONDARY FIRING_TERTIARY RIDERS_ATTACKING
InnateStealth                Yes
RequiredStatus               REASSIGN_PARKING ;Used exclusively by the GPS Scrambler
OrderIdleEnemiesToAttackMeUponReveal   Yes
End

Behavior  EjectPilotDie ModuleTag_HijackerEmerge01
DeathTypes  ALL -CRUSHED -SPLATTED
RequiredStatus  HIJACKED
VeterancyLevels   ALL
GroundCreationList  OCL_HijackerEmerge
AirCreationList  OCL_HijackerEmergeViaParachute
End

Behavior  OverlordContain ModuleTag_InfantryTurret01
Slots                    1
DamagePercentToUnits     100%
AllowInsideKindOf        PORTABLE_STRUCTURE
PassengersAllowedToFire  Yes
PassengersInTurret       Yes
ExperienceSinkForRider   Yes
;PayloadTemplateName      ChinaTankShenlongNuclearMortarTurret
End

Behavior  ProductionUpdate ModuleTag_Production01
MaxQueueEntries  1; So you can't build multiple upgrades in the same frame
End

Behavior  ObjectCreationUpgrade ModuleTag_TurretUpgrade01
UpgradeObject  OCL_ShenlongEMPMissileTurret
TriggeredBy    Upgrade_ChinaHanEMPBomb
ConflictsWith  Upgrade_ChinaHanFlameThrower Upgrade_ChinaHanTacticalNuke
End

Behavior  ObjectCreationUpgrade ModuleTag_TurretUpgrade02
UpgradeObject  OCL_ShenlongFlamerTurret
TriggeredBy    Upgrade_ChinaHanFlameThrower
ConflictsWith  Upgrade_ChinaHanEMPBomb Upgrade_ChinaHanTacticalNuke
End

Behavior  ObjectCreationUpgrade ModuleTag_TurretUpgrade03
UpgradeObject  OCL_ShenlongNuclearMortarTurret
TriggeredBy    Upgrade_ChinaHanTacticalNuke
ConflictsWith  Upgrade_ChinaHanFlameThrower Upgrade_ChinaHanEMPBomb
End

Behavior  FXListDie ModuleTag_HijackerEmerge02
RequiredStatus  HIJACKED
DeathTypes  ALL -CRUSHED -SPLATTED
DeathFX  FX_HijackerEmerge
End

;Propaganda Spotlight
Behavior            OCLSpecialPower ModuleTag_PropagandaSpotlight01
SpecialPowerTemplate  SuperweaponPropagandaSpotlight
OCL                   SUPERWEAPON_ChinaPropagandaSpotlight
UpgradeOCL            SCIENCE_Nationalism SUPERWEAPON_ChinaNationalismPropagandaSpotlight
UpgradeOCL            SCIENCE_Patriotism  SUPERWEAPON_ChinaPatriotismPropagandaSpotlight
CreateLocation        USE_OWNER_OBJECT
End

Behavior  GrantScienceUpgrade ModuleTag_PropagandaSpotlight02
TriggeredBy   Upgrade_Nationalism
GrantScience  SCIENCE_Nationalism
End

Behavior  GrantScienceUpgrade ModuleTag_PropagandaSpotlight03
TriggeredBy   Upgrade_Fanaticism
GrantScience  SCIENCE_Patriotism
End

Behavior  CommandButtonHuntUpdate  ModuleTag_Huntin01 ; allows use of command button hunt script with this unit.
End

Geometry  BOX
GeometryMajorRadius  26.0
GeometryMinorRadius  13.0
GeometryHeight  15.0
GeometryIsSmall  No
Shadow  SHADOW_VOLUME
ShadowSizeX  45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object ChinaTankShenlongFlamerTurret

Draw                     W3DDependencyModelDraw ModuleTag_01
OkToChangeModelColor   Yes
ParticlesAttachedToAnimatedBones  Yes
AttachToBoneInContainer  FIREPOINT01

ConditionState  NONE
Model                NVShen_U
Turret               TURRET03
TurretPitch          TURRETEL03
HideSubObject        TURRET02 TURRET04 TURRET06 TURRET07
WeaponFireFXBone     PRIMARY Trrt3Mzl
WeaponLaunchBone     PRIMARY Trrt3Mzl
ParticleSysBone      TRRT3FLM01 FlameTowerBurnerFire
ParticleSysBone      TRRT3FLM01 SmokeFactionEvenSmall
End

ConditionState  REALLYDAMAGED
Model                NVShen_UD
Turret               TURRET03
TurretPitch          TURRETEL03
HideSubObject        TURRET02 TURRET04 TURRET06 TURRET07
WeaponFireFXBone     PRIMARY Trrt3Mzl
WeaponLaunchBone     PRIMARY Trrt3Mzl
ParticleSysBone      TRRT3FLM01 FlameTowerBurnerFire
ParticleSysBone      TRRT3FLM01 SmokeFactionEvenSmall
End

ConditionState  USER_2
Model                NVShen_U
Turret               TURRET03
TurretPitch          TURRETEL03
HideSubObject        TURRET02 TURRET04 TURRET06 TURRET07
WeaponFireFXBone     PRIMARY Trrt3Mzl
WeaponLaunchBone     PRIMARY Trrt3Mzl
ParticleSysBone      TRRT3FLM01 FlameTowerBurnerFireUpgraded
ParticleSysBone      TRRT3FLM01 SmokeFactionEvenSmall
End

ConditionState  REALLYDAMAGED USER_2
Model                NVShen_UD
Turret               TURRET03
TurretPitch          TURRETEL03
HideSubObject        TURRET02 TURRET04 TURRET06 TURRET07
WeaponFireFXBone     PRIMARY Trrt3Mzl
WeaponLaunchBone     PRIMARY Trrt3Mzl
ParticleSysBone      TRRT3FLM01 FlameTowerBurnerFireUpgraded
ParticleSysBone      TRRT3FLM01 SmokeFactionEvenSmall
End

End

; ***DESIGN parameters ***
Side              China
EditorSorting     SYSTEM
TransportSlotCount  1

WeaponSet
Conditions  None
Weapon  PRIMARY ShenlongFlameTurretWeapon
End

WeaponSet
Conditions  PLAYER_UPGRADE
Weapon  PRIMARY ShenlongFlameTurretWeaponUpgraded
End


ArmorSet
Conditions      None
Armor           InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
End
VisionRange      200

; *** AUDIO Parameters ***
UnitSpecificSounds
TurretMoveStart  NoSound
TurretMoveLoop   NoSound ;TurretMoveLoop
VoiceRapidFire   NoSound
End

; *** ENGINEERING Parameters ***
KindOf             PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
Body             StructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  PRIMARY SECONDARY
TurretTurnRate       180   // turn rate, in degrees per sec
TurretPitchRate      180
AllowsPitch          Yes
FiresWhileTurning    Yes
NaturalTurretPitch   5
MinPhysicalPitch     -20
TurretFireAngleSweep  PRIMARY 15
TurretSweepSpeedModifier  PRIMARY 0.6    ; Sweep slower than you turn (aim for 30 for art)
MinIdleScanInterval    250    ; in milliseconds
MaxIdleScanInterval    250   ; in milliseconds
MinIdleScanAngle       0       ; in degrees off the natural turret angle
MaxIdleScanAngle       360     ; in degrees off the natural turret angle
End
AutoAcquireEnemiesWhenIdle  Yes ;ATTACK_BUILDINGS; defensive weapon
MoodAttackCheckRate         50
End

Behavior              DestroyDie ModuleTag_04
End

Behavior  ModelConditionUpgrade ModuleTag_BlackNapalmFlames01
ConditionFlag  USER_2
TriggeredBy    Upgrade_ChinaBlackNapalm
End

Behavior  WeaponSetUpgrade ModuleTag_BlackNapalmFlames02
TriggeredBy  Upgrade_ChinaBlackNapalm
End

Geometry             BOX
GeometryMajorRadius  8.0
GeometryMinorRadius  8.0
GeometryHeight       9.0
GeometryIsSmall      No
Shadow               SHADOW_VOLUME
ShadowSizeX  45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object ChinaTankShenlongEMPMissileTurret

Draw                     W3DDependencyModelDraw ModuleTag_01
OkToChangeModelColor   Yes
AttachToBoneInContainer  FIREPOINT01

DefaultConditionState
Model                NVShen_U
Turret               TURRET07
HideSubObject        TURRET02 TURRET03 TURRET04 TURRET06
WeaponFireFXBone     PRIMARY Trrt7Mzl
WeaponLaunchBone     PRIMARY Trrt7Mzl
End

ConditionState  REALLYDAMAGED
Model                NVShen_UD
End

End

; ***DESIGN parameters ***
Side              China
EditorSorting     SYSTEM
TransportSlotCount  1

WeaponSet
Conditions           None
Weapon               PRIMARY ShenlongEmpMissileWeapon
End


ArmorSet
Conditions      None
Armor           InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
End
VisionRange      250

; *** AUDIO Parameters ***
UnitSpecificSounds
TurretMoveStart  NoSound
TurretMoveLoop   NoSound ;TurretMoveLoop
VoiceRapidFire   NoSound
End

; *** ENGINEERING Parameters ***
KindOf             PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
Body             StructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  PRIMARY SECONDARY
TurretTurnRate       180   // turn rate, in degrees per sec
MinIdleScanInterval    250    ; in milliseconds
MaxIdleScanInterval    250   ; in milliseconds
MinIdleScanAngle       0       ; in degrees off the natural turret angle
MaxIdleScanAngle       360     ; in degrees off the natural turret angle
End
AutoAcquireEnemiesWhenIdle  Yes ;ATTACK_BUILDINGS; defensive weapon
MoodAttackCheckRate         50
End

Behavior              DestroyDie ModuleTag_04
End


Geometry             BOX
GeometryMajorRadius  8.0
GeometryMinorRadius  8.0
GeometryHeight       9.0
GeometryIsSmall      No
Shadow               SHADOW_VOLUME
ShadowSizeX  45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object ChinaTankShenlongNuclearMortarTurret

Draw                     W3DDependencyModelDraw ModuleTag_01
OkToChangeModelColor   Yes
AttachToBoneInContainer  FIREPOINT01

ConditionState  NONE
Model                NVShen_U
IdleAnimation        NVShen_U.NVShen_U
AnimationMode        ONCE
Turret               TURRET04
ShowSubObject        WARHEAD
HideSubObject        TURRET02 TURRET03 TURRET06 TURRET07
WeaponFireFXBone     PRIMARY Warhead
WeaponLaunchBone     PRIMARY Warhead
WaitForStateToFinishIfPossible  TRANS_FIRING_A
End
AliasConditionState  RELOADING_A
AliasConditionState  BETWEEN_FIRING_SHOTS_A

ConditionState  FIRING_A
Model                NVShen_U
IdleAnimation        NVShen_U.NVShen_U
AnimationMode        ONCE
Turret               TURRET04
ShowSubObject        NONE
HideSubObject        TURRET02 TURRET03 TURRET06 TURRET07 WARHEAD
TransitionKey        TRANS_FIRING_A
WeaponFireFXBone     PRIMARY Warhead
WeaponLaunchBone     PRIMARY Warhead
End

ConditionState  REALLYDAMAGED
Model                NVShen_UD
IdleAnimation        NVShen_UD.NVShen_UD
AnimationMode        ONCE
Turret               TURRET04
ShowSubObject        WARHEAD
HideSubObject        TURRET02 TURRET03 TURRET06 TURRET07
WeaponFireFXBone     PRIMARY Warhead
WeaponLaunchBone     PRIMARY Warhead
WaitForStateToFinishIfPossible  TRANS_FIRING_A
End
AliasConditionState  REALLYDAMAGED RELOADING_A
AliasConditionState  REALLYDAMAGED BETWEEN_FIRING_SHOTS_A

ConditionState  REALLYDAMAGED FIRING_A
Model                NVShen_UD
IdleAnimation        NVShen_UD.NVShen_UD
AnimationMode        ONCE
Turret               TURRET04
ShowSubObject        NONE
HideSubObject        TURRET02 TURRET03 TURRET06 TURRET07 WARHEAD
TransitionKey        TRANS_FIRING_A
WeaponFireFXBone     PRIMARY Warhead
WeaponLaunchBone     PRIMARY Warhead
End

End

; ***DESIGN parameters ***
Side              China
EditorSorting     SYSTEM
TransportSlotCount  1

WeaponSet
Conditions           None
Weapon               PRIMARY ShenlongMiniNukeCannon
End


ArmorSet
Conditions      None
Armor           InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
End
VisionRange      360

; *** AUDIO Parameters ***
UnitSpecificSounds
TurretMoveStart  NoSound
TurretMoveLoop   NoSound ;TurretMoveLoop
VoiceRapidFire   NoSound
End

; *** ENGINEERING Parameters ***
KindOf             PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI
Body             StructureBody ModuleTag_02
MaxHealth        100.0
InitialHealth    100.0
End

Behavior  AIUpdateInterface ModuleTag_03
Turret
ControlledWeaponSlots  PRIMARY SECONDARY
TurretTurnRate       180
AllowsPitch          No
FiresWhileTurning    Yes
MinIdleScanInterval    250    ; in milliseconds
MaxIdleScanInterval    250   ; in milliseconds
MinIdleScanAngle       0       ; in degrees off the natural turret angle
MaxIdleScanAngle       360     ; in degrees off the natural turret angle
End
AutoAcquireEnemiesWhenIdle  Yes ;ATTACK_BUILDINGS; defensive weapon
MoodAttackCheckRate         50
End

Behavior              DestroyDie ModuleTag_04
End


Geometry             BOX
GeometryMajorRadius  8.0
GeometryMinorRadius  8.0
GeometryHeight       9.0
GeometryIsSmall      No
Shadow               SHADOW_VOLUME
ShadowSizeX  45  ; minimum elevation angle above horizon. Used to limit shadow length

End